{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"5.main.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPage } from './login';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n  ],\n  exports: [\n    LoginPage\n  ]\n})\nexport class LoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController, Platform } from 'ionic-angular';\n// import { Facebook } from 'ionic-native';\nimport { FacebookService } from 'ngx-facebook';\n\nimport { UserService } from '../../providers/user-service';\nimport { ImageService } from '../../providers/image-service';\n\n@IonicPage({\n  name: 'login',\n  priority: 'high'\n})\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n})\nexport class LoginPage {\n  loading = false;\n  signup = false;\n  firstName = '';\n  lastName = '';\n  email = '';\n  password = '';\n  password2 = '';\n  private FB_APP_ID: number = 1566594110311271;\n  private permissions: Array<string> = [\n                'public_profile',\n            ];\n  constructor(private navCtrl: NavController,\n              private navParams: NavParams,\n              private alertCtrl: AlertController,\n              private platform: Platform,\n              private fb: FacebookService,\n              private userService: UserService,\n              private imageService: ImageService) {\n    this.userService.fetchCurrentUser()\n    .then(user => {\n      if (user) {\n        this.navCtrl.setRoot('dashboard');\n      }\n    });\n    this.platform.ready().then(() => {\n      // Check If Cordova/Mobile\n      if (this.platform.is('cordova')) {\n        // Native Facebook sdk\n        // Facebook.browserInit(this.FB_APP_ID, \"v2.8\");\n      } else {\n        // Web Facebook sdk\n        this.fb.init({\n            appId: '1566594110311271',\n            version: 'v2.8'\n        });\n      }\n    });\n  }\n\n  toggleType() {\n    console.log(\"Toggling auth type\");\n    this.signup = !this.signup;\n    this.firstName = '';\n    this.lastName = '';\n    this.email = '';\n    this.password = '';\n    this.password2 = '';\n  }\n\n  auth() {\n    this.loading = true;\n    if (this.signup) {\n      this.register();\n    } else {\n      this.login();\n    }\n  }\n\n  login() {\n    const self = this;\n    console.log(\"login pressed\");\n    if (this.email == '' || this.password == '') {\n      this.presentError('Please provide a valid email and password.');\n      this.loading = false;\n    } else {\n      this.userService.login(this.email, this.password, (user) => {\n        console.log(user);\n        if (!user.exception) {\n          const token = btoa(this.email + ':' + this.password);\n          self.userService.setCurrentUser(user, token)\n          .then(user => {\n            this.navCtrl.setRoot('DashboardPage');\n            this.email = '';\n            this.password = '';\n            this.loading = false;\n          });\n        } else {\n          this.presentError('No user found with the provided credentials.');\n          this.loading = false;\n        }\n      });\n    }\n  }\n\n  register() {\n    const self = this;\n    console.log(\"signup pressed\");\n    if (this.firstName == '' || this.email == '' || this.password == '' || this.password2 == '') {\n      this.presentError('Please provide a first name, email, and matching passwords.');\n      this.loading = false;\n    } else if (this.password != this.password2) {\n      this.presentError('The provided password do not match.')\n      this.loading = false;\n    } else {\n      this.userService.register(this.firstName, this.lastName, this.email, this.password, this.password2)\n      .then(user => {\n        console.log(user);\n        if (!user['exception']) {\n          const token = btoa(this.email + ':' + this.password);\n          self.userService.setCurrentUser(user, token)\n          .then(user => {\n            this.firstName = '';\n            this.lastName = '';\n            this.email = '';\n            this.password = '';\n            this.password2 = '';\n            this.loading = false;\n            this.navCtrl.setRoot('DashboardPage');\n          });\n        } else {\n          this.presentError('Registration failed. Please try again.');\n          this.loading = false;\n        }\n      });\n    }\n  }\n\n  facebookLogin() {\n    let self = this;\n    // Check If Cordova/Mobile\n    if (this.platform.is('cordova')) {\n        console.log(\"Starting Mobile Facebook login...\");\n        // Facebook.login(env.permissions)\n        // .then(response => {\n        //     console.log(\"Mobile Facebook login returned response.\");\n        //     this.loading = false;\n        //     resolve(response);\n        // })\n        // .catch(error => {\n        //     console.log(error);\n        //     reject(error);\n        // });\n    } else {\n        console.log(\"Starting Core Facebook login...\");\n        self.fb.login()\n        .then(response => {\n            console.log(\"Core Facebook login returned response:\");\n            console.log(response);\n            this.loading = false;\n            // this.userService.register(this.firstName, this.lastName, this.email, this.password, this.password2, (data) => {\n            //   console.log(data);\n            //   if (!data.exception) {\n            //     this.firstName = '';\n            //     this.lastName = '';\n            //     this.email = '';\n            //     this.password = '';\n            //     this.password2 = '';\n            //     this.loading = false;\n            //     this.navCtrl.setRoot('DashboardPage');\n            //   } else {\n            //     this.presentError('Registration failed. Please try again.');\n            //     this.loading = false;\n            //   }\n            // });\n        })\n        .catch(error => {\n            console.log(error);\n            this.loading = false;\n        });\n    }\n  }\n\n  presentError(message) {\n    let alert = this.alertCtrl.create({\n      title: 'Login Failed',\n      message: message,\n      buttons: ['Dismiss']\n    });\n    alert.present();\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}