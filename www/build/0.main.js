webpackJsonp([0],{293:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e(0),l=e(342),o=e(16),s=e(25),r=e(112),a=e(189),u=e(190),c=e(191),h=e(192),_=e(193),p=e(194),d=e(195),m=e(343),f=e(318),g=e(32);e.d(n,"DesignPageModuleNgFactory",function(){return b});var v=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])};return function(n,e){function i(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),y=function(t){function n(n){return t.call(this,n,[a.a,u.a,c.a,h.a,_.a,p.a,d.a,m.a],[])||this}return v(n,t),Object.defineProperty(n.prototype,"_NgLocalization_7",{get:function(){return null==this.__NgLocalization_7&&(this.__NgLocalization_7=new o.a(this.parent.get(i.c))),this.__NgLocalization_7},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_ɵi_8",{get:function(){return null==this.__ɵi_8&&(this.__ɵi_8=new s.a),this.__ɵi_8},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_FormBuilder_9",{get:function(){return null==this.__FormBuilder_9&&(this.__FormBuilder_9=new s.b),this.__FormBuilder_9},enumerable:!0,configurable:!0}),n.prototype.createInternal=function(){return this._CommonModule_0=new o.d,this._ɵba_1=new s.c,this._FormsModule_2=new s.d,this._ReactiveFormsModule_3=new s.e,this._IonicModule_4=new r.b,this._IonicPageModule_5=new r.c,this._DesignPageModule_6=new l.a,this._LAZY_LOADED_TOKEN_10=f.a,this._DesignPageModule_6},n.prototype.getInternal=function(t,n){return t===o.d?this._CommonModule_0:t===s.c?this._ɵba_1:t===s.d?this._FormsModule_2:t===s.e?this._ReactiveFormsModule_3:t===r.b?this._IonicModule_4:t===r.c?this._IonicPageModule_5:t===l.a?this._DesignPageModule_6:t===o.e?this._NgLocalization_7:t===s.a?this._ɵi_8:t===s.b?this._FormBuilder_9:t===g.d?this._LAZY_LOADED_TOKEN_10:n},n.prototype.destroyInternal=function(){},n}(i.x),b=new i.y(y,l.a)},304:function(t,n,e){"use strict";function i(t){return o._17(0,[(t()(),o._18(0,null,null,1,"div",[["class","toolbar-background"]],null,null,null,null,null)),o._20(278528,null,0,s.m,[o.t,o.u,o.H,o.I],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(t()(),o._18(0,null,null,8,"button",[["class","back-button"],["ion-button","bar-button"]],[[8,"hidden",0]],[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.backButtonClick(e)&&i}return i},a.a,a.b)),o._20(278528,null,0,s.m,[o.t,o.u,o.H,o.I],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o._20(1097728,null,0,u.a,[[8,"bar-button"],c.c,o.H,o.I],null,null),(t()(),o._18(0,null,0,2,"ion-icon",[["class","back-button-icon"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._20(278528,null,0,s.m,[o.t,o.u,o.H,o.I],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o._20(147456,null,0,h.a,[c.c,o.H,o.I],{name:[0,"name"]},null),(t()(),o._18(0,null,0,2,"span",[["class","back-button-text"]],null,null,null,null,null)),o._20(278528,null,0,s.m,[o.t,o.u,o.H,o.I],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(t()(),o._19(null,["",""])),o._27(null,0),o._27(null,1),o._27(null,2),(t()(),o._18(0,null,null,2,"div",[["class","toolbar-content"]],null,null,null,null,null)),o._20(278528,null,0,s.m,[o.t,o.u,o.H,o.I],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o._27(null,3)],function(t,n){var e=n.component;t(n,1,0,"toolbar-background","toolbar-background-"+e._mode);t(n,3,0,"back-button","back-button-"+e._mode);t(n,6,0,"back-button-icon","back-button-icon-"+e._mode),t(n,7,0,e._bbIcon);t(n,9,0,"back-button-text","back-button-text-"+e._mode);t(n,15,0,"toolbar-content","toolbar-content-"+e._mode)},function(t,n){var e=n.component;t(n,2,0,e._hideBb),t(n,5,0,o._22(n,7)._hidden),t(n,10,0,e._backText)})}function l(t){return o._17(0,[(t()(),o._18(0,null,null,1,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,i,f)),o._20(49152,null,0,r.a,[_.a,[2,p.a],[2,d.a],c.c,o.H,o.I],null,null)],null,function(t,n){t(n,0,0,o._22(n,1)._hidden,o._22(n,1)._sbPadding)})}var o=e(0),s=e(16),r=e(42),a=e(50),u=e(18),c=e(1),h=e(51),_=e(6),p=e(4),d=e(21);e.d(n,"b",function(){return f}),n.a=i;var m=[],f=o._16({encapsulation:2,styles:m,data:{}});o._26("ion-navbar",r.a,l,{color:"color",mode:"mode",hideBackButton:"hideBackButton"},{},["[menuToggle],ion-buttons[left]","ion-buttons[start]","ion-buttons[end],ion-buttons[right]","*"])},305:function(t,n,e){"use strict";function i(t){return u._17(0,[(t()(),u._18(0,[["input",1]],null,7,"input",[["class","text-input"]],[[8,"type",0],[8,"placeholder",0],[8,"readOnly",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"blur"],[null,"focus"],[null,"input"],[null,"compositionstart"],[null,"compositionend"],[null,"keydown"]],function(t,n,e){var i=!0,l=t.component;if("input"===n){i=!1!==u._22(t,2)._handleInput(e.target.value)&&i}if("blur"===n){i=!1!==u._22(t,2).onTouched()&&i}if("compositionstart"===n){i=!1!==u._22(t,2)._compositionStart()&&i}if("compositionend"===n){i=!1!==u._22(t,2)._compositionEnd(e.target.value)&&i}if("input"===n){i=!1!==u._22(t,7)._change(e)&&i}if("keydown"===n){i=!1!==u._22(t,7)._keyDown(e)&&i}if("focus"===n){i=!1!==u._22(t,7)._focus()&&i}if("blur"===n){i=!1!==u._22(t,7)._blur()&&i}if("ngModelChange"===n){i=!1!==(l._value=e)&&i}if("blur"===n){i=!1!==l.inputBlurred(e)&&i}if("focus"===n){i=!1!==l.inputFocused(e)&&i}return i},null,null)),u._20(278528,null,0,c.m,[u.t,u.u,u.H,u.I],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),u._20(16384,null,0,h.j,[u.I,u.H,[2,h.k]],null,null),u._23(1024,null,h.f,function(t){return[t]},[h.j]),u._20(671744,null,0,h.g,[[8,null],[8,null],[8,null],[2,h.f]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),u._23(2048,null,h.h,null,[h.g]),u._20(16384,null,0,h.i,[h.h],null,null),u._20(147456,[[1,4]],0,_.a,[u.H,u.I,p.c,d.b,h.h],null,{keydown:"keydown"})],function(t,n){var e=n.component;t(n,1,0,"text-input","text-input-"+e._mode),t(n,4,0,e.disabled,e._value)},function(t,n){var e=n.component;t(n,0,0,e.type,e.placeholder,e.readonly,u._22(n,6).ngClassUntouched,u._22(n,6).ngClassTouched,u._22(n,6).ngClassPristine,u._22(n,6).ngClassDirty,u._22(n,6).ngClassValid,u._22(n,6).ngClassInvalid,u._22(n,6).ngClassPending)})}function l(t){return u._17(0,[(t()(),u._18(0,[["textarea",1]],null,7,"textarea",[["class","text-input"]],[[8,"placeholder",0],[8,"readOnly",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"blur"],[null,"focus"],[null,"input"],[null,"compositionstart"],[null,"compositionend"],[null,"keydown"]],function(t,n,e){var i=!0,l=t.component;if("input"===n){i=!1!==u._22(t,2)._handleInput(e.target.value)&&i}if("blur"===n){i=!1!==u._22(t,2).onTouched()&&i}if("compositionstart"===n){i=!1!==u._22(t,2)._compositionStart()&&i}if("compositionend"===n){i=!1!==u._22(t,2)._compositionEnd(e.target.value)&&i}if("input"===n){i=!1!==u._22(t,7)._change(e)&&i}if("keydown"===n){i=!1!==u._22(t,7)._keyDown(e)&&i}if("focus"===n){i=!1!==u._22(t,7)._focus()&&i}if("blur"===n){i=!1!==u._22(t,7)._blur()&&i}if("ngModelChange"===n){i=!1!==(l._value=e)&&i}if("blur"===n){i=!1!==l.inputBlurred(e)&&i}if("focus"===n){i=!1!==l.inputFocused(e)&&i}return i},null,null)),u._20(278528,null,0,c.m,[u.t,u.u,u.H,u.I],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),u._20(16384,null,0,h.j,[u.I,u.H,[2,h.k]],null,null),u._23(1024,null,h.f,function(t){return[t]},[h.j]),u._20(671744,null,0,h.g,[[8,null],[8,null],[8,null],[2,h.f]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),u._23(2048,null,h.h,null,[h.g]),u._20(16384,null,0,h.i,[h.h],null,null),u._20(147456,[[2,4]],0,_.a,[u.H,u.I,p.c,d.b,h.h],null,{keydown:"keydown"})],function(t,n){var e=n.component;t(n,1,0,"text-input","text-input-"+e._mode),t(n,4,0,e.disabled,e._value)},function(t,n){var e=n.component;t(n,0,0,e.placeholder,e.readonly,u._22(n,6).ngClassUntouched,u._22(n,6).ngClassTouched,u._22(n,6).ngClassPristine,u._22(n,6).ngClassDirty,u._22(n,6).ngClassValid,u._22(n,6).ngClassInvalid,u._22(n,6).ngClassPending)})}function o(t){return u._17(0,[(t()(),u._18(0,null,null,1,"input",[["aria-hidden","true"],["next-input",""]],[[8,"type",0]],[[null,"focus"]],function(t,n,e){var i=!0;if("focus"===n){i=!1!==u._22(t,1).receivedFocus()&&i}return i},null,null)),u._20(16384,[[3,4]],0,m.a,[],null,null)],null,function(t,n){t(n,0,0,n.component.type)})}function s(t){return u._17(0,[(t()(),u._18(0,null,null,0,"div",[["class","input-cover"],["tappable",""]],null,[[null,"touchstart"],[null,"touchend"],[null,"mousedown"],[null,"mouseup"]],function(t,n,e){var i=!0,l=t.component;if("touchstart"===n){i=!1!==l.pointerStart(e)&&i}if("touchend"===n){i=!1!==l.pointerEnd(e)&&i}if("mousedown"===n){i=!1!==l.pointerStart(e)&&i}if("mouseup"===n){i=!1!==l.pointerEnd(e)&&i}return i},null,null))],null,null)}function r(t){return u._17(0,[u._21(671088640,1,{_nativeInput:0}),u._21(671088640,2,{_nativeTextarea:0}),u._21(671088640,3,{_nextInput:0}),(t()(),u._25(16777216,null,null,1,null,i)),u._20(16384,null,0,c.k,[u.L,u.N],{ngIf:[0,"ngIf"]},null),(t()(),u._25(16777216,null,null,1,null,l)),u._20(16384,null,0,c.k,[u.L,u.N],{ngIf:[0,"ngIf"]},null),(t()(),u._25(16777216,null,null,1,null,o)),u._20(16384,null,0,c.k,[u.L,u.N],{ngIf:[0,"ngIf"]},null),(t()(),u._18(0,null,null,1,"button",[["class","text-input-clear-icon"],["clear",""],["ion-button",""],["type","button"]],[[8,"hidden",0]],[[null,"click"],[null,"mousedown"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.clearTextInput()&&i}if("mousedown"===n){i=!1!==l.clearTextInput()&&i}return i},g.a,g.b)),u._20(1097728,null,0,v.a,[[8,""],p.c,u.H,u.I],{clear:[0,"clear"]},null),(t()(),u._25(16777216,null,null,1,null,s)),u._20(16384,null,0,c.k,[u.L,u.N],{ngIf:[0,"ngIf"]},null)],function(t,n){var e=n.component;t(n,4,0,"textarea"!==e._type),t(n,6,0,"textarea"===e._type),t(n,8,0,e._useAssist);t(n,10,0,""),t(n,12,0,e._useAssist)},function(t,n){t(n,9,0,!n.component.clearInput)})}function a(t){return u._17(0,[(t()(),u._18(0,null,null,1,"ion-input",[],null,null,null,r,x)),u._20(2342912,null,0,f.a,[p.c,d.b,y.a,b.a,u.H,u.I,[2,I.a],[2,L.a],[2,E.a],[2,h.h],P.a],null,null)],function(t,n){t(n,1,0)},null)}var u=e(0),c=e(16),h=e(25),_=e(71),p=e(1),d=e(3),m=e(72),f=e(111),g=e(50),v=e(18),y=e(26),b=e(6),I=e(27),L=e(41),E=e(21),P=e(7);e.d(n,"b",function(){return x}),n.a=r;var T=[],x=u._16({encapsulation:2,styles:T,data:{}});u._26("ion-input,ion-textarea",f.a,a,{color:"color",mode:"mode",placeholder:"placeholder",clearInput:"clearInput",value:"value",type:"type",disabled:"disabled",readonly:"readonly",clearOnEdit:"clearOnEdit",min:"min",max:"max",step:"step"},{blur:"blur",focus:"focus"},[])},306:function(t,n,e){"use strict";var i=(e(0),e(196));e.d(n,"a",function(){return l});var l=function(){function t(t){this.elementRef=t,t.nativeElement.$ionComponent=this}return t.prototype.getReorderNode=function(){return e.i(i.b)(this.elementRef.nativeElement,null)},t.prototype.onClick=function(t){t.preventDefault(),t.stopPropagation()},t}()},307:function(t,n,e){"use strict";function i(t){return o._17(2,[(t()(),o._18(0,null,null,2,"div",[["class","toolbar-title"]],null,null,null,null,null)),o._20(278528,null,0,s.m,[o.t,o.u,o.H,o.I],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o._27(null,0)],function(t,n){t(n,1,0,"toolbar-title","toolbar-title-"+n.component._mode)},null)}function l(t){return o._17(0,[(t()(),o._18(0,null,null,1,"ion-title",[],null,null,null,i,_)),o._20(49152,null,0,r.a,[a.c,o.H,o.I,[2,u.a],[2,c.a]],null,null)],null,null)}var o=e(0),s=e(16),r=e(113),a=e(1),u=e(52),c=e(42);e.d(n,"b",function(){return _}),n.a=i;var h=[],_=o._16({encapsulation:2,styles:h,data:{}});o._26("ion-title",r.a,l,{color:"color",mode:"mode"},{},["*"])},308:function(t,n,e){"use strict";function i(t){return r._17(0,[(t()(),r._18(0,null,null,2,"ion-label",[],null,null,null,null,null)),r._20(16384,[[1,4]],0,a.a,[u.c,r.H,r.I,[8,null],[8,null],[8,null],[8,null]],null,null),r._27(null,2)],null,null)}function l(t){return r._17(0,[(t()(),r._18(0,null,null,1,"ion-reorder",[],null,[[null,"click"]],function(t,n,e){var i=!0;if("click"===n){i=!1!==r._22(t,1).onClick(e)&&i}return i},c.a,c.b)),r._20(49152,null,0,h.a,[r.H],null,null)],null,null)}function o(t){return r._17(2,[r._21(671088640,1,{viewLabel:0}),r._27(null,0),(t()(),r._18(0,null,null,8,"div",[["class","item-inner"]],null,null,null,null,null)),(t()(),r._18(0,null,null,4,"div",[["class","input-wrapper"]],null,null,null,null,null)),r._27(null,1),(t()(),r._25(16777216,null,null,1,null,i)),r._20(16384,null,0,_.k,[r.L,r.N],{ngIf:[0,"ngIf"]},null),r._27(null,3),r._27(null,4),(t()(),r._25(16777216,null,null,1,null,l)),r._20(16384,null,0,_.k,[r.L,r.N],{ngIf:[0,"ngIf"]},null),(t()(),r._18(0,null,null,0,"div",[["class","button-effect"]],null,null,null,null,null))],function(t,n){var e=n.component;t(n,6,0,e._viewLabel),t(n,10,0,e._hasReorder)},null)}function s(t){return r._17(0,[(t()(),r._18(0,null,null,4,"ion-list-header",[["class","item"]],null,null,null,o,g)),r._20(1097728,null,3,p.a,[d.a,u.c,r.H,r.I,[2,m.a]],null,null),r._21(335544320,1,{contentLabel:0}),r._21(603979776,2,{_buttons:1}),r._21(603979776,3,{_icons:1})],null,null)}var r=e(0),a=e(73),u=e(1),c=e(309),h=e(306),_=e(16),p=e(41),d=e(26),m=e(69);e.d(n,"b",function(){return g}),n.a=o;var f=[],g=r._16({encapsulation:2,styles:f,data:{}});r._26("ion-list-header,ion-item,[ion-item],ion-item-divider",p.a,s,{color:"color",mode:"mode"},{},["[item-start],[item-left],ion-checkbox:not([item-end]):not([item-right])","ion-label","*","ion-select,ion-input,ion-textarea,ion-datetime,ion-range,[item-content]","[item-end],[item-right],ion-radio,ion-toggle"])},309:function(t,n,e){"use strict";function i(t){return o._17(0,[(t()(),o._18(0,null,null,1,"ion-icon",[["name","reorder"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._20(147456,null,0,s.a,[r.c,o.H,o.I],{name:[0,"name"]},null)],function(t,n){t(n,1,0,"reorder")},function(t,n){t(n,0,0,o._22(n,1)._hidden)})}function l(t){return o._17(0,[(t()(),o._18(0,null,null,1,"ion-reorder",[],null,[[null,"click"]],function(t,n,e){var i=!0;if("click"===n){i=!1!==o._22(t,1).onClick(e)&&i}return i},i,c)),o._20(49152,null,0,a.a,[o.H],null,null)],null,null)}var o=e(0),s=e(51),r=e(1),a=e(306);e.d(n,"b",function(){return c}),n.a=i;var u=[],c=o._16({encapsulation:2,styles:u,data:{}});o._26("ion-reorder",a.a,l,{},{},[])},310:function(t,n,e){"use strict";function i(t){return o._17(2,[(t()(),o._18(0,null,null,1,"ion-icon",[["class","fab-close-icon"],["name","close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._20(147456,null,0,s.a,[r.c,o.H,o.I],{name:[0,"name"]},null),(t()(),o._18(0,null,null,1,"span",[["class","button-inner"]],null,null,null,null,null)),o._27(null,0),(t()(),o._18(0,null,null,0,"div",[["class","button-effect"]],null,null,null,null,null))],function(t,n){t(n,1,0,"close")},function(t,n){t(n,0,0,o._22(n,1)._hidden)})}function l(t){return o._17(0,[(t()(),o._18(0,null,null,1,"div",[["ion-fab",""]],null,null,null,i,c)),o._20(49152,null,0,a.a,[r.c,o.H,o.I],null,null)],null,null)}var o=e(0),s=e(51),r=e(1),a=e(118);e.d(n,"b",function(){return c}),n.a=i;var u=[],c=o._16({encapsulation:2,styles:u,data:{}});o._26("[ion-fab]",a.a,l,{color:"color",mode:"mode"},{},["*"])},311:function(t,n,e){"use strict";function i(t){return o._17(0,[o._27(null,0),(t()(),o._18(0,null,null,0,"div",[["class","button-effect"]],null,null,null,null,null))],null,null)}function l(t){return o._17(0,[(t()(),o._18(0,null,null,1,"ion-segment-button",[["class","segment-button"],["role","button"],["tappable",""]],[[2,"segment-button-disabled",null],[2,"segment-activated",null],[1,"aria-pressed",0]],[[null,"click"]],function(t,n,e){var i=!0;if("click"===n){i=!1!==o._22(t,1).onClick()&&i}return i},i,a)),o._20(114688,null,0,s.a,[],null,null)],function(t,n){t(n,1,0)},function(t,n){t(n,0,0,o._22(n,1)._disabled,o._22(n,1).isActive,o._22(n,1).isActive)})}var o=e(0),s=e(75);e.d(n,"b",function(){return a}),n.a=i;var r=[],a=o._16({encapsulation:2,styles:r,data:{}});o._26("ion-segment-button",s.a,l,{value:"value",disabled:"disabled"},{ionSelect:"ionSelect"},["*"])},317:function(t,n,e){"use strict";e(0),e(110),e(53),e(120),e(31),e(114);e.d(n,"a",function(){return i});var i=(this&&this.__decorate,this&&this.__metadata,function(){function t(t,n,e,i,l,o,s,r,a,u){this.navCtrl=t,this.navParams=n,this.viewCtrl=e,this.actionSheetCtrl=i,this.alertCtrl=l,this.loadingCtrl=o,this.statusBar=s,this.chatService=r,this.userService=a,this.imageService=u,this.message={text:"",id:null,senderId:null,createdAt:null},this.memberMap={},this.fileMap={},this.memberMap[this.userService.currentUser.userId]={firstName:this.userService.currentUser.firstName,photoURL:this.userService.currentUser.photoURL,loading:!1},this.navParams.get("project")&&(this.project=this.navParams.get("project"),console.log("found project for chat:"),console.log(this.project),this.chatService.join(this.project.projectId),this.fetchMessages(),this.observeMessages())}return t.prototype.ionViewWillLoad=function(){},t.prototype.ionViewWillLeave=function(){this.project&&this.chatService.leave(this.project.projectId)},t.prototype.fetchMessages=function(){var t=this;this.chatService.fetchMessages().then(function(n){if(console.log("chat component received messages:"),console.log(n),n){var e=[];for(var i in n[0])if(n[0].hasOwnProperty(i)&&"_id"!=i){var l=n[0][i];t.memberMap[l.senderId]||t.addMemberData(l.senderId),l.createdAt&&(l.createdAtReadable=t.getTimeStringFrom(l.createdAt)),l.fileEntryId&&t.fetchImage(l.fileEntryId),e.push(l)}e.sort(function(t,n){return t.createdAt-n.createdAt}),t.messages=e,setTimeout(function(){t.scrollToBottom()},500)}else t.messages=null})},t.prototype.fetchImage=function(t){var n=this;this.imageService.getFileEntry(t).then(function(e){console.log("chat component received file:"),console.log(e),e.exception||(n.fileMap[t]=e)})},t.prototype.observeMessages=function(){var t=this,n=this;this.chatService.observeMessages(function(e){console.log("chat component received message:"),console.log(e),n.memberMap[e.senderId]||n.addMemberData(e.senderId),e.createdAt&&(e.createdAtReadable=t.getTimeStringFrom(e.createdAt)),e.fileEntryId&&n.fetchImage(e.fileEntryId),t.messages.push(e),t.scrollToBottom()})},t.prototype.addMemberData=function(t){var n=this;this.userService.headers;this.memberMap[t]||(n.memberMap[t]={loading:!0},n.userService.fetchUser(t).then(function(e){!e.exception&&e.portraitId?e.file?n.memberMap[t]={firstName:e.firstName,photoURL:n.imageService.createFileUrl(e.file),loading:!1}:n.imageService.imageForUser(e).then(function(i){i?n.memberMap[t]={firstName:e.firstName,photoURL:i,loading:!1}:(console.log("No image found"),n.memberMap[t]=null)}):(console.log("Got back object instead of valid user:"),console.log(e),n.memberMap[t]=null)}))},t.prototype.scrollToBottom=function(){console.log("Scrolling to bottom!");this.content.getContentDimensions();this.content.getContentDimensions()?this.content.scrollToBottom(300):console.log("Content not loaded")},t.prototype.dismiss=function(){this.viewCtrl.dismiss()},t.prototype.send=function(){var t=this,n=this;if(""!==this.message.text.replace(/^\s+/,"").replace(/\s+$/,"")){var e={message:{text:n.message.text,id:this.message.id?this.message.id:Math.ceil(1e3*Math.random()),senderId:this.userService.currentUser.userId,createdAt:(new Date).getTime()},room:this.project.projectId};this.chatService.send(e,function(e){n.message={text:"",id:null,senderId:t.userService.currentUser.userId,createdAt:null}})}},t.prototype.fileChanged=function(t){var n=this,e=this;console.log("file changed:"),console.log(t.target.files[0]),this.imageService.uploadFile(t.target.files[0],this.project).then(function(t){if(console.log("chat component received data:"),console.log(t),!t.exception){var i={message:{fileEntryId:t.fileEntryId,id:n.message.id?n.message.id:Math.ceil(1e3*Math.random()),senderId:n.userService.currentUser.userId,createdAt:(new Date).getTime()},room:n.project.projectId};n.chatService.send(i,function(t){e.message={text:"",id:null,senderId:n.userService.currentUser.userId,createdAt:null}})}})},t.prototype.getTimeStringFrom=function(t){var n=new Date(t);n.setDate(n.getDate());var e=n.toString(),i=e.split(" "),l=this.tConvert(i[4]),o=new Date,s=Math.floor((o.getTime()-n.getTime())/1e3),r=Math.floor(s/31536e3);if(r>1)return r+" years ago";if(1==r)return r+" year ago";if((r=Math.floor(s/2592e3))>1)return r+" months ago";if(1==r)return r+" month ago";if((r=Math.floor(s/86400))>=1){if(r<5){var a=new Date(o);a.setDate(a.getDate()-r);var e=a.toString(),i=e.split(" "),u=i[0],l=this.tConvert(i[4]);return u+" "+l}return r+" days ago"}return r=Math.floor(s/3600),l},t.prototype.tConvert=function(t){return t=t.toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/)||[t],t.length>1&&(t=t.slice(1),t[3]=+t[0]<12?" AM":" PM",t[0]=+t[0]%12||12),t.join("")},t}())},318:function(t,n,e){"use strict";var i=(e(0),e(110),e(365));e.n(i),e(31),e(117),e(114);e.d(n,"a",function(){return l});var l=(this&&this.__decorate,this&&this.__metadata,function(){function t(t,n,e,i,l,o,s,r,a){this.navCtrl=t,this.navParams=n,this.userService=e,this.projectService=i,this.imageService=l,this.alertCtrl=o,this.popoverCtrl=s,this.modalCtrl=r,this.platform=a,this.false=!1,this.minimized=!1,this.maximized=!1,this.types={BEDROOM:"Bedroom",LIVING_ROOM:"Living Room",MULTIPURPOSE_ROOM:"Multipurpose Room",STUDIO:"Studio",DINING_ROOM:"Dining Room",HOME_OFFICE:"Office"},this.loading=!0,this.view="APPROVE_CONCEPT",this.viewMode="CLIENT",this.itemsViewMode="PENDING",this.markers={},this.alternateItemsMap={},this.pendingItemsMap={},this.modifiedItemsMap={},this.approvedItemsMap={},this.pendingCollectionTotal=0,this.modifiedCollectionTotal=0,this.approvedCollectionTotal=0;var u=this;this.userService.fetchCurrentUser().then(function(t){t?(u.user=t,u.user.designer&&(console.log("current user is a designer"),u.viewMode="DESIGNER"),u.user.admin&&(console.log("current user is an admin"),u.viewMode="DESIGNER"),u.fetchProject()):u.navCtrl.setRoot("login")})}return t.prototype.fetchProject=function(){var t=this;if(console.log("fetching project"),this.navParams.get("project"))t.project=t.navParams.get("project"),t.project.endDateReadable=t.getDaysLeftStringFrom(t.project.endDate),"FINAL_DELIVERY"!=t.project.projectStatus&&"SHOPPING_CART"!=t.project.projectStatus&&"ESTIMATE_SHIPPING_AND_TAX"!=t.project.projectStatus&&"ARCHIVED"!=t.project.projectStatus||(t.itemsViewMode="APPROVED"),t.fetchDetails(),t.fetchItems();else if(this.navParams.get("id")){var n=t.navParams.get("id");t.projectService.findByProjectId(n).then(function(n){n.exception||(t.project=n,t.project.endDateReadable=t.getDaysLeftStringFrom(t.project.endDate),"FINAL_DELIVERY"!=t.project.projectStatus&&"SHOPPING_CART"!=t.project.projectStatus&&"ESTIMATE_SHIPPING_AND_TAX"!=t.project.projectStatus&&"ARCHIVED"!=t.project.projectStatus||(t.itemsViewMode="APPROVED"),t.fetchDetails(),t.fetchItems())})}},t.prototype.fetchDetails=function(){var t=this;Promise.all([this.projectService.fetchProjectDetail(this.project.projectId,"CONCEPT"),this.projectService.fetchProjectDetail(this.project.projectId,"FLOOR_PLAN")]).then(function(n){if(console.log("design page received concepts and floorplan:"),console.log(n),!n.exception){var e=[];for(var i in n[0]){var l=n[0][i];l.url=t.imageService.createFileUrl(l.file),l&&"APPROVED"==l.projectDetailStatus&&(console.log("concept was approved:"),console.log(l),t.conceptboard=l,t.view="APPROVE_FLOOR_PLAN"),e.push(l)}e.length>0&&(t.concepts=e,t.selectedConcept=e[0]);var o=[];for(var i in n[1]){var l=n[1][i];l.url=t.imageService.createFileUrl(l.file),o.push(l)}o.length>0&&(t.floorplan=o[0]),e.length>0&&o.length>0&&(t.view="FLOOR_PLAN")}t.loading=!1})},t.prototype.fetchItems=function(){var t=this;this.projectService.fetchItems(this.project).then(function(n){if(console.log("design page received item data:"),console.log(n),!n.exception&&Array(n).length>0){var e=[],i=[],l=[],o=0,s=0,r=0;for(var a in n){var u=n[a];0!=u.parentProjectItemId?(t.alternateItemsMap[u.parentProjectItemId]||(t.alternateItemsMap[u.parentProjectItemId]=[]),t.alternateItemsMap[u.parentProjectItemId].push(u)):"REQUEST_ALTERNATIVES"==t.project.projectStatus||"ALTERNATIVES_READY"==t.project.projectStatus?"PENDING"==u.projectItemStatus||"SUBMITTED"==u.projectItemStatus?(i.push(u),s+=u.itemPrice,t.imageService.getFileEntry(u.fileEntryId).then(function(n){n.exception||(t.modifiedItemsMap[n.fileEntryId]=n)})):"APPROVED"==u.projectItemStatus?(l.push(u),r+=u.itemPrice,t.imageService.getFileEntry(u.fileEntryId).then(function(n){n.exception||(t.approvedItemsMap[n.fileEntryId]=n)})):(e.push(u),o+=u.itemPrice,t.imageService.getFileEntry(u.fileEntryId).then(function(n){n.exception||(t.pendingItemsMap[n.fileEntryId]=n)})):"APPROVED"==u.projectItemStatus?(l.push(u),r+=u.itemPrice,t.imageService.getFileEntry(u.fileEntryId).then(function(n){n.exception||(t.pendingItemsMap[n.fileEntryId]=n)})):(e.push(u),o+=u.itemPrice,t.imageService.getFileEntry(u.fileEntryId).then(function(n){n.exception||(t.pendingItemsMap[n.fileEntryId]=n)}))}e.length>0?t.pendingItems=e:t.pendingItems=null,i.length>0?t.modifiedItems=i:t.modifiedItems=null,l.length>0?t.approvedItems=l:t.approvedItems=null,t.pendingCollectionTotal=o,t.modifiedCollectionTotal=s,t.approvedCollectionTotal=r,t.drawFloorplan()}})},t.prototype.getDaysLeftStringFrom=function(t){if(t){var n=new Date(t);n.setDate(n.getDate());var e=new Date,i=Math.floor((e.getTime()-n.getTime())/1e3),l=Math.floor(i/86400),o=Math.abs(l);return l<0&&1==o?"1 day left":l<=0&&o>=0&&o<15?o+" days left":""}return""},t.prototype.drawFloorplan=function(){var t=this;console.log("drawing floorplan with marker map in 2 seconds");var n=this;n.loading=!0,this.floorplanMap&&this.floorplanMap.remove(),"FLOOR_PLAN"==n.view&&setTimeout(function(){t.floorplanMap=i.map("floorplan-map",{attributionControl:!1,scrollWheelZoom:!1,minZoom:1,maxZoom:4,center:[0,0],zoom:1,crs:i.CRS.Simple});var e=t.floorplanMap.getSize().x,l=t.floorplanMap.getSize().y,o=n.floorplan.url;console.log("map dimensions:"),console.log(e),console.log(l);var s=t.floorplanMap.unproject([0,l],t.floorplanMap.getMaxZoom()-1),r=t.floorplanMap.unproject([e,0],t.floorplanMap.getMaxZoom()-1),a=new i.LatLngBounds(s,r);i.imageOverlay(o,a).addTo(t.floorplanMap),t.floorplanMap.fitBounds(a),"PENDING"==n.itemsViewMode&&n.pendingItems?n.createMarkers(n.pendingItems,e,l):"MODIFIED"==n.itemsViewMode&&n.modifiedItems?n.createMarkers(n.modifiedItems,e,l):n.approvedItems&&n.createMarkers(n.approvedItems,e,l),t.floorplanMap.on("dblclick",function(t){if(console.log(t),"DESIGNER"==n.viewMode){var o=i.divIcon({className:"number-icon",iconSize:[30,30],iconAnchor:[15,30],popupAnchor:[0,-30],html:"*"}),s=new i.Marker(t.latlng,{icon:o});s.addTo(n.floorplanMap);var r=n.popoverCtrl.create("edit-item");r.onDidDismiss(function(i){console.log(i),i?(i.YCoordinate=t.latlng.lat/-l*8,i.XCoordinate=t.latlng.lng/e*8,n.projectService.addItem(n.project,i).then(function(t){t.exception||n.fetchItems()})):s.remove()}),r.present()}}),n.loading=!1},2e3)},t.prototype.createMarkers=function(t,n,e){var l=this,o=0;for(var s in t){var r=t[s];if(r.YCoordinate&&r.XCoordinate){o+=1;var a=new i.LatLng(r.YCoordinate*-e/8,r.XCoordinate*n/8);console.log("adding marker at coordinates:"),console.log(a);var u=i.divIcon({className:"number-icon",iconSize:[30,30],iconAnchor:[15,30],popupAnchor:[0,-30],html:String(o)});l.markers[r.projectItemId]=new i.Marker(a,{draggable:!0,icon:u}),l.markers[r.projectItemId].addTo(this.floorplanMap).bindPopup(this.createPopup(r))}}},t.prototype.createPopup=function(t){var n="";return"PENDING"==this.itemsViewMode&&this.pendingItemsMap[t.fileEntryId]&&(n+="<img style='width:150px;height:150px;object-fit:cover;' src='"+this.pendingItemsMap[t.fileEntryId]+"'>"),"MODIFIED"==this.itemsViewMode&&this.modifiedItemsMap[t.fileEntryId]&&(n+="<img style='width:150px;height:150px;object-fit:cover;' src='"+this.modifiedItemsMap[t.fileEntryId]+"'>"),"APPROVED"==this.itemsViewMode&&this.approvedItemsMap[t.fileEntryId]&&(n+="<img style='width:150px;height:150px;object-fit:cover;' src='"+this.approvedItemsMap[t.fileEntryId]+"'>"),t.itemMake&&(n+="<h3>"+t.itemMake+"</h3>"),t.itemType&&(n+="<p>"+t.itemType+"</p>"),t.itemPrice&&(n+="<h4>$"+t.itemPrice/100+"</h4>"),""==n&&(n+="<h3>No item info.</h3>"),n},t.prototype.editMarkerLocations=function(){console.log("edit marker location activated");var t=this;if("PENDING"==t.itemsViewMode)for(var n in this.pendingItems){var e=this.pendingItems[n];console.log(n),console.log(e),t.markers[e.projectItemId].on("drag",function(t){console.log("moving marker");var n=t.target,e=n.getLatLng();console.log(e)})}else for(var n in this.approvedItems){var e=this.approvedItems[n];console.log(n),console.log(e),t.markers[e.projectItemId].on("drag",function(t){console.log("moving marker");var n=t.target,e=n.getLatLng();console.log(e)})}},t.prototype.homePressed=function(){console.log("logo pressed"),this.navCtrl.setRoot("dashboard")},t.prototype.selectTab=function(){var t=this,n=this;console.log("toggling tab dropdown");var e=this.popoverCtrl.create("dropdown",{items:["DETAILS","DESIGN","FINAL DELIVERY"]},{cssClass:"tab-popover"});e.onDidDismiss(function(e){if(e){var i;"DETAILS"==e&&(i="details"),"FINAL DELIVERY"==e&&(i="final-delivery"),i&&t.navCtrl.setRoot(i,{project:n.project,id:n.project.projectId})}}),e.present()},t.prototype.selectTabLink=function(t){var n=this;console.log("selected tab link:"),console.log(t);var e;"DETAILS"==t&&(e="details"),"FINAL_DELIVERY"==t&&(e="final-delivery"),e&&this.navCtrl.setRoot(e,{project:n.project,id:n.project.projectId})},t.prototype.maximizeChat=function(){console.log("chat fab pressed for project"),this.maximized=!this.maximized},t.prototype.chatToggled=function(){console.log("chat toggled"),this.minimized=!this.minimized,this.maximized&&(this.maximized=!this.maximized),this.drawFloorplan()},t.prototype.selectFloorplan=function(){console.log("selected switcher floorplan link"),"FLOOR_PLAN"!=this.view&&(this.view="FLOOR_PLAN",this.drawFloorplan())},t.prototype.selectConceptboard=function(){console.log("selected switcher conceptboard link"),this.view="CONCEPT_BOARD"},t.prototype.submitConcepts=function(){var t=this,n=this;console.log("submit concepts pressed");var e=this.modalCtrl.create("confirm",{message:"By selecting the confimation below, the concept boards will be submitted to your client."});e.onDidDismiss(function(e){if(console.log(e),e){var i=0;for(var l in t.concepts){var o=t.concepts[l];t.projectService.updateDetailStatus(o,"SUBMITTED").then(function(e){console.log(e),(i+=1)==n.concepts.length&&t.projectService.updateStatus(n.project,"CONCEPT").then(function(t){t.exception||n.fetchProject()})})}}}),e.present()},t.prototype.approveConcept=function(){var t=this,n=this;console.log("approve concepts pressed");var e=this.modalCtrl.create("confirm",{message:"By selecting the confirmation below, you are approving a concept board."});e.onDidDismiss(function(e){if(console.log(e),e){var i=0;for(var l in t.concepts){var o=t.concepts[l];t.projectService.updateDetailStatus(o,"APPROVED").then(function(t){console.log(t),(i+=1)==n.concepts.length&&(t.exception||n.fetchProject())})}}}),e.present()},t.prototype.itemViewSwitched=function(){console.log("item view switched"),this.drawFloorplan()},t.prototype.fileChanged=function(t){var n=this;console.log("file changed:"),console.log(t.target.files[0]);var e=t.target.files[0];"APPROVE_CONCEPT"==this.view&&this.projectService.addDetail(this.project,e,"CONCEPT","PENDING").then(function(t){console.log(t),t.exception||n.fetchDetails()}),
"APPROVE_FLOOR_PLAN"==this.view&&this.projectService.addDetail(this.project,e,"FLOOR_PLAN","PENDING").then(function(t){console.log(t),t.exception||n.fetchDetails()})},t.prototype.editItem=function(t,n){var e=this;console.log("edit item pressed:"),console.log(t),t.number=n+1;var i=e.popoverCtrl.create("edit-item",{item:t});i.onDidDismiss(function(t){console.log(t),t&&e.projectService.updateItem(e.project,t,"PENDING").then(function(t){t.exception||e.fetchItems()})}),i.present()},t.prototype.submitCollection=function(){var t=this,n=this;console.log("submit collection pressed");var e=this.modalCtrl.create("confirm",{message:"By selecting the confimation below, the collection, floor plan and concept board will be submitted to your client."});e.onDidDismiss(function(e){if(console.log(e),e){var i="";"CONCEPTS"==n.project.projectStatus&&(i="FLOOR_PLAN"),"FLOOR_PLAN"==n.project.projectStatus&&(i="ALTERNATIVES_READY"),"REQUEST_ALTERNATIVES"==n.project.projectStatus&&(i="ALTERNATIVES_READY"),3==n.project.revisionCount&&(i="FINAL_DELIVERY"),t.projectService.updateRevisionCount(n.project,i).then(function(t){console.log(t),t.exception||n.fetchProject()})}}),e.present()},t.prototype.approveCollection=function(){var t=this,n=this;console.log("approve collection pressed");var e=this.modalCtrl.create("confirm",{message:"By selecting the button below, you are approving the collection and requesting alternates from your designer."});e.onDidDismiss(function(e){console.log(e),e&&t.projectService.updateStatus(n.project,"REQUEST_ALTERNATIVES").then(function(t){console.log(t),t.exception||n.fetchProject()})}),e.present()},t.prototype.offerAlternative=function(t,n){var e=this;console.log("offer alt item pressed:"),console.log(t),t.number=n+1;var i=e.modalCtrl.create("alternatives",{item:t,alts:e.alternateItemsMap[t.projectItemId]});i.onDidDismiss(function(n){if(console.log(n),n){var i=n[0],l=n[1],o=0;for(var s in i){var r=i[s],a=l[s];r.projectItemId?(r.file=a,e.projectService.updateItem(e.project,r,"ALTERNATE").then(function(t){++o==i.length&&e.fetchItems()})):e.projectService.addAlternative(e.project,r,a,t).then(function(t){++o==i.length&&e.fetchItems()})}}}),i.present()},t.prototype.viewAlternatives=function(t,n){var e=this;console.log("view alternatives pressed:"),console.log(t),t.number=n+1;var i=e.modalCtrl.create("alternatives",{item:t,alts:e.alternateItemsMap[t.projectItemId]});i.onDidDismiss(function(t){console.log(t)}),i.present()},t.prototype.requestAlternative=function(t){var n=this;console.log("request alternative pressed"),this.projectService.updateItemStatus(t,"REQUEST_ALTERNATIVE").then(function(t){t.exception||n.fetchItems()})},t.prototype.undoAlternative=function(t){var n=this;console.log("undo alternative pressed"),this.projectService.updateItemStatus(t,"SUBMITTED").then(function(t){t.exception||n.fetchItems()})},t}())},341:function(t,n,e){"use strict";function i(t){return f._17(0,[(t()(),f._18(0,null,null,2,"ion-title",[["class","title"]],null,null,null,g.a,g.b)),f._20(49152,null,0,v.a,[y.c,f.H,f.I,[2,b.a],[2,I.a]],null,null),(t()(),f._19(0,["\n            ","\n        "]))],null,function(t,n){t(n,2,0,n.component.user.firstName)})}function l(t){return f._17(0,[(t()(),f._18(0,null,null,2,"ion-title",[["class","title"]],null,null,null,g.a,g.b)),f._20(49152,null,0,v.a,[y.c,f.H,f.I,[2,b.a],[2,I.a]],null,null),(t()(),f._19(0,["\n            Chat\n        "]))],null,null)}function o(t){return f._17(0,[(t()(),f._18(0,null,null,1,"p",[["class","alert-text"]],null,null,null,null,null)),(t()(),f._19(null,["Hello and welcome to your personal design studio! As soon as you submit your final details, we will connect you with your designer so that you two can chat. The 10 day design period begins once you recieve your initial concept boards. Thank you!"]))],null,null)}function s(t){return f._17(0,[(t()(),f._18(0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(t,n){t(n,0,0,n.component.memberMap[n.parent.context.$implicit.senderId].photoURL)})}function r(t){return f._17(0,[(t()(),f._18(0,null,null,0,"img",[["src","assets/tmh.png"]],null,null,null,null,null))],null,null)}function a(t){return f._17(0,[(t()(),f._18(0,null,null,1,"h4",[],null,null,null,null,null)),(t()(),f._19(null,["",""]))],null,function(t,n){t(n,1,0,n.component.memberMap[n.parent.context.$implicit.senderId].firstName)})}function u(t){return f._17(0,[(t()(),f._18(0,null,null,1,"h4",[],null,null,null,null,null)),(t()(),f._19(null,["TMH BOT"]))],null,null)}function c(t){return f._17(0,[(t()(),f._18(0,null,null,1,"p",[],null,null,null,null,null)),(t()(),f._19(null,["",""]))],null,function(t,n){t(n,1,0,n.parent.context.$implicit.createdAtReadable)})}function h(t){return f._17(0,[(t()(),f._18(0,null,null,4,"div",[["class","message-bubble"]],null,null,null,null,null)),(t()(),f._19(null,["\n                "])),(t()(),f._18(0,null,null,1,"div",[["class","message"]],null,null,null,null,null)),(t()(),f._19(null,["",""])),(t()(),f._19(null,["\n            "]))],null,function(t,n){t(n,3,0,n.parent.context.$implicit.text)})}function _(t){return f._17(0,[(t()(),f._18(0,null,null,7,"div",[["class","img-bubble"]],null,null,null,null,null)),(t()(),f._19(null,["\n                "])),(t()(),f._18(0,null,null,4,"a",[["target","_blank"]],[[8,"href",4]],null,null,null,null)),(t()(),f._19(null,[" "])),(t()(),f._19(null,["\n                    "])),(t()(),f._18(0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(t()(),f._19(null,["\n                "])),(t()(),f._19(null,["\n            "]))],null,function(t,n){var e=n.component;t(n,2,0,f._24(1,"",e.fileMap[n.parent.context.$implicit.fileEntryId].url,"")),t(n,5,0,f._24(1,"",e.fileMap[n.parent.context.$implicit.fileEntryId].url,""))})}function p(t){return f._17(0,[(t()(),f._18(0,null,null,30,"ion-item",[["class","item item-block"]],null,null,null,L.a,L.b)),f._20(1097728,null,3,E.a,[P.a,y.c,f.H,f.I,[2,T.a]],null,null),f._21(335544320,3,{contentLabel:0}),f._21(603979776,4,{_buttons:1}),f._21(603979776,5,{_icons:1}),f._20(16384,null,0,x.a,[],null,null),(t()(),f._19(2,["\n            "])),(t()(),f._18(0,null,2,16,"div",[["class","message-header"]],null,null,null,null,null)),(t()(),f._19(null,["\n                "])),(t()(),f._25(16777216,null,null,1,null,s)),f._20(16384,null,0,w.k,[f.L,f.N],{ngIf:[0,"ngIf"]},null),(t()(),f._19(null,["\n                "])),(t()(),f._25(16777216,null,null,1,null,r)),f._20(16384,null,0,w.k,[f.L,f.N],{ngIf:[0,"ngIf"]},null),(t()(),f._19(null,["\n                "])),(t()(),f._25(16777216,null,null,1,null,a)),f._20(16384,null,0,w.k,[f.L,f.N],{ngIf:[0,"ngIf"]},null),(t()(),f._19(null,["\n                "])),(t()(),f._25(16777216,null,null,1,null,u)),f._20(16384,null,0,w.k,[f.L,f.N],{ngIf:[0,"ngIf"]},null),(t()(),f._19(null,["\n                "])),(t()(),f._25(16777216,null,null,1,null,c)),f._20(16384,null,0,w.k,[f.L,f.N],{ngIf:[0,"ngIf"]},null),(t()(),f._19(null,["\n            "])),(t()(),f._19(2,["\n            "])),(t()(),f._25(16777216,null,2,1,null,h)),f._20(16384,null,0,w.k,[f.L,f.N],{ngIf:[0,"ngIf"]},null),(t()(),f._19(2,["\n            "])),(t()(),f._25(16777216,null,2,1,null,_)),f._20(16384,null,0,w.k,[f.L,f.N],{ngIf:[0,"ngIf"]},null),(t()(),f._19(2,["\n        "]))],function(t,n){var e=n.component;t(n,10,0,e.memberMap[n.context.$implicit.senderId]),t(n,13,0,!e.memberMap[n.context.$implicit.senderId]),t(n,16,0,e.memberMap[n.context.$implicit.senderId]),t(n,19,0,!e.memberMap[n.context.$implicit.senderId]),t(n,22,0,n.context.$implicit.createdAtReadable),t(n,26,0,n.context.$implicit.text),t(n,29,0,e.fileMap[n.context.$implicit.fileEntryId])},null)}function d(t){return f._17(0,[f._21(402653184,1,{content:0}),(t()(),f._19(null,["\n"])),(t()(),f._18(0,null,null,25,"ion-header",[],null,null,null,null,null)),f._20(16384,null,0,D.a,[y.c,f.H,f.I,[2,S.a]],null,null),(t()(),f._19(null,["\n    "])),(t()(),f._18(0,null,null,21,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,C.a,C.b)),f._20(49152,null,0,I.a,[M.a,[2,S.a],[2,k.a],y.c,f.H,f.I],null,null),(t()(),f._19(3,["\n        "])),(t()(),f._18(0,null,3,0,"img",[["src","assets/chat.png"]],null,null,null,null,null)),(t()(),f._19(3,["\n        "])),(t()(),f._25(16777216,null,3,1,null,i)),f._20(16384,null,0,w.k,[f.L,f.N],{ngIf:[0,"ngIf"]},null),(t()(),f._19(3,["\n        "])),(t()(),f._25(16777216,null,3,1,null,l)),f._20(16384,null,0,w.k,[f.L,f.N],{ngIf:[0,"ngIf"]},null),(t()(),f._19(3,["\n        "])),(t()(),f._18(0,null,2,9,"ion-buttons",[["end",""]],null,null,null,null,null)),f._20(16384,null,1,A.a,[y.c,f.H,f.I,[2,b.a],[2,I.a]],null,null),f._21(603979776,2,{_buttons:1}),(t()(),f._19(null,["\n            "])),(t()(),f._18(0,null,null,4,"button",[["class","exit"],["ion-fab",""]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.dismiss()&&i}return i},O.a,O.b)),f._20(49152,null,0,R.a,[y.c,f.H,f.I],null,null),(t()(),f._19(0,["\n                "])),(t()(),f._18(0,null,0,0,"img",[["src","assets/exit.png"]],null,null,null,null,null)),(t()(),f._19(0,["\n            "])),(t()(),f._19(null,["\n        "])),(t()(),f._19(3,["\n    "])),(t()(),f._19(null,["\n"])),(t()(),f._19(null,["\n\n"])),(t()(),f._18(0,null,null,12,"ion-content",[],[[2,"statusbar-padding",null]],null,null,U.a,U.b)),f._20(4374528,[[1,4]],0,B.a,[y.c,j.b,z.a,f.H,f.I,M.a,Z.a,f.g,[2,S.a],[2,k.a]],null,null),(t()(),f._19(1,["\n    "])),(t()(),f._25(16777216,null,1,1,null,o)),f._20(16384,null,0,w.k,[f.L,f.N],{ngIf:[0,"ngIf"]},null),(t()(),f._19(1,["\n    "])),(t()(),f._18(0,null,1,5,"ion-list",[["no-lines",""]],null,null,null,null,null)),f._20(16384,null,0,V.a,[y.c,f.H,f.I,j.b,F.a,z.a],null,null),(t()(),f._19(null,["\n        "])),(t()(),f._25(16777216,null,null,1,null,p)),f._20(802816,null,0,w.l,[f.L,f.N,f.t],{ngForOf:[0,"ngForOf"]},null),(t()(),f._19(null,["\n    "])),(t()(),f._19(1,["\n"])),(t()(),f._19(null,["\n"])),(t()(),f._18(0,null,null,30,"ion-footer",[["class","chat-footer"]],null,null,null,null,null)),f._20(16384,null,0,H.a,[y.c,f.H,f.I,[2,S.a]],null,null),(t()(),f._19(null,["\n  "])),(t()(),f._18(0,null,null,26,"form",[["name","chat-form"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(t,n,e){var i=!0;if("submit"===n){i=!1!==f._22(t,48).onSubmit(e)&&i}if("reset"===n){i=!1!==f._22(t,48).onReset()&&i}return i},null,null)),f._20(16384,null,0,G.o,[],null,null),f._20(16384,null,0,G.p,[[8,null],[8,null]],null,null),f._23(2048,null,G.n,null,[G.p]),f._20(16384,null,0,G.q,[G.n],null,null),(t()(),f._19(null,["\n    "])),(t()(),f._18(0,[["file",1]],null,0,"input",[["accept","image/*"],["style","visibility:hidden"],["type","file"]],null,[[null,"change"]],function(t,n,e){var i=!0,l=t.component;if("change"===n){i=!1!==l.fileChanged(e)&&i}return i},null,null)),(t()(),f._19(null,["\n    "])),(t()(),f._18(0,null,null,4,"button",[["class","attach"],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0;if("click"===n){i=!1!==f._22(t,52).click()&&i}return i},null,null)),(t()(),f._19(null,[" "])),(t()(),f._19(null,["\n        "])),(t()(),f._18(0,null,null,0,"img",[["src","assets/attach.png"]],null,null,null,null,null)),(t()(),f._19(null,["\n    "])),(t()(),f._19(null,["\n    "])),(t()(),f._18(0,null,null,7,"div",[["class","chat-message"]],null,null,null,null,null)),(t()(),f._19(null,["\n        "])),(t()(),f._18(0,null,null,4,"ion-textarea",[["autocorrect","on"],["name","chat-message"],["placeholder","Enter a message"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(t,n,e){var i=!0,l=t.component;if("ngModelChange"===n){i=!1!==(l.message.text=e)&&i}return i},W.a,W.b)),f._20(671744,null,0,G.g,[[2,G.n],[8,null],[8,null],[8,null]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),f._23(2048,null,G.h,null,[G.g]),f._20(16384,null,0,G.i,[G.h],null,null),f._20(2342912,null,0,$.a,[y.c,j.b,P.a,M.a,f.H,f.I,[2,B.a],[2,E.a],[2,k.a],[2,G.h],z.a],{placeholder:[0,"placeholder"],type:[1,"type"]},null),(t()(),f._19(null,["\n    "])),(t()(),f._19(null,["\n    "])),(t()(),f._18(0,null,null,2,"button",[["class","send"],["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.send()&&i}return i},q.a,q.b)),f._20(1097728,null,0,Y.a,[[8,""],y.c,f.H,f.I],null,null),(t()(),f._19(0,["\n        SEND\n    "])),(t()(),f._19(null,["\n  "])),(t()(),f._19(null,["\n"]))],function(t,n){var e=n.component;t(n,11,0,e.user),t(n,14,0,!e.user),t(n,33,0,!e.messages||e.messages.length<1),t(n,39,0,e.messages);t(n,63,0,"chat-message",e.message.text);t(n,66,0,"Enter a message","text")},function(t,n){t(n,5,0,f._22(n,6)._hidden,f._22(n,6)._sbPadding),t(n,29,0,f._22(n,30).statusbarPadding),t(n,46,0,f._22(n,50).ngClassUntouched,f._22(n,50).ngClassTouched,f._22(n,50).ngClassPristine,f._22(n,50).ngClassDirty,f._22(n,50).ngClassValid,f._22(n,50).ngClassInvalid,f._22(n,50).ngClassPending),t(n,62,0,f._22(n,65).ngClassUntouched,f._22(n,65).ngClassTouched,f._22(n,65).ngClassPristine,f._22(n,65).ngClassDirty,f._22(n,65).ngClassValid,f._22(n,65).ngClassInvalid,f._22(n,65).ngClassPending)})}function m(t){return f._17(0,[(t()(),f._18(0,null,null,1,"page-chat",[],null,null,null,d,ot)),f._20(49152,null,0,N.a,[k.a,J.a,S.a,K.a,Q.a,X.a,tt.a,nt.a,et.a,it.a],null,null)],null,null)}var f=e(0),g=e(307),v=e(113),y=e(1),b=e(52),I=e(42),L=e(308),E=e(41),P=e(26),T=e(69),x=e(121),w=e(16),D=e(115),S=e(4),C=e(304),M=e(6),k=e(21),A=e(116),N=e(317),O=e(310),R=e(118),U=e(188),B=e(27),j=e(3),z=e(7),Z=e(14),V=e(123),F=e(5),H=e(128),G=e(25),W=e(305),$=e(111),q=e(50),Y=e(18),J=e(11),K=e(77),Q=e(70),X=e(78),tt=e(53),nt=e(120),et=e(31),it=e(114);e.d(n,"b",function(){return ot}),n.a=d;var lt=[],ot=f._16({encapsulation:2,styles:lt,data:{}});f._26("page-chat",N.a,m,{project:"project"},{},[])},342:function(t,n,e){"use strict";e(0),e(110),e(318),e(317);e.d(n,"a",function(){return i});var i=(this&&this.__decorate,function(){function t(){}return t}())},343:function(t,n,e){"use strict";function i(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,1,"span",[],null,null,null,null,null)),(t()(),Wt._19(null,["","'s "]))],null,function(t,n){t(n,1,0,n.component.project.client.firstName)})}function l(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,1,"span",[],null,null,null,null,null)),(t()(),Wt._19(null,[""," Project: "]))],null,function(t,n){var e=n.component;t(n,1,0,e.types[e.project.projectType])})}function o(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(t,n){t(n,0,0,n.component.user.photoURL)})}function s(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,0,"img",[["src","assets/user-placeholder.png"]],null,null,null,null,null))],null,null)}function r(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,1,"div",[["class","days-left"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n      ","\n    "]))],null,function(t,n){t(n,1,0,n.component.project.endDateReadable)})}function a(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,1,"ion-spinner",[["name","crescent"]],[[2,"spinner-paused",null]],null,null,$t.a,$t.b)),Wt._20(114688,null,0,qt.a,[Yt.c,Wt.H,Wt.I],{name:[0,"name"]},null)],function(t,n){t(n,1,0,"crescent")},function(t,n){t(n,0,0,Wt._22(n,1)._paused)})}function u(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,14,"ion-segment",[["class","admin-segment"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"segment-disabled",null]],[[null,"ngModelChange"]],function(t,n,e){var i=!0,l=t.component;if("ngModelChange"===n){i=!1!==(l.viewMode=e)&&i}return i},null,null)),Wt._20(671744,null,0,Jt.g,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),Wt._23(2048,null,Jt.h,null,[Jt.g]),Wt._20(16384,null,0,Jt.i,[Jt.h],null,null),Wt._20(1196032,null,1,Kt.a,[Yt.c,Wt.H,Wt.I,[2,Jt.h]],null,null),Wt._21(603979776,4,{_buttons:1}),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._18(0,null,null,2,"ion-segment-button",[["class","segment-button"],["role","button"],["tappable",""],["value","CLIENT"]],[[2,"segment-button-disabled",null],[2,"segment-activated",null],[1,"aria-pressed",0]],[[null,"click"]],function(t,n,e){var i=!0;if("click"===n){i=!1!==Wt._22(t,8).onClick()&&i}return i},Qt.a,Qt.b)),Wt._20(114688,[[4,4]],0,Xt.a,[],{value:[0,"value"]},null),(t()(),Wt._19(0,["\n        CLIENT\n      "])),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._18(0,null,null,2,"ion-segment-button",[["class","segment-button"],["role","button"],["tappable",""],["value","DESIGNER"]],[[2,"segment-button-disabled",null],[2,"segment-activated",null],[1,"aria-pressed",0]],[[null,"click"]],function(t,n,e){var i=!0;if("click"===n){i=!1!==Wt._22(t,12).onClick()&&i}return i},Qt.a,Qt.b)),Wt._20(114688,[[4,4]],0,Xt.a,[],{value:[0,"value"]},null),(t()(),Wt._19(0,["\n        DESIGNER\n      "])),(t()(),Wt._19(null,["\n    "]))],function(t,n){t(n,1,0,n.component.viewMode);t(n,8,0,"CLIENT");t(n,12,0,"DESIGNER")},function(t,n){t(n,0,0,Wt._22(n,3).ngClassUntouched,Wt._22(n,3).ngClassTouched,Wt._22(n,3).ngClassPristine,Wt._22(n,3).ngClassDirty,Wt._22(n,3).ngClassValid,Wt._22(n,3).ngClassInvalid,Wt._22(n,3).ngClassPending,Wt._22(n,4)._disabled),t(n,7,0,Wt._22(n,8)._disabled,Wt._22(n,8).isActive,Wt._22(n,8).isActive),t(n,11,0,Wt._22(n,12)._disabled,Wt._22(n,12).isActive,Wt._22(n,12).isActive)})}function c(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,7,"div",[["class","collab-alert"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._18(0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Wt._19(null,["WELCOME TO THE DESIGN STAGE!"])),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._18(0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Wt._19(null,["Your designer is hard at work designing your two custom concept boards! We will send you an email when it's time for you to make a selection."])),(t()(),Wt._19(null,["\n    "]))],null,null)}function h(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,7,"div",[["class","collab-alert"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._18(0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Wt._19(null,["WELCOME TO THE DESIGN STAGE!"])),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._18(0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Wt._19(null,["Your designer is hard at work designing your two custom concept boards! We will send you an email when it's time for you to make a selection."])),(t()(),Wt._19(null,["\n    "]))],null,null)}function _(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,11,"div",[["class","collab-alert"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._18(0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Wt._19(null,["WELCOME TO THE DESIGN STAGE!"])),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._18(0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Wt._19(null,["Please upload 2 concept boards based on your client's information and style. Once all boards have been uploaded and confirmed, submit to the client and the 10 business day timeline will begin."])),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._18(0,null,null,2,"button",[["full",""],["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0;if("click"===n){i=!1!==Wt._22(t.parent,2).click()&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],{full:[0,"full"]},null),(t()(),Wt._19(0,["UPLOAD"])),(t()(),Wt._19(null,["\n    "]))],function(t,n){t(n,9,0,"")},null)}function p(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,3,"div",[["class","collab-thumb"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._18(0,null,null,0,"img",[["class","thumb-img"]],[[8,"src",4],[2,"active",null]],[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.selectConcept(t.context.$implicit)&&i}return i},null,null)),(t()(),Wt._19(null,["\n          "]))],null,function(t,n){var e=n.component;t(n,2,0,n.context.$implicit.url,n.context.$implicit.id==e.selectedConcept.id)})}function d(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,13,"div",[],null,null,null,null,null)),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._18(0,null,null,0,"img",[["class","selected-img"]],[[8,"src",4]],null,null,null,null)),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._18(0,null,null,4,"div",[["class","collab-thumb-wrapper"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n          "])),(t()(),Wt._25(16777216,null,null,1,null,p)),Wt._20(802816,null,0,en.l,[Wt.L,Wt.N,Wt.t],{ngForOf:[0,"ngForOf"]},null),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._18(0,null,null,2,"button",[["full",""],["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.approveConcept()&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],{full:[0,"full"]},null),(t()(),Wt._19(0,["APPROVE CONCEPT ",""])),(t()(),Wt._19(null,["\n      "]))],function(t,n){t(n,7,0,n.component.concepts);t(n,11,0,"")},function(t,n){var e=n.component;t(n,2,0,e.selectedConcept.url),t(n,12,0,e.concepts[0].id==e.selectedConcept.id?1:2)})}function m(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,5,"div",[["class","collab-thumb"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._18(0,null,null,0,"img",[["class","thumb-img"]],[[8,"src",4],[2,"active",null]],[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.selectConcept(t.context.$implicit)&&i}return i},null,null)),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._18(0,null,null,0,"img",[["class","delete"],["src","assets/delete.png"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.deleteConcept(t.context.$implicit)&&i}return i},null,null)),(t()(),Wt._19(null,["\n          "]))],null,function(t,n){var e=n.component;t(n,2,0,n.context.$implicit.url,n.context.$implicit.id==e.selectedConcept.id)})}function f(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,18,"div",[],null,null,null,null,null)),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._18(0,null,null,0,"img",[["class","selected-img"]],[[8,"src",4]],null,null,null,null)),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._18(0,null,null,9,"div",[["class","collab-thumb-wrapper"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n          "])),(t()(),Wt._25(16777216,null,null,1,null,m)),Wt._20(802816,null,0,en.l,[Wt.L,Wt.N,Wt.t],{ngForOf:[0,"ngForOf"]},null),(t()(),Wt._19(null,["\n          "])),(t()(),Wt._18(0,null,null,3,"div",[["class","collab-thumb"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._18(0,null,null,0,"img",[["class","thumb-img add"],["src","assets/add.png"]],null,[[null,"click"]],function(t,n,e){var i=!0;if("click"===n){i=!1!==Wt._22(t.parent.parent,2).click()&&i}return i},null,null)),(t()(),Wt._19(null,["\n          "])),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._18(0,null,null,2,"button",[["full",""],["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.submitConcepts()&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],{full:[0,"full"]},null),(t()(),Wt._19(0,["",""])),(t()(),Wt._19(null,["\n      "]))],function(t,n){t(n,7,0,n.component.concepts);t(n,16,0,"")},function(t,n){var e=n.component;t(n,2,0,e.selectedConcept.url),t(n,17,0,"SUBMITTED"==e.concepts[0].projectDetailStatus?"RESUBMIT CONCEPTS":"SUBMIT CONCEPTS")})}function g(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,7,"div",[["class","collab-image"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._25(16777216,null,null,1,null,d)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._25(16777216,null,null,1,null,f)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n    "]))],function(t,n){var e=n.component;t(n,3,0,"CLIENT"==e.viewMode&&"SUBMITTED"==e.concepts[0].projectDetailStatus),t(n,6,0,"DESIGNER"==e.viewMode)},null)}function v(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,7,"div",[["class","collab-alert"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._18(0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Wt._19(null,["HANG TIGHT"])),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._18(0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Wt._19(null,["Your designer is hard at work putting together the Floor Plan of your room!"])),(t()(),Wt._19(null,["\n    "]))],null,null)}function y(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,8,"div",[["class","collab-alert"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._18(0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Wt._19(null,["Using the floor plan provided by the client, create and upload a floor plan to begin the design process."])),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._18(0,null,null,2,"button",[["full",""],["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0;if("click"===n){i=!1!==Wt._22(t.parent,2).click()&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],{full:[0,"full"]},null),(t()(),Wt._19(0,["UPLOAD"])),(t()(),Wt._19(null,["\n    "]))],function(t,n){t(n,6,0,"")},null)}function b(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,3,"div",[["class","collab-image"],["id","floorplan-map"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._18(0,null,null,0,"img",[["id","floorplan-img"]],[[8,"src",4]],null,null,null,null)),(t()(),Wt._19(null,["\n    "]))],null,function(t,n){t(n,2,0,n.component.floorplan.url)})}function I(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,3,"div",[["class","collab-image"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._18(0,null,null,0,"img",[["class","selected-img"]],[[8,"src",4]],null,null,null,null)),(t()(),Wt._19(null,["\n    "]))],null,function(t,n){t(n,2,0,n.component.conceptboard.url)})}function L(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,7,"div",[["class","collab-design-switcher"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._18(0,null,null,1,"a",[],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.selectFloorplan()&&i}return i},null,null)),(t()(),Wt._19(null,["FLOOR PLAN"])),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._18(0,null,null,1,"a",[],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.selectConceptboard()&&i}return i},null,null)),(t()(),Wt._19(null,["CONCEPT BOARD"])),(t()(),Wt._19(null,["\n    "]))],null,null)}function E(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,55,"div",[["class","collab-workzone"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,[["file",1]],null,0,"input",[["accept","image/*"],["style","visibility:hidden"],["type","file"]],null,[[null,"change"]],function(t,n,e){var i=!0,l=t.component;if("change"===n){i=!1!==l.fileChanged(e)&&i}return i},null,null)),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._25(16777216,null,null,1,null,a)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._25(16777216,null,null,1,null,u)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,4,"button",[["class","chat-fab mobile"],["ion-fab",""]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.maximizeChat()&&i}return i},ln.a,ln.b)),Wt._20(49152,null,0,on.a,[Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["\n      "])),(t()(),Wt._18(0,null,0,0,"img",[["src","assets/chats.png"]],null,null,null,null,null)),(t()(),Wt._19(0,["\n    "])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._25(16777216,null,null,1,null,c)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._25(16777216,null,null,1,null,h)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._25(16777216,null,null,1,null,_)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._25(16777216,null,null,1,null,g)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._25(16777216,null,null,1,null,v)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._25(16777216,null,null,1,null,y)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._25(16777216,null,null,1,null,b)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._25(16777216,null,null,1,null,I)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._25(16777216,null,null,1,null,L)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,8,"div",[["class","chat-header desktop"]],[[2,"header-minimized",null],[2,"header-maximized",null]],[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.chatToggled()&&i}return i},null,null)),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._18(0,null,null,0,"img",[["class","chat-img"],["src","assets/chat.png"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._18(0,null,null,1,"h2",[["class","chat-title"]],null,null,null,null,null)),(t()(),Wt._19(null,["Chat"])),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._18(0,null,null,0,"img",[["class","chat-minimize"],["src","assets/down-arrow.png"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,1,"page-chat",[["class","chat-wrapper desktop"]],[[2,"wrapper-minimized",null],[2,"wrapper-maximized",null]],null,null,sn.a,sn.b)),Wt._20(49152,null,0,rn.a,[an.a,un.a,cn.a,hn.a,_n.a,pn.a,dn.a,mn.a,fn.a,gn.a],{project:[0,"project"]},null),(t()(),Wt._19(null,["\n  "]))],function(t,n){var e=n.component;t(n,5,0,e.loading),t(n,8,0,e.user.admin),t(n,17,0,"APPROVE_CONCEPT"==e.view&&"CLIENT"==e.viewMode&&!e.concepts&&!e.loading),t(n,20,0,"APPROVE_CONCEPT"==e.view&&"CLIENT"==e.viewMode&&"PENDING"==e.concepts[0].projectDetailStatus),t(n,23,0,"APPROVE_CONCEPT"==e.view&&"DESIGNER"==e.viewMode&&!e.concepts&&!e.loading),t(n,26,0,"APPROVE_CONCEPT"==e.view&&e.concepts&&!e.conceptboard),t(n,29,0,"APPROVE_FLOOR_PLAN"==e.view&&e.conceptboard&&!e.floorplan&&"CLIENT"==e.viewMode&&!e.loading),t(n,32,0,"APPROVE_FLOOR_PLAN"==e.view&&e.conceptboard&&!e.floorplan&&"DESIGNER"==e.viewMode&&!e.loading),t(n,35,0,"FLOOR_PLAN"==e.view&&e.floorplan),t(n,38,0,"CONCEPT_BOARD"==e.view&&e.conceptboard),t(n,41,0,"APPROVE_CONCEPT"!=e.view&&"APPROVE_FLOOR_PLAN"!=e.view),t(n,54,0,e.project)},function(t,n){var e=n.component;t(n,43,0,e.minimized,e.maximized),t(n,53,0,e.minimized,e.maximized)})}function P(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,1,"span",[],null,null,null,null,null)),(t()(),Wt._19(null,["PENDING"]))],null,null)}function T(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,1,"span",[],null,null,null,null,null)),(t()(),Wt._19(null,["",""]))],null,function(t,n){t(n,1,0,"FLOOR_PLAN"==n.component.project.projectStatus?"SUBMITTED":"PENDING")})}function x(t){return Wt._17(0,[(t()(),
Wt._18(0,null,null,7,"ion-segment-button",[["class","segment-button"],["role","button"],["tappable",""],["value","PENDING"]],[[2,"segment-button-disabled",null],[2,"segment-activated",null],[1,"aria-pressed",0]],[[null,"click"]],function(t,n,e){var i=!0;if("click"===n){i=!1!==Wt._22(t,1).onClick()&&i}return i},Qt.a,Qt.b)),Wt._20(114688,[[5,4]],0,Xt.a,[],{value:[0,"value"]},null),(t()(),Wt._19(0,["\n        "])),(t()(),Wt._25(16777216,null,0,1,null,P)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._25(16777216,null,0,1,null,T)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(0,["\n      "]))],function(t,n){var e=n.component;t(n,1,0,"PENDING"),t(n,4,0,"CLIENT"==e.viewMode),t(n,6,0,"DESIGNER"==e.viewMode)},function(t,n){t(n,0,0,Wt._22(n,1)._disabled,Wt._22(n,1).isActive,Wt._22(n,1).isActive)})}function w(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"ion-segment-button",[["class","segment-button"],["role","button"],["tappable",""],["value","MODIFIED"]],[[2,"segment-button-disabled",null],[2,"segment-activated",null],[1,"aria-pressed",0]],[[null,"click"]],function(t,n,e){var i=!0;if("click"===n){i=!1!==Wt._22(t,1).onClick()&&i}return i},Qt.a,Qt.b)),Wt._20(114688,[[5,4]],0,Xt.a,[],{value:[0,"value"]},null),(t()(),Wt._19(0,["\n        MODIFIED\n      "]))],function(t,n){t(n,1,0,"MODIFIED")},function(t,n){t(n,0,0,Wt._22(n,1)._disabled,Wt._22(n,1).isActive,Wt._22(n,1).isActive)})}function D(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"ion-segment-button",[["class","segment-button"],["role","button"],["tappable",""],["value","APPROVED"]],[[2,"segment-button-disabled",null],[2,"segment-activated",null],[1,"aria-pressed",0]],[[null,"click"]],function(t,n,e){var i=!0;if("click"===n){i=!1!==Wt._22(t,1).onClick()&&i}return i},Qt.a,Qt.b)),Wt._20(114688,[[5,4]],0,Xt.a,[],{value:[0,"value"]},null),(t()(),Wt._19(0,["\n        APPROVED\n      "]))],function(t,n){t(n,1,0,"APPROVED")},function(t,n){t(n,0,0,Wt._22(n,1)._disabled,Wt._22(n,1).isActive,Wt._22(n,1).isActive)})}function S(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,18,"div",[["class","project-items-view-switcher"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,15,"ion-segment",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"segment-disabled",null]],[[null,"ngModelChange"],[null,"ionChange"]],function(t,n,e){var i=!0,l=t.component;if("ngModelChange"===n){i=!1!==(l.itemsViewMode=e)&&i}if("ionChange"===n){i=!1!==l.itemViewSwitched()&&i}return i},null,null)),Wt._20(671744,null,0,Jt.g,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),Wt._23(2048,null,Jt.h,null,[Jt.g]),Wt._20(16384,null,0,Jt.i,[Jt.h],null,null),Wt._20(1196032,null,1,Kt.a,[Yt.c,Wt.H,Wt.I,[2,Jt.h]],null,{ionChange:"ionChange"}),Wt._21(603979776,5,{_buttons:1}),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._25(16777216,null,null,1,null,x)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._25(16777216,null,null,1,null,w)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._25(16777216,null,null,1,null,D)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._19(null,["\n  "]))],function(t,n){var e=n.component;t(n,3,0,e.itemsViewMode),t(n,10,0,"FINAL_DELIVERY"!=e.project.projectStatus&&"SHOPPING_CART"!=e.project.projectStatus&&"ESTIMATE_SHIPPING_AND_TAX"!=e.project.projectStatus&&"ARCHIVED"!=e.project.projectStatus),t(n,13,0,e.modifiedItems),t(n,16,0,e.approvedItems)},function(t,n){t(n,2,0,Wt._22(n,5).ngClassUntouched,Wt._22(n,5).ngClassTouched,Wt._22(n,5).ngClassPristine,Wt._22(n,5).ngClassDirty,Wt._22(n,5).ngClassValid,Wt._22(n,5).ngClassInvalid,Wt._22(n,5).ngClassPending,Wt._22(n,6)._disabled)})}function C(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,7,"div",[["class","collection-box"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Wt._19(null,["HANG TIGHT"])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Wt._19(null,["Your designer is hard at work putting together the Floor Plan of your room!"])),(t()(),Wt._19(null,["\n  "]))],null,null)}function M(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,11,"div",[["class","collection-box"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Wt._19(null,["YOUR COLLECTION"])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Wt._19(null,["Review your furnishings and note the items that you would like to see alternatives from your designer. Happy with the collection? Go ahead and approve all!"])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.approveCollection()&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["APPROVE & SUBMIT"])),(t()(),Wt._19(null,["\n  "]))],null,null)}function k(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,11,"div",[["class","collection-box"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Wt._19(null,["ALTERNATES REQUESTED"])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Wt._19(null,["Please wait for your designer to submit alternatives for the items you requested."])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,2,"button",[["disabled",""],["ion-button",""],["type","button"]],null,null,null,tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["APPROVE & SUBMIT"])),(t()(),Wt._19(null,["\n  "]))],null,null)}function A(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,7,"div",[["class","collection-box"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Wt._19(null,["APPROVED ITEMS"])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Wt._19(null,["Below are the items approved from the previous stage. These items can be further discussed with your designer if needed."])),(t()(),Wt._19(null,["\n  "]))],null,null)}function N(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,7,"div",[["class","collection-box"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Wt._19(null,["YOUR COLLECTION"])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Wt._19(null,["Please wait for your designer to add furniture items to the floorplan before you approve or request alternatives."])),(t()(),Wt._19(null,["\n  "]))],null,null)}function O(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,7,"div",[["class","collection-box"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Wt._19(null,[""," COLLECTION"])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Wt._19(null,["Add furniture to fill the space. Double tap at a location on the floorplan to add a new item."])),(t()(),Wt._19(null,["\n  "]))],null,function(t,n){var e=n.component;t(n,3,0,e.types[e.project.projectType])})}function R(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,11,"div",[["class","collection-box"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Wt._19(null,[""," COLLECTION"])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Wt._19(null,["Continue adding furniture to fill the space. When you're satisfied with the collection, go ahead and submit it to your client."])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.submitCollection()&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["SUBMIT COLLECTION"])),(t()(),Wt._19(null,["\n  "]))],null,function(t,n){var e=n.component;t(n,3,0,e.types[e.project.projectType])})}function U(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,11,"div",[["class","collection-box"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Wt._19(null,["ALTERNATES REQUESTED:"])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Wt._19(null,["Review the items below. Your client wants to see alternatives furniture for them. When you're satisfied with the collection, go ahead and submit it to your client."])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.submitCollection()&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["SUBMIT ALTERNATIVES"])),(t()(),Wt._19(null,["\n  "]))],null,null)}function B(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,11,"div",[["class","collection-box"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Wt._19(null,["ALTERNATES READY"])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Wt._19(null,["Please wait for your client to approve alternatives for the items you submitted."])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,2,"button",[["disabled",""],["ion-button",""],["type","button"]],null,null,null,tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["SUBMIT ALTERNATIVES"])),(t()(),Wt._19(null,["\n  "]))],null,null)}function j(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,11,"div",[["class","collection-box"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Wt._19(null,["MODIFIED ITEMS:"])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Wt._19(null,["Review the items below and submit to your client when ready."])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.submitCollection()&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["SUBMIT COLLECTION"])),(t()(),Wt._19(null,["\n  "]))],null,null)}function z(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,11,"div",[["class","collection-box"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Wt._19(null,["MODIFIED ITEMS:"])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Wt._19(null,["Please wait for your client to approve the items you submitted."])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,2,"button",[["disabled",""],["ion-button",""],["type","button"]],null,null,null,tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["SUBMIT COLLECTION"])),(t()(),Wt._19(null,["\n  "]))],null,null)}function Z(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.submitCollection()&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["SUBMIT ALTERNATIVES"]))],null,null)}function V(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,10,"div",[["class","collection-box"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),Wt._19(null,["APPROVED ITEMS"])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Wt._19(null,["The client has already approved the following items:"])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._25(16777216,null,null,1,null,Z)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n  "]))],function(t,n){t(n,9,0,"REQUEST_ALTERNATIVES"==n.component.project.projectStatus)},null)}function F(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,1,"h4",[],null,null,null,null,null)),(t()(),Wt._19(null,[""," ITEMS"]))],null,function(t,n){t(n,1,0,n.component.pendingItems.length)})}function H(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,1,"h4",[],null,null,null,null,null)),(t()(),Wt._19(null,[""," ITEMS"]))],null,function(t,n){t(n,1,0,n.component.modifiedItems.length)})}function G(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,1,"h4",[],null,null,null,null,null)),(t()(),Wt._19(null,[""," ITEMS"]))],null,function(t,n){t(n,1,0,n.component.approvedItems.length)})}function W(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,1,"h5",[],null,null,null,null,null)),(t()(),Wt._19(null,["Collection Total: $",""]))],null,function(t,n){t(n,1,0,n.component.pendingCollectionTotal/100)})}function $(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,1,"h5",[],null,null,null,null,null)),(t()(),Wt._19(null,["Collection Total: $",""]))],null,function(t,n){t(n,1,0,n.component.modifiedCollectionTotal/100)})}function q(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,1,"h5",[],null,null,null,null,null)),(t()(),Wt._19(null,["Collection Total: $",""]))],null,function(t,n){t(n,1,0,n.component.approvedCollectionTotal/100)})}function Y(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(t,n){t(n,0,0,n.component.pendingItemsMap[n.parent.context.$implicit.fileEntryId].url)})}function J(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.requestAlternative(t.parent.parent.parent.context.$implicit)&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["REQUEST ALTERNATIVES"]))],null,null)}function K(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,4,"div",[],null,null,null,null,null)),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._25(16777216,null,null,1,null,J)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n          "]))],function(t,n){var e=n.component;t(n,3,0,"FLOOR_PLAN"==e.project.projectStatus||"ALTERNATIVES_READY"==e.project.projectStatus)},null)}function Q(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.undoAlternative(t.parent.parent.parent.context.$implicit)&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["UNDO"]))],null,null)}function X(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.viewAlternatives(t.parent.parent.parent.context.$implicit,t.parent.parent.parent.context.index)&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["VIEW ALTERNATIVES"]))],null,null)}function tt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,7,"div",[],null,null,null,null,null)),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._25(16777216,null,null,1,null,Q)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._25(16777216,null,null,1,null,X)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n          "]))],function(t,n){var e=n.component;t(n,3,0,"REQUEST_ALTERNATIVES"!=e.project.projectStatus),t(n,6,0,"REQUEST_ALTERNATIVES"==e.project.projectStatus)},null)}function nt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,7,"div",[],null,null,null,null,null)),(t()(),Wt._19(null,["\n          "])),(t()(),Wt._25(16777216,null,null,1,null,K)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n          "])),(t()(),Wt._25(16777216,null,null,1,null,tt)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n        "]))],function(t,n){t(n,3,0,"SUBMITTED"==n.parent.context.$implicit.projectItemStatus||"PENDING"==n.parent.context.$implicit.projectItemStatus),t(n,6,0,"REQUEST_ALTERNATIVE"==n.parent.context.$implicit.projectItemStatus)},null)}function et(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.offerAlternative(t.parent.parent.parent.context.$implicit,t.parent.parent.parent.context.index)&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["OFFER ALTERNATIVES"]))],null,null)}function it(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.viewAlternatives(t.parent.parent.parent.context.$implicit,t.parent.parent.parent.context.index)&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["VIEW ALTERNATIVES"]))],null,null)}function lt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.editItem(t.parent.parent.parent.context.$implicit,t.parent.parent.parent.context.index)&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["EDIT"]))],null,null)}function ot(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,10,"div",[],null,null,null,null,null)),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._25(16777216,null,null,1,null,et)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._25(16777216,null,null,1,null,it)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._25(16777216,null,null,1,null,lt)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n          "]))],function(t,n){var e=n.component;t(n,3,0,"REQUEST_ALTERNATIVES"==e.project.projectStatus),t(n,6,0,"ALTERNATIVES_READY"==e.project.projectStatus),t(n,9,0,"FLOOR_PLAN"==e.project.projectStatus)},null)}function st(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.offerAlternative(t.parent.parent.parent.context.$implicit,t.parent.parent.parent.context.index)&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["OFFER ALTERNATIVES"]))],null,null)}function rt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.viewAlternatives(t.parent.parent.parent.context.$implicit,t.parent.parent.parent.context.index)&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["VIEW ALTERNATIVES"]))],null,null)}function at(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,7,"div",[],null,null,null,null,null)),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._25(16777216,null,null,1,null,st)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._25(16777216,null,null,1,null,rt)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n          "]))],function(t,n){var e=n.component;t(n,3,0,"REQUEST_ALTERNATIVES"==e.project.projectStatus),t(n,6,0,"ALTERNATIVES_READY"==e.project.projectStatus)},null)}function ut(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,7,"div",[],null,null,null,null,null)),(t()(),Wt._19(null,["\n          "])),(t()(),Wt._25(16777216,null,null,1,null,ot)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n          "])),(t()(),Wt._25(16777216,null,null,1,null,at)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n        "]))],function(t,n){t(n,3,0,"REQUEST_ALTERNATIVE"==n.parent.context.$implicit.projectItemStatus),t(n,6,0,"ALTERNATE_READY"==n.parent.context.$implicit.projectItemStatus)},null)}function ct(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,26,"ion-col",[["class","project-items-box col"],["col-12",""],["col-sm",""]],[[2,"hidden",null]],null,null,null,null)),Wt._20(16384,null,0,vn.a,[],null,null),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._18(0,null,null,1,"div",[["class","project-items-label"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n          ITEM ","\n        "])),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._18(0,null,null,4,"div",[["class","project-items-img"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n          "])),(t()(),Wt._25(16777216,null,null,1,null,Y)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._18(0,null,null,1,"h6",[],null,null,null,null,null)),(t()(),Wt._19(null,["",""])),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._18(0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Wt._19(null,["",""])),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._18(0,null,null,1,"h2",[],null,null,null,null,null)),(t()(),Wt._19(null,["$",""])),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._25(16777216,null,null,1,null,nt)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._25(16777216,null,null,1,null,ut)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n      "]))],function(t,n){var e=n.component;t(n,9,0,e.pendingItemsMap[n.context.$implicit.fileEntryId]),t(n,22,0,"CLIENT"==e.viewMode),t(n,25,0,"DESIGNER"==e.viewMode)},function(t,n){t(n,0,0,"PENDING"!=n.component.itemsViewMode),t(n,4,0,n.context.index+1),t(n,13,0,n.context.$implicit.itemMake),t(n,16,0,n.context.$implicit.itemType),t(n,19,0,n.context.$implicit.itemPrice/100)})}function ht(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(t,n){t(n,0,0,n.component.modifiedItemsMap[n.parent.context.$implicit.fileEntryId].url)})}function _t(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.requestAlternative(t.parent.parent.parent.context.$implicit)&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["REQUEST ALTERNATIVES"]))],null,null)}function pt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,4,"div",[],null,null,null,null,null)),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._25(16777216,null,null,1,null,_t)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n          "]))],function(t,n){var e=n.component;t(n,3,0,"FLOOR_PLAN"==e.project.projectStatus||"ALTERNATIVES_READY"==e.project.projectStatus)},null)}function dt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.undoAlternative(t.parent.parent.parent.context.$implicit)&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["UNDO"]))],null,null)}function mt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.viewAlternatives(t.parent.parent.parent.context.$implicit,t.parent.parent.parent.context.index)&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["VIEW ALTERNATIVES"]))],null,null)}function ft(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,7,"div",[],null,null,null,null,null)),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._25(16777216,null,null,1,null,dt)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._25(16777216,null,null,1,null,mt)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n          "]))],function(t,n){var e=n.component;t(n,3,0,"REQUEST_ALTERNATIVES"!=e.project.projectStatus),t(n,6,0,"REQUEST_ALTERNATIVES"==e.project.projectStatus)},null)}function gt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,7,"div",[],null,null,null,null,null)),(t()(),Wt._19(null,["\n          "])),(t()(),Wt._25(16777216,null,null,1,null,pt)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n          "])),(t()(),Wt._25(16777216,null,null,1,null,ft)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n        "]))],function(t,n){t(n,3,0,"SUBMITTED"==n.parent.context.$implicit.projectItemStatus||"PENDING"==n.parent.context.$implicit.projectItemStatus),t(n,6,0,"REQUEST_ALTERNATIVE"==n.parent.context.$implicit.projectItemStatus)},null)}function vt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.offerAlternative(t.parent.parent.parent.context.$implicit,t.parent.parent.parent.context.index)&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["OFFER ALTERNATIVES"]))],null,null)}function yt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.viewAlternatives(t.parent.parent.parent.context.$implicit,t.parent.parent.parent.context.index)&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["VIEW ALTERNATIVES"]))],null,null)}function bt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.editItem(t.parent.parent.parent.context.$implicit,t.parent.parent.parent.context.index)&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["EDIT"]))],null,null)}function It(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,10,"div",[],null,null,null,null,null)),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._25(16777216,null,null,1,null,vt)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._25(16777216,null,null,1,null,yt)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._25(16777216,null,null,1,null,bt)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n          "]))],function(t,n){var e=n.component;t(n,3,0,"REQUEST_ALTERNATIVES"==e.project.projectStatus),t(n,6,0,"ALTERNATIVES_READY"==e.project.projectStatus),t(n,9,0,"FLOOR_PLAN"==e.project.projectStatus)},null)}function Lt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.offerAlternative(t.parent.parent.parent.context.$implicit,t.parent.parent.parent.context.index)&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["OFFER ALTERNATIVES"]))],null,null)}function Et(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.viewAlternatives(t.parent.parent.parent.context.$implicit,t.parent.parent.parent.context.index)&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["VIEW ALTERNATIVES"]))],null,null)}function Pt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,7,"div",[],null,null,null,null,null)),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._25(16777216,null,null,1,null,Lt)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._25(16777216,null,null,1,null,Et)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n          "]))],function(t,n){var e=n.component;t(n,3,0,"REQUEST_ALTERNATIVES"==e.project.projectStatus),t(n,6,0,"ALTERNATIVES_READY"==e.project.projectStatus)},null)}function Tt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,7,"div",[],null,null,null,null,null)),(t()(),Wt._19(null,["\n          "])),(t()(),Wt._25(16777216,null,null,1,null,It)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n          "])),(t()(),Wt._25(16777216,null,null,1,null,Pt)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n        "]))],function(t,n){t(n,3,0,"REQUEST_ALTERNATIVE"==n.parent.context.$implicit.projectItemStatus),t(n,6,0,"ALTERNATE_READY"==n.parent.context.$implicit.projectItemStatus)},null)}function xt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,26,"ion-col",[["class","project-items-box col"],["col-12",""],["col-sm",""]],[[2,"hidden",null]],null,null,null,null)),Wt._20(16384,null,0,vn.a,[],null,null),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._18(0,null,null,1,"div",[["class","project-items-label"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.editItem(t.context.$implicit,t.context.index)&&i}return i},null,null)),(t()(),Wt._19(null,["\n          ITEM ","\n        "])),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._18(0,null,null,4,"div",[["class","project-items-img"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.editItem(t.context.$implicit,t.context.index)&&i}return i},null,null)),(t()(),Wt._19(null,["\n          "])),(t()(),Wt._25(16777216,null,null,1,null,ht)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._18(0,null,null,1,"h6",[],null,null,null,null,null)),(t()(),Wt._19(null,["",""])),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._18(0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Wt._19(null,["",""])),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._18(0,null,null,1,"h2",[],null,null,null,null,null)),(t()(),Wt._19(null,["$",""])),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._25(16777216,null,null,1,null,gt)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._25(16777216,null,null,1,null,Tt)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n      "]))],function(t,n){var e=n.component;t(n,9,0,e.modifiedItemsMap[n.context.$implicit.fileEntryId]),
t(n,22,0,"CLIENT"==e.viewMode),t(n,25,0,"DESIGNER"==e.viewMode)},function(t,n){t(n,0,0,"MODIFIED"!=n.component.itemsViewMode),t(n,4,0,n.context.index+1),t(n,13,0,n.context.$implicit.itemMake),t(n,16,0,n.context.$implicit.itemType),t(n,19,0,n.context.$implicit.itemPrice/100)})}function wt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(t,n){t(n,0,0,n.component.approvedItemsMap[n.parent.context.$implicit.fileEntryId].url)})}function Dt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.requestAlternative(t.parent.parent.parent.context.$implicit)&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["REQUEST ALTERNATIVES"]))],null,null)}function St(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,4,"div",[],null,null,null,null,null)),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._25(16777216,null,null,1,null,Dt)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n          "]))],function(t,n){var e=n.component;t(n,3,0,"FLOOR_PLAN"==e.project.projectStatus||"ALTERNATIVES_READY"==e.project.projectStatus)},null)}function Ct(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.undoAlternative(t.parent.parent.parent.context.$implicit)&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["UNDO"]))],null,null)}function Mt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.viewAlternatives(t.parent.parent.parent.context.$implicit,t.parent.parent.parent.context.index)&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["VIEW ALTERNATIVES"]))],null,null)}function kt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,7,"div",[],null,null,null,null,null)),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._25(16777216,null,null,1,null,Ct)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._25(16777216,null,null,1,null,Mt)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n          "]))],function(t,n){var e=n.component;t(n,3,0,"REQUEST_ALTERNATIVES"!=e.project.projectStatus),t(n,6,0,"REQUEST_ALTERNATIVES"==e.project.projectStatus)},null)}function At(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,7,"div",[],null,null,null,null,null)),(t()(),Wt._19(null,["\n          "])),(t()(),Wt._25(16777216,null,null,1,null,St)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n          "])),(t()(),Wt._25(16777216,null,null,1,null,kt)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n        "]))],function(t,n){t(n,3,0,"SUBMITTED"==n.parent.context.$implicit.projectItemStatus||"PENDING"==n.parent.context.$implicit.projectItemStatus),t(n,6,0,"REQUEST_ALTERNATIVE"==n.parent.context.$implicit.projectItemStatus)},null)}function Nt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.offerAlternative(t.parent.parent.parent.context.$implicit,t.parent.parent.parent.context.index)&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["OFFER ALTERNATIVES"]))],null,null)}function Ot(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.viewAlternatives(t.parent.parent.parent.context.$implicit,t.parent.parent.parent.context.index)&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["VIEW ALTERNATIVES"]))],null,null)}function Rt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.editItem(t.parent.parent.parent.context.$implicit,t.parent.parent.parent.context.index)&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["EDIT"]))],null,null)}function Ut(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,10,"div",[],null,null,null,null,null)),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._25(16777216,null,null,1,null,Nt)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._25(16777216,null,null,1,null,Ot)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._25(16777216,null,null,1,null,Rt)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n          "]))],function(t,n){var e=n.component;t(n,3,0,"REQUEST_ALTERNATIVES"==e.project.projectStatus),t(n,6,0,"ALTERNATIVES_READY"==e.project.projectStatus),t(n,9,0,"FLOOR_PLAN"==e.project.projectStatus)},null)}function Bt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.offerAlternative(t.parent.parent.parent.context.$implicit,t.parent.parent.parent.context.index)&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["OFFER ALTERNATIVES"]))],null,null)}function jt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,2,"button",[["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.viewAlternatives(t.parent.parent.parent.context.$implicit,t.parent.parent.parent.context.index)&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["VIEW ALTERNATIVES"]))],null,null)}function zt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,7,"div",[],null,null,null,null,null)),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._25(16777216,null,null,1,null,Bt)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n            "])),(t()(),Wt._25(16777216,null,null,1,null,jt)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n          "]))],function(t,n){var e=n.component;t(n,3,0,"REQUEST_ALTERNATIVES"==e.project.projectStatus),t(n,6,0,"ALTERNATIVES_READY"==e.project.projectStatus)},null)}function Zt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,7,"div",[],null,null,null,null,null)),(t()(),Wt._19(null,["\n          "])),(t()(),Wt._25(16777216,null,null,1,null,Ut)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n          "])),(t()(),Wt._25(16777216,null,null,1,null,zt)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n        "]))],function(t,n){t(n,3,0,"REQUEST_ALTERNATIVE"==n.parent.context.$implicit.projectItemStatus),t(n,6,0,"ALTERNATE_READY"==n.parent.context.$implicit.projectItemStatus)},null)}function Vt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,26,"ion-col",[["class","project-items-box col"],["col-12",""],["col-sm",""]],[[2,"hidden",null]],null,null,null,null)),Wt._20(16384,null,0,vn.a,[],null,null),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._18(0,null,null,1,"div",[["class","project-items-label"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.editItem(t.context.$implicit,t.context.index)&&i}return i},null,null)),(t()(),Wt._19(null,["\n          ITEM ","\n        "])),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._18(0,null,null,4,"div",[["class","project-items-img"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.editItem(t.context.$implicit,t.context.index)&&i}return i},null,null)),(t()(),Wt._19(null,["\n          "])),(t()(),Wt._25(16777216,null,null,1,null,wt)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._18(0,null,null,1,"h6",[],null,null,null,null,null)),(t()(),Wt._19(null,["",""])),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._18(0,null,null,1,"p",[],null,null,null,null,null)),(t()(),Wt._19(null,["",""])),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._18(0,null,null,1,"h2",[],null,null,null,null,null)),(t()(),Wt._19(null,["$",""])),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._25(16777216,null,null,1,null,At)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n        "])),(t()(),Wt._25(16777216,null,null,1,null,Zt)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n      "]))],function(t,n){var e=n.component;t(n,9,0,e.approvedItemsMap[n.context.$implicit.fileEntryId]),t(n,22,0,"CLIENT"==e.viewMode),t(n,25,0,"DESIGNER"==e.viewMode)},function(t,n){t(n,0,0,"APPROVED"!=n.component.itemsViewMode),t(n,4,0,n.context.index+1),t(n,13,0,n.context.$implicit.itemMake),t(n,16,0,n.context.$implicit.itemType),t(n,19,0,n.context.$implicit.itemPrice/100)})}function Ft(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,33,"ion-grid",[["class","project-items grid"]],null,null,null,null,null)),Wt._20(16384,null,0,yn.a,[],null,null),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._25(16777216,null,null,1,null,F)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._25(16777216,null,null,1,null,H)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._25(16777216,null,null,1,null,G)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._25(16777216,null,null,1,null,W)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._25(16777216,null,null,1,null,$)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._25(16777216,null,null,1,null,q)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,11,"ion-row",[["class","project-items-wrapper row"]],null,null,null,null,null)),Wt._20(16384,null,0,bn.a,[],null,null),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._25(16777216,null,null,1,null,ct)),Wt._20(802816,null,0,en.l,[Wt.L,Wt.N,Wt.t],{ngForOf:[0,"ngForOf"]},null),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._25(16777216,null,null,1,null,xt)),Wt._20(802816,null,0,en.l,[Wt.L,Wt.N,Wt.t],{ngForOf:[0,"ngForOf"]},null),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._25(16777216,null,null,1,null,Vt)),Wt._20(802816,null,0,en.l,[Wt.L,Wt.N,Wt.t],{ngForOf:[0,"ngForOf"]},null),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._19(null,["\n  "]))],function(t,n){var e=n.component;t(n,4,0,"PENDING"==e.itemsViewMode&&e.pendingItems),t(n,7,0,"MODIFIED"==e.itemsViewMode&&e.modifiedItems),t(n,10,0,"APPROVED"==e.itemsViewMode&&e.approvedItems),t(n,13,0,"PENDING"==e.itemsViewMode),t(n,16,0,"MODIFIED"==e.itemsViewMode),t(n,19,0,"APPROVED"==e.itemsViewMode),t(n,25,0,e.pendingItems),t(n,28,0,e.modifiedItems),t(n,31,0,e.approvedItems)},null)}function Ht(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,71,"ion-header",[],[[2,"maximized",null]],null,null,null,null)),Wt._20(16384,null,0,In.a,[Yt.c,Wt.H,Wt.I,[2,cn.a]],null,null),(t()(),Wt._19(null,["\n  "])),(t()(),Wt._18(0,null,null,40,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Ln.a,Ln.b)),Wt._20(49152,null,0,En.a,[Pn.a,[2,cn.a],[2,an.a],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(3,["\n    "])),(t()(),Wt._18(0,null,0,9,"ion-buttons",[["left",""]],null,null,null,null,null)),Wt._20(16384,null,1,Tn.a,[Yt.c,Wt.H,Wt.I,[2,xn.a],[2,En.a]],null,null),Wt._21(603979776,1,{_buttons:1}),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._18(0,null,null,4,"button",[["ion-button",""]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.homePressed()&&i}return i},tn.a,tn.b)),Wt._20(1097728,[[1,4]],0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),(t()(),Wt._19(0,["\n        "])),(t()(),Wt._18(0,null,0,0,"img",[["src","assets/logo.png"],["style","width:54px;margin:5px;"]],null,null,null,null,null)),(t()(),Wt._19(0,["\n      "])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._19(3,["\n    "])),(t()(),Wt._18(0,null,3,7,"ion-title",[],null,null,null,Dn.a,Dn.b)),Wt._20(49152,null,0,Sn.a,[Yt.c,Wt.H,Wt.I,[2,xn.a],[2,En.a]],null,null),(t()(),Wt._25(16777216,null,0,1,null,i)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._25(16777216,null,0,1,null,l)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._18(0,null,0,1,"span",[["class","page"]],null,null,null,null,null)),(t()(),Wt._19(null,["Design Studio"])),(t()(),Wt._19(3,["\n    "])),(t()(),Wt._18(0,null,2,16,"ion-buttons",[["end",""]],null,null,null,null,null)),Wt._20(16384,null,1,Tn.a,[Yt.c,Wt.H,Wt.I,[2,xn.a],[2,En.a]],null,null),Wt._21(603979776,2,{_buttons:1}),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._18(0,null,null,11,"button",[["class","avatar"],["ion-button",""],["menuToggle",""]],[[8,"hidden",0]],[[null,"click"]],function(t,n,e){var i=!0;if("click"===n){i=!1!==Wt._22(t,32).toggle()&&i}return i},tn.a,tn.b)),Wt._20(1097728,[[3,4],[2,4]],0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],null,null),Wt._20(1064960,null,0,Cn.a,[Mn.a,[2,cn.a],[2,nn.a],[2,En.a]],{menuToggle:[0,"menuToggle"]},null),Wt._20(16384,null,1,Tn.a,[Yt.c,Wt.H,Wt.I,[2,xn.a],[2,En.a]],null,null),Wt._21(603979776,3,{_buttons:1}),(t()(),Wt._19(0,["\n        "])),(t()(),Wt._25(16777216,null,0,1,null,o)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(0,["\n        "])),(t()(),Wt._25(16777216,null,0,1,null,s)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(0,["\n      "])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._19(3,["\n  "])),(t()(),Wt._19(null,["\n  "])),(t()(),Wt._18(0,null,null,25,"div",[["class","sub-nav"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,13,"div",[["class","desktop menu"]],null,null,null,null,null)),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._18(0,null,null,2,"div",[],null,null,null,null,null)),(t()(),Wt._18(0,null,null,1,"a",[],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.selectTabLink("DETAILS")&&i}return i},null,null)),(t()(),Wt._19(null,["1. DETAILS"])),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._18(0,null,null,2,"div",[],null,null,null,null,null)),(t()(),Wt._18(0,null,null,1,"a",[["class","active"]],null,null,null,null,null)),(t()(),Wt._19(null,["2. DESIGN"])),(t()(),Wt._19(null,["\n      "])),(t()(),Wt._18(0,null,null,2,"div",[],null,null,null,null,null)),(t()(),Wt._18(0,null,null,1,"a",[],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.selectTabLink("FINAL_DELIVERY")&&i}return i},null,null)),(t()(),Wt._19(null,["3. FINAL DELIVERY"])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._18(0,null,null,4,"button",[["class","mobile"],["full",""],["ion-button",""],["type","button"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;if("click"===n){i=!1!==l.selectTab()&&i}return i},tn.a,tn.b)),Wt._20(1097728,null,0,nn.a,[[8,""],Yt.c,Wt.H,Wt.I],{full:[0,"full"]},null),(t()(),Wt._19(0,["\n      2. DESIGN\n      "])),(t()(),Wt._18(0,null,0,0,"img",[["src","assets/down.png"]],null,null,null,null,null)),(t()(),Wt._19(0,["\n    "])),(t()(),Wt._19(null,["\n    "])),(t()(),Wt._25(16777216,null,null,1,null,r)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(null,["\n  "])),(t()(),Wt._19(null,["\n"])),(t()(),Wt._19(null,["\n\n"])),(t()(),Wt._18(0,null,null,47,"ion-content",[],[[2,"minimized",null],[2,"statusbar-padding",null]],null,null,kn.a,kn.b)),Wt._20(4374528,null,0,An.a,[Yt.c,Nn.b,On.a,Wt.H,Wt.I,Pn.a,Rn.a,Wt.g,[2,cn.a],[2,an.a]],null,null),(t()(),Wt._19(1,["\n  "])),(t()(),Wt._25(16777216,null,1,1,null,E)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(1,["\n  "])),(t()(),Wt._25(16777216,null,1,1,null,S)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(1,["\n  "])),(t()(),Wt._25(16777216,null,1,1,null,C)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(1,["\n  "])),(t()(),Wt._25(16777216,null,1,1,null,M)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(1,["\n  "])),(t()(),Wt._25(16777216,null,1,1,null,k)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(1,["\n  "])),(t()(),Wt._25(16777216,null,1,1,null,A)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(1,["\n  "])),(t()(),Wt._25(16777216,null,1,1,null,N)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(1,["\n  "])),(t()(),Wt._25(16777216,null,1,1,null,O)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(1,["\n  "])),(t()(),Wt._25(16777216,null,1,1,null,R)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(1,["\n  "])),(t()(),Wt._25(16777216,null,1,1,null,U)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(1,["\n  "])),(t()(),Wt._25(16777216,null,1,1,null,B)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(1,["\n  "])),(t()(),Wt._25(16777216,null,1,1,null,j)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(1,["\n  "])),(t()(),Wt._25(16777216,null,1,1,null,z)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(1,["\n  "])),(t()(),Wt._25(16777216,null,1,1,null,V)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(1,["\n  "])),(t()(),Wt._25(16777216,null,1,1,null,Ft)),Wt._20(16384,null,0,en.k,[Wt.L,Wt.N],{ngIf:[0,"ngIf"]},null),(t()(),Wt._19(1,["\n"]))],function(t,n){var e=n.component;t(n,20,0,e.project),t(n,22,0,e.project);t(n,32,0,""),t(n,37,0,e.user&&e.user.photoURL),t(n,40,0,!e.user||!e.user.photoURL);t(n,63,0,""),t(n,69,0,e.project),t(n,77,0,e.project),t(n,80,0,e.pendingItems||e.approvedItems),t(n,83,0,"CLIENT"==e.viewMode&&e.pendingItems&&"CONCEPTS"==e.project.projectStatus&&"PENDING"==e.itemsViewMode),t(n,86,0,"CLIENT"==e.viewMode&&e.pendingItems&&"REQUEST_ALTERNATIVES"!=e.project.projectStatus&&"CONCEPTS"!=e.project.projectStatus&&"PENDING"==e.itemsViewMode),t(n,89,0,"CLIENT"==e.viewMode&&e.pendingItems&&"REQUEST_ALTERNATIVES"==e.project.projectStatus&&"PENDING"==e.itemsViewMode),t(n,92,0,"CLIENT"==e.viewMode&&e.approvedItems&&"APPROVED"==e.itemsViewMode),t(n,95,0,"CLIENT"==e.viewMode&&!e.pendingItems&&!e.approvedItems&&e.concepts&&e.floorplan&&"PENDING"==e.itemsViewMode),t(n,98,0,"DESIGNER"==e.viewMode&&!e.pendingItems&&!e.approvedItems&&e.concepts&&e.floorplan&&"PENDING"==e.itemsViewMode),t(n,101,0,"DESIGNER"==e.viewMode&&e.pendingItems&&"CONCEPTS"==e.project.projectStatus&&"FLOOR_PLAN"!=e.project.projectStatus&&"PENDING"==e.itemsViewMode),t(n,104,0,"DESIGNER"==e.viewMode&&e.pendingItems&&"REQUEST_ALTERNATIVES"==e.project.projectStatus&&"PENDING"==e.itemsViewMode),t(n,107,0,"DESIGNER"==e.viewMode&&e.pendingItems&&"ALTERNATIVES_READY"==e.project.projectStatus&&"PENDING"==e.itemsViewMode),t(n,110,0,"DESIGNER"==e.viewMode&&e.modifiedItems&&"REQUEST_ALTERNATIVES"==e.project.projectStatus&&"MODIFIED"==e.itemsViewMode),t(n,113,0,"DESIGNER"==e.viewMode&&e.modifiedItems&&"ALTERNATIVES_READY"==e.project.projectStatus&&"MODIFIED"==e.itemsViewMode),t(n,116,0,"DESIGNER"==e.viewMode&&e.approvedItems&&"APPROVED"==e.itemsViewMode),t(n,119,0,e.pendingItems||e.approvedItems)},function(t,n){var e=n.component;t(n,0,0,e.maximized),t(n,3,0,Wt._22(n,4)._hidden,Wt._22(n,4)._sbPadding),t(n,30,0,Wt._22(n,32).isHidden),t(n,73,0,e.minimized,Wt._22(n,74).statusbarPadding)})}function Gt(t){return Wt._17(0,[(t()(),Wt._18(0,null,null,1,"page-design",[],null,null,null,Ht,Zn)),Wt._20(49152,null,0,wn.a,[an.a,un.a,fn.a,Un.a,gn.a,_n.a,Bn.a,jn.a,Nn.b],null,null)],null,null)}var Wt=e(0),$t=e(197),qt=e(54),Yt=e(1),Jt=e(25),Kt=e(127),Qt=e(311),Xt=e(75),tn=e(50),nn=e(18),en=e(16),ln=e(310),on=e(118),sn=e(341),rn=e(317),an=e(21),un=e(11),cn=e(4),hn=e(77),_n=e(70),pn=e(78),dn=e(53),mn=e(120),fn=e(31),gn=e(114),vn=e(124),yn=e(125),bn=e(126),In=e(115),Ln=e(304),En=e(42),Pn=e(6),Tn=e(116),xn=e(52),wn=e(318),Dn=e(307),Sn=e(113),Cn=e(119),Mn=e(22),kn=e(188),An=e(27),Nn=e(3),On=e(7),Rn=e(14),Un=e(117),Bn=e(74),jn=e(76);e.d(n,"a",function(){return Vn});var zn=[],Zn=Wt._16({encapsulation:2,styles:zn,data:{}}),Vn=Wt._26("page-design",wn.a,Gt,{},{},[])},365:function(t,n,e){var i,l;!function(o,s,r){var a={version:"1.0.3"};"object"==typeof t&&"object"==typeof t.exports?t.exports=a:(i=a,void 0!==(l="function"==typeof i?i.call(n,e,n,t):i)&&(t.exports=l)),void 0!==o&&function(){var t=o.L;a.noConflict=function(){return o.L=t,this},o.L=a}(),a.Util={extend:function(t){var n,e,i,l;for(e=1,i=arguments.length;e<i;e++){l=arguments[e];for(n in l)t[n]=l[n]}return t},create:Object.create||function(){function t(){}return function(n){return t.prototype=n,new t}}(),bind:function(t,n){var e=Array.prototype.slice;if(t.bind)return t.bind.apply(t,e.call(arguments,1));var i=e.call(arguments,2);return function(){return t.apply(n,i.length?i.concat(e.call(arguments)):arguments)}},stamp:function(t){return t._leaflet_id=t._leaflet_id||++a.Util.lastId,t._leaflet_id},lastId:0,throttle:function(t,n,e){var i,l,o,s;return s=function(){i=!1,l&&(o.apply(e,l),l=!1)},o=function(){i?l=arguments:(t.apply(e,arguments),setTimeout(s,n),i=!0)}},wrapNum:function(t,n,e){var i=n[1],l=n[0],o=i-l;return t===i&&e?t:((t-l)%o+o)%o+l},falseFn:function(){return!1},formatNum:function(t,n){var e=Math.pow(10,n||5);return Math.round(t*e)/e},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return a.Util.trim(t).split(/\s+/)},setOptions:function(t,n){t.hasOwnProperty("options")||(t.options=t.options?a.Util.create(t.options):{});for(var e in n)t.options[e]=n[e];return t.options},getParamString:function(t,n,e){var i=[];for(var l in t)i.push(encodeURIComponent(e?l.toUpperCase():l)+"="+encodeURIComponent(t[l]));return(n&&-1!==n.indexOf("?")?"&":"?")+i.join("&")},template:function(t,n){return t.replace(a.Util.templateRe,function(t,e){var i=n[e];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(n)),i})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},indexOf:function(t,n){for(var e=0;e<t.length;e++)if(t[e]===n)return e;return-1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(t){return o["webkit"+t]||o["moz"+t]||o["ms"+t]}function n(t){var n=+new Date,i=Math.max(0,16-(n-e));return e=n+i,o.setTimeout(t,i)}var e=0,i=o.requestAnimationFrame||t("RequestAnimationFrame")||n,l=o.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){o.clearTimeout(t)};a.Util.requestAnimFrame=function(t,e,l){if(!l||i!==n)return i.call(o,a.bind(t,e));t.call(e)},a.Util.cancelAnimFrame=function(t){t&&l.call(o,t)}}(),a.extend=a.Util.extend,a.bind=a.Util.bind,a.stamp=a.Util.stamp,a.setOptions=a.Util.setOptions,a.Class=function(){},a.Class.extend=function(t){var n=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},e=n.__super__=this.prototype,i=a.Util.create(e);i.constructor=n,n.prototype=i;for(var l in this)this.hasOwnProperty(l)&&"prototype"!==l&&(n[l]=this[l]);return t.statics&&(a.extend(n,t.statics),delete t.statics),t.includes&&(a.Util.extend.apply(null,[i].concat(t.includes)),delete t.includes),i.options&&(t.options=a.Util.extend(a.Util.create(i.options),t.options)),a.extend(i,t),i._initHooks=[],i.callInitHooks=function(){if(!this._initHooksCalled){e.callInitHooks&&e.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,n=i._initHooks.length;t<n;t++)i._initHooks[t].call(this)}},n},a.Class.include=function(t){return a.extend(this.prototype,t),this},a.Class.mergeOptions=function(t){return a.extend(this.prototype.options,t),this},a.Class.addInitHook=function(t){var n=Array.prototype.slice.call(arguments,1),e="function"==typeof t?t:function(){this[t].apply(this,n)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(e),this},a.Evented=a.Class.extend({on:function(t,n,e){if("object"==typeof t)for(var i in t)this._on(i,t[i],n);else{t=a.Util.splitWords(t);for(var l=0,o=t.length;l<o;l++)this._on(t[l],n,e)}return this},off:function(t,n,e){if(t)if("object"==typeof t)for(var i in t)this._off(i,t[i],n);else{t=a.Util.splitWords(t);for(var l=0,o=t.length;l<o;l++)this._off(t[l],n,e)}else delete this._events;return this},_on:function(t,n,e){this._events=this._events||{};var i=this._events[t];i||(i=[],this._events[t]=i),e===this&&(e=void 0);for(var l={fn:n,ctx:e},o=i,s=0,r=o.length;s<r;s++)if(o[s].fn===n&&o[s].ctx===e)return;o.push(l)},_off:function(t,n,e){var i,l,o;if(this._events&&(i=this._events[t])){if(!n){for(l=0,o=i.length;l<o;l++)i[l].fn=a.Util.falseFn;return void delete this._events[t]}if(e===this&&(e=void 0),i)for(l=0,o=i.length;l<o;l++){var s=i[l];if(s.ctx===e&&s.fn===n)return s.fn=a.Util.falseFn,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(l,1)}}},fire:function(t,n,e){if(!this.listens(t,e))return this;var i=a.Util.extend({},n,{type:t,target:this});if(this._events){var l=this._events[t];if(l){this._firingCount=this._firingCount+1||1;for(var o=0,s=l.length;o<s;o++){var r=l[o];r.fn.call(r.ctx||this,i)}this._firingCount--}}return e&&this._propagateEvent(i),this},listens:function(t,n){var e=this._events&&this._events[t];if(e&&e.length)return!0;if(n)for(var i in this._eventParents)if(this._eventParents[i].listens(t,n))return!0;return!1},once:function(t,n,e){if("object"==typeof t){for(var i in t)this.once(i,t[i],n);return this}var l=a.bind(function(){this.off(t,n,e).off(t,l,e)},this);return this.on(t,n,e).on(t,l,e)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[a.stamp(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[a.stamp(t)],this},_propagateEvent:function(t){for(var n in this._eventParents)this._eventParents[n].fire(t.type,a.extend({layer:t.target},t),!0)}});var u=a.Evented.prototype;u.addEventListener=u.on,u.removeEventListener=u.clearAllEventListeners=u.off,u.addOneTimeEventListener=u.once,u.fireEvent=u.fire,u.hasEventListeners=u.listens,a.Mixin={Events:u},function(){var t=navigator.userAgent.toLowerCase(),n=s.documentElement,e="ActiveXObject"in o,i=-1!==t.indexOf("webkit"),l=-1!==t.indexOf("phantom"),r=-1!==t.search("android [23]"),u=-1!==t.indexOf("chrome"),c=-1!==t.indexOf("gecko")&&!i&&!o.opera&&!e,h=0===navigator.platform.indexOf("Win"),_="undefined"!=typeof orientation||-1!==t.indexOf("mobile"),p=!o.PointerEvent&&o.MSPointerEvent,d=o.PointerEvent||p,m=e&&"transition"in n.style,f="WebKitCSSMatrix"in o&&"m11"in new o.WebKitCSSMatrix&&!r,g="MozPerspective"in n.style,v="OTransition"in n.style,y=!o.L_NO_TOUCH&&(d||"ontouchstart"in o||o.DocumentTouch&&s instanceof o.DocumentTouch);a.Browser={ie:e,ielt9:e&&!s.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in s),webkit:i,gecko:c,android:-1!==t.indexOf("android"),android23:r,chrome:u,safari:!u&&-1!==t.indexOf("safari"),win:h,ie3d:m,webkit3d:f,gecko3d:g,opera12:v,any3d:!o.L_DISABLE_3D&&(m||f||g)&&!v&&!l,mobile:_,mobileWebkit:_&&i,mobileWebkit3d:_&&f,mobileOpera:_&&o.opera,mobileGecko:_&&c,touch:!!y,msPointer:!!p,pointer:!!d,retina:(o.devicePixelRatio||o.screen.deviceXDPI/o.screen.logicalXDPI)>1}}(),a.Point=function(t,n,e){this.x=e?Math.round(t):t,this.y=e?Math.round(n):n},a.Point.prototype={clone:function(){return new a.Point(this.x,this.y)},add:function(t){return this.clone()._add(a.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(a.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new a.Point(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new a.Point(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(t){t=a.point(t);var n=t.x-this.x,e=t.y-this.y;return Math.sqrt(n*n+e*e)},equals:function(t){return t=a.point(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=a.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+a.Util.formatNum(this.x)+", "+a.Util.formatNum(this.y)+")"}},a.point=function(t,n,e){return t instanceof a.Point?t:a.Util.isArray(t)?new a.Point(t[0],t[1]):void 0===t||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new a.Point(t.x,t.y):new a.Point(t,n,e)},a.Bounds=function(t,n){if(t)for(var e=n?[t,n]:t,i=0,l=e.length;i<l;i++)this.extend(e[i])},a.Bounds.prototype={extend:function(t){return t=a.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new a.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new a.Point(this.min.x,this.max.y)},getTopRight:function(){return new a.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var n,e;return t="number"==typeof t[0]||t instanceof a.Point?a.point(t):a.bounds(t),t instanceof a.Bounds?(n=t.min,e=t.max):n=e=t,n.x>=this.min.x&&e.x<=this.max.x&&n.y>=this.min.y&&e.y<=this.max.y},intersects:function(t){t=a.bounds(t);var n=this.min,e=this.max,i=t.min,l=t.max,o=l.x>=n.x&&i.x<=e.x,s=l.y>=n.y&&i.y<=e.y;return o&&s},overlaps:function(t){t=a.bounds(t);var n=this.min,e=this.max,i=t.min,l=t.max,o=l.x>n.x&&i.x<e.x,s=l.y>n.y&&i.y<e.y;return o&&s},isValid:function(){return!(!this.min||!this.max)}},a.bounds=function(t,n){return!t||t instanceof a.Bounds?t:new a.Bounds(t,n)},a.Transformation=function(t,n,e,i){this._a=t,this._b=n,this._c=e,this._d=i},a.Transformation.prototype={transform:function(t,n){return this._transform(t.clone(),n)},_transform:function(t,n){return n=n||1,t.x=n*(this._a*t.x+this._b),t.y=n*(this._c*t.y+this._d),t},untransform:function(t,n){return n=n||1,new a.Point((t.x/n-this._b)/this._a,(t.y/n-this._d)/this._c)}},a.DomUtil={get:function(t){return"string"==typeof t?s.getElementById(t):t},getStyle:function(t,n){var e=t.style[n]||t.currentStyle&&t.currentStyle[n];if((!e||"auto"===e)&&s.defaultView){var i=s.defaultView.getComputedStyle(t,null);e=i?i[n]:null}return"auto"===e?null:e},create:function(t,n,e){var i=s.createElement(t);return i.className=n||"",e&&e.appendChild(i),i},remove:function(t){var n=t.parentNode;n&&n.removeChild(t)},empty:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},toFront:function(t){t.parentNode.appendChild(t)},toBack:function(t){var n=t.parentNode;n.insertBefore(t,n.firstChild)},hasClass:function(t,n){
if(void 0!==t.classList)return t.classList.contains(n);var e=a.DomUtil.getClass(t);return e.length>0&&new RegExp("(^|\\s)"+n+"(\\s|$)").test(e)},addClass:function(t,n){if(void 0!==t.classList)for(var e=a.Util.splitWords(n),i=0,l=e.length;i<l;i++)t.classList.add(e[i]);else if(!a.DomUtil.hasClass(t,n)){var o=a.DomUtil.getClass(t);a.DomUtil.setClass(t,(o?o+" ":"")+n)}},removeClass:function(t,n){void 0!==t.classList?t.classList.remove(n):a.DomUtil.setClass(t,a.Util.trim((" "+a.DomUtil.getClass(t)+" ").replace(" "+n+" "," ")))},setClass:function(t,n){void 0===t.className.baseVal?t.className=n:t.className.baseVal=n},getClass:function(t){return void 0===t.className.baseVal?t.className:t.className.baseVal},setOpacity:function(t,n){"opacity"in t.style?t.style.opacity=n:"filter"in t.style&&a.DomUtil._setOpacityIE(t,n)},_setOpacityIE:function(t,n){var e=!1,i="DXImageTransform.Microsoft.Alpha";try{e=t.filters.item(i)}catch(t){if(1===n)return}n=Math.round(100*n),e?(e.Enabled=100!==n,e.Opacity=n):t.style.filter+=" progid:"+i+"(opacity="+n+")"},testProp:function(t){for(var n=s.documentElement.style,e=0;e<t.length;e++)if(t[e]in n)return t[e];return!1},setTransform:function(t,n,e){var i=n||new a.Point(0,0);t.style[a.DomUtil.TRANSFORM]=(a.Browser.ie3d?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(e?" scale("+e+")":"")},setPosition:function(t,n){t._leaflet_pos=n,a.Browser.any3d?a.DomUtil.setTransform(t,n):(t.style.left=n.x+"px",t.style.top=n.y+"px")},getPosition:function(t){return t._leaflet_pos||new a.Point(0,0)}},function(){a.DomUtil.TRANSFORM=a.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var t=a.DomUtil.TRANSITION=a.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);if(a.DomUtil.TRANSITION_END="webkitTransition"===t||"OTransition"===t?t+"End":"transitionend","onselectstart"in s)a.DomUtil.disableTextSelection=function(){a.DomEvent.on(o,"selectstart",a.DomEvent.preventDefault)},a.DomUtil.enableTextSelection=function(){a.DomEvent.off(o,"selectstart",a.DomEvent.preventDefault)};else{var n=a.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);a.DomUtil.disableTextSelection=function(){if(n){var t=s.documentElement.style;this._userSelect=t[n],t[n]="none"}},a.DomUtil.enableTextSelection=function(){n&&(s.documentElement.style[n]=this._userSelect,delete this._userSelect)}}a.DomUtil.disableImageDrag=function(){a.DomEvent.on(o,"dragstart",a.DomEvent.preventDefault)},a.DomUtil.enableImageDrag=function(){a.DomEvent.off(o,"dragstart",a.DomEvent.preventDefault)},a.DomUtil.preventOutline=function(t){for(;-1===t.tabIndex;)t=t.parentNode;t&&t.style&&(a.DomUtil.restoreOutline(),this._outlineElement=t,this._outlineStyle=t.style.outline,t.style.outline="none",a.DomEvent.on(o,"keydown",a.DomUtil.restoreOutline,this))},a.DomUtil.restoreOutline=function(){this._outlineElement&&(this._outlineElement.style.outline=this._outlineStyle,delete this._outlineElement,delete this._outlineStyle,a.DomEvent.off(o,"keydown",a.DomUtil.restoreOutline,this))}}(),a.LatLng=function(t,n,e){if(isNaN(t)||isNaN(n))throw new Error("Invalid LatLng object: ("+t+", "+n+")");this.lat=+t,this.lng=+n,void 0!==e&&(this.alt=+e)},a.LatLng.prototype={equals:function(t,n){return!!t&&(t=a.latLng(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===n?1e-9:n))},toString:function(t){return"LatLng("+a.Util.formatNum(this.lat,t)+", "+a.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){return a.CRS.Earth.distance(this,a.latLng(t))},wrap:function(){return a.CRS.Earth.wrapLatLng(this)},toBounds:function(t){var n=180*t/40075017,e=n/Math.cos(Math.PI/180*this.lat);return a.latLngBounds([this.lat-n,this.lng-e],[this.lat+n,this.lng+e])},clone:function(){return new a.LatLng(this.lat,this.lng,this.alt)}},a.latLng=function(t,n,e){return t instanceof a.LatLng?t:a.Util.isArray(t)&&"object"!=typeof t[0]?3===t.length?new a.LatLng(t[0],t[1],t[2]):2===t.length?new a.LatLng(t[0],t[1]):null:void 0===t||null===t?t:"object"==typeof t&&"lat"in t?new a.LatLng(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===n?null:new a.LatLng(t,n,e)},a.LatLngBounds=function(t,n){if(t)for(var e=n?[t,n]:t,i=0,l=e.length;i<l;i++)this.extend(e[i])},a.LatLngBounds.prototype={extend:function(t){var n,e,i=this._southWest,l=this._northEast;if(t instanceof a.LatLng)n=t,e=t;else{if(!(t instanceof a.LatLngBounds))return t?this.extend(a.latLng(t)||a.latLngBounds(t)):this;if(n=t._southWest,e=t._northEast,!n||!e)return this}return i||l?(i.lat=Math.min(n.lat,i.lat),i.lng=Math.min(n.lng,i.lng),l.lat=Math.max(e.lat,l.lat),l.lng=Math.max(e.lng,l.lng)):(this._southWest=new a.LatLng(n.lat,n.lng),this._northEast=new a.LatLng(e.lat,e.lng)),this},pad:function(t){var n=this._southWest,e=this._northEast,i=Math.abs(n.lat-e.lat)*t,l=Math.abs(n.lng-e.lng)*t;return new a.LatLngBounds(new a.LatLng(n.lat-i,n.lng-l),new a.LatLng(e.lat+i,e.lng+l))},getCenter:function(){return new a.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new a.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new a.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof a.LatLng||"lat"in t?a.latLng(t):a.latLngBounds(t);var n,e,i=this._southWest,l=this._northEast;return t instanceof a.LatLngBounds?(n=t.getSouthWest(),e=t.getNorthEast()):n=e=t,n.lat>=i.lat&&e.lat<=l.lat&&n.lng>=i.lng&&e.lng<=l.lng},intersects:function(t){t=a.latLngBounds(t);var n=this._southWest,e=this._northEast,i=t.getSouthWest(),l=t.getNorthEast(),o=l.lat>=n.lat&&i.lat<=e.lat,s=l.lng>=n.lng&&i.lng<=e.lng;return o&&s},overlaps:function(t){t=a.latLngBounds(t);var n=this._southWest,e=this._northEast,i=t.getSouthWest(),l=t.getNorthEast(),o=l.lat>n.lat&&i.lat<e.lat,s=l.lng>n.lng&&i.lng<e.lng;return o&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return!!t&&(t=a.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},a.latLngBounds=function(t,n){return t instanceof a.LatLngBounds?t:new a.LatLngBounds(t,n)},a.Projection={},a.Projection.LonLat={project:function(t){return new a.Point(t.lng,t.lat)},unproject:function(t){return new a.LatLng(t.y,t.x)},bounds:a.bounds([-180,-90],[180,90])},a.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var n=Math.PI/180,e=this.MAX_LATITUDE,i=Math.max(Math.min(e,t.lat),-e),l=Math.sin(i*n);return new a.Point(this.R*t.lng*n,this.R*Math.log((1+l)/(1-l))/2)},unproject:function(t){var n=180/Math.PI;return new a.LatLng((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*n,t.x*n/this.R)},bounds:function(){var t=6378137*Math.PI;return a.bounds([-t,-t],[t,t])}()},a.CRS={latLngToPoint:function(t,n){var e=this.projection.project(t),i=this.scale(n);return this.transformation._transform(e,i)},pointToLatLng:function(t,n){var e=this.scale(n),i=this.transformation.untransform(t,e);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var n=this.projection.bounds,e=this.scale(t),i=this.transformation.transform(n.min,e),l=this.transformation.transform(n.max,e);return a.bounds(i,l)},infinite:!1,wrapLatLng:function(t){var n=this.wrapLng?a.Util.wrapNum(t.lng,this.wrapLng,!0):t.lng,e=this.wrapLat?a.Util.wrapNum(t.lat,this.wrapLat,!0):t.lat,i=t.alt;return a.latLng(e,n,i)},wrapLatLngBounds:function(t){var n=t.getCenter(),e=this.wrapLatLng(n),i=n.lat-e.lat,l=n.lng-e.lng;if(0===i&&0===l)return t;var o=t.getSouthWest(),s=t.getNorthEast(),r=a.latLng({lat:o.lat-i,lng:o.lng-l}),u=a.latLng({lat:s.lat-i,lng:s.lng-l});return new a.LatLngBounds(r,u)}},a.CRS.Simple=a.extend({},a.CRS,{projection:a.Projection.LonLat,transformation:new a.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,n){var e=n.lng-t.lng,i=n.lat-t.lat;return Math.sqrt(e*e+i*i)},infinite:!0}),a.CRS.Earth=a.extend({},a.CRS,{wrapLng:[-180,180],R:6371e3,distance:function(t,n){var e=Math.PI/180,i=t.lat*e,l=n.lat*e,o=Math.sin(i)*Math.sin(l)+Math.cos(i)*Math.cos(l)*Math.cos((n.lng-t.lng)*e);return this.R*Math.acos(Math.min(o,1))}}),a.CRS.EPSG3857=a.extend({},a.CRS.Earth,{code:"EPSG:3857",projection:a.Projection.SphericalMercator,transformation:function(){var t=.5/(Math.PI*a.Projection.SphericalMercator.R);return new a.Transformation(t,.5,-t,.5)}()}),a.CRS.EPSG900913=a.extend({},a.CRS.EPSG3857,{code:"EPSG:900913"}),a.CRS.EPSG4326=a.extend({},a.CRS.Earth,{code:"EPSG:4326",projection:a.Projection.LonLat,transformation:new a.Transformation(1/180,1,-1/180,.5)}),a.Map=a.Evented.extend({options:{crs:a.CRS.EPSG3857,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,n){n=a.setOptions(this,n),this._initContainer(t),this._initLayout(),this._onResize=a.bind(this._onResize,this),this._initEvents(),n.maxBounds&&this.setMaxBounds(n.maxBounds),void 0!==n.zoom&&(this._zoom=this._limitZoom(n.zoom)),n.center&&void 0!==n.zoom&&this.setView(a.latLng(n.center),n.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=a.DomUtil.TRANSITION&&a.Browser.any3d&&!a.Browser.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),a.DomEvent.on(this._proxy,a.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,n,e){if(n=void 0===n?this._zoom:this._limitZoom(n),t=this._limitCenter(a.latLng(t),n,this.options.maxBounds),e=e||{},this._stop(),this._loaded&&!e.reset&&!0!==e){void 0!==e.animate&&(e.zoom=a.extend({animate:e.animate},e.zoom),e.pan=a.extend({animate:e.animate,duration:e.duration},e.pan));if(this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,n,e.zoom):this._tryAnimatedPan(t,e.pan))return clearTimeout(this._sizeTimer),this}return this._resetView(t,n),this},setZoom:function(t,n){return this._loaded?this.setView(this.getCenter(),t,{zoom:n}):(this._zoom=t,this)},zoomIn:function(t,n){return t=t||(a.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,n)},zoomOut:function(t,n){return t=t||(a.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,n)},setZoomAround:function(t,n,e){var i=this.getZoomScale(n),l=this.getSize().divideBy(2),o=t instanceof a.Point?t:this.latLngToContainerPoint(t),s=o.subtract(l).multiplyBy(1-1/i),r=this.containerPointToLatLng(l.add(s));return this.setView(r,n,{zoom:e})},_getBoundsCenterZoom:function(t,n){n=n||{},t=t.getBounds?t.getBounds():a.latLngBounds(t);var e=a.point(n.paddingTopLeft||n.padding||[0,0]),i=a.point(n.paddingBottomRight||n.padding||[0,0]),l=this.getBoundsZoom(t,!1,e.add(i));l="number"==typeof n.maxZoom?Math.min(n.maxZoom,l):l;var o=i.subtract(e).divideBy(2),s=this.project(t.getSouthWest(),l),r=this.project(t.getNorthEast(),l);return{center:this.unproject(s.add(r).divideBy(2).add(o),l),zoom:l}},fitBounds:function(t,n){if(t=a.latLngBounds(t),!t.isValid())throw new Error("Bounds are not valid.");var e=this._getBoundsCenterZoom(t,n);return this.setView(e.center,e.zoom,n)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,n){return this.setView(t,this._zoom,{pan:n})},panBy:function(t,n){if(t=a.point(t).round(),n=n||{},!t.x&&!t.y)return this.fire("moveend");if(!0!==n.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new a.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),n.noMoveStart||this.fire("movestart"),!1!==n.animate){a.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var e=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,e,n.duration||.25,n.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,n,e){function i(t){var n=t?-1:1,e=t?g:f,i=g*g-f*f+n*b*b*v*v,l=2*e*b*v,o=i/l,s=Math.sqrt(o*o+1)-o;return s<1e-9?-18:Math.log(s)}function l(t){return(Math.exp(t)-Math.exp(-t))/2}function o(t){return(Math.exp(t)+Math.exp(-t))/2}function s(t){return l(t)/o(t)}function r(t){return f*(o(I)/o(I+y*t))}function u(t){return f*(o(I)*s(I+y*t)-l(I))/b}function c(t){return 1-Math.pow(1-t,1.5)}function h(){var e=(Date.now()-L)/P,i=c(e)*E;e<=1?(this._flyToFrame=a.Util.requestAnimFrame(h,this),this._move(this.unproject(_.add(p.subtract(_).multiplyBy(u(i)/v)),m),this.getScaleZoom(f/r(i),m),{flyTo:!0})):this._move(t,n)._moveEnd(!0)}if(e=e||{},!1===e.animate||!a.Browser.any3d)return this.setView(t,n,e);this._stop();var _=this.project(this.getCenter()),p=this.project(t),d=this.getSize(),m=this._zoom;t=a.latLng(t),n=void 0===n?m:n;var f=Math.max(d.x,d.y),g=f*this.getZoomScale(m,n),v=p.distanceTo(_)||1,y=1.42,b=y*y,I=i(0),L=Date.now(),E=(i(1)-I)/y,P=e.duration?1e3*e.duration:1e3*E*.8;return this._moveStart(!0),h.call(this),this},flyToBounds:function(t,n){var e=this._getBoundsCenterZoom(t,n);return this.flyTo(e.center,e.zoom,n)},setMaxBounds:function(t){return t=a.latLngBounds(t),t.isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){return this.options.minZoom=t,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(t):this},setMaxZoom:function(t){return this.options.maxZoom=t,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(t):this},panInsideBounds:function(t,n){this._enforcingBounds=!0;var e=this.getCenter(),i=this._limitCenter(e,this._zoom,a.latLngBounds(t));return e.equals(i)||this.panTo(i,n),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=a.extend({animate:!1,pan:!0},!0===t?{animate:!0}:t);var n=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var e=this.getSize(),i=n.divideBy(2).round(),l=e.divideBy(2).round(),o=i.subtract(l);return o.x||o.y?(t.animate&&t.pan?this.panBy(o):(t.pan&&this._rawPanBy(o),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:e})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=a.extend({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var n=a.bind(this._handleGeolocationResponse,this),e=a.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,e,t):navigator.geolocation.getCurrentPosition(n,e,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var n=t.code,e=t.message||(1===n?"permission denied":2===n?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:n,message:"Geolocation error: "+e+"."})},_handleGeolocationResponse:function(t){var n=t.coords.latitude,e=t.coords.longitude,i=new a.LatLng(n,e),l=i.toBounds(t.coords.accuracy),o=this._locateOptions;if(o.setView){var s=this.getBoundsZoom(l);this.setView(i,o.maxZoom?Math.min(s,o.maxZoom):s)}var r={latlng:i,bounds:l,timestamp:t.timestamp};for(var u in t.coords)"number"==typeof t.coords[u]&&(r[u]=t.coords[u]);this.fire("locationfound",r)},addHandler:function(t,n){if(!n)return this;var e=this[t]=new n(this);return this._handlers.push(e),this.options[t]&&e.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}a.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");for(var t in this._layers)this._layers[t].remove();return this},createPane:function(t,n){var e="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),i=a.DomUtil.create("div",e,n||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),n=this.unproject(t.getBottomLeft()),e=this.unproject(t.getTopRight());return new a.LatLngBounds(n,e)},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,n,e){t=a.latLngBounds(t),e=a.point(e||[0,0]);var i=this.getZoom()||0,l=this.getMinZoom(),o=this.getMaxZoom(),s=t.getNorthWest(),r=t.getSouthEast(),u=this.getSize().subtract(e),c=a.bounds(this.project(r,i),this.project(s,i)).getSize(),h=a.Browser.any3d?this.options.zoomSnap:1,_=Math.min(u.x/c.x,u.y/c.y);return i=this.getScaleZoom(_,i),h&&(i=Math.round(i/(h/100))*(h/100),i=n?Math.ceil(i/h)*h:Math.floor(i/h)*h),Math.max(l,Math.min(o,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new a.Point(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,n){var e=this._getTopLeftPoint(t,n);return new a.Bounds(e,e.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,n){var e=this.options.crs;return n=void 0===n?this._zoom:n,e.scale(t)/e.scale(n)},getScaleZoom:function(t,n){var e=this.options.crs;n=void 0===n?this._zoom:n;var i=e.zoom(t*e.scale(n));return isNaN(i)?1/0:i},project:function(t,n){return n=void 0===n?this._zoom:n,this.options.crs.latLngToPoint(a.latLng(t),n)},unproject:function(t,n){return n=void 0===n?this._zoom:n,this.options.crs.pointToLatLng(a.point(t),n)},layerPointToLatLng:function(t){var n=a.point(t).add(this.getPixelOrigin());return this.unproject(n)},latLngToLayerPoint:function(t){return this.project(a.latLng(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(a.latLng(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(a.latLngBounds(t))},distance:function(t,n){return this.options.crs.distance(a.latLng(t),a.latLng(n))},containerPointToLayerPoint:function(t){return a.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return a.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var n=this.containerPointToLayerPoint(a.point(t));return this.layerPointToLatLng(n)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(a.latLng(t)))},mouseEventToContainerPoint:function(t){return a.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var n=this._container=a.DomUtil.get(t);if(!n)throw new Error("Map container not found.");if(n._leaflet_id)throw new Error("Map container is already initialized.");a.DomEvent.addListener(n,"scroll",this._onScroll,this),this._containerId=a.Util.stamp(n)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&a.Browser.any3d,a.DomUtil.addClass(t,"leaflet-container"+(a.Browser.touch?" leaflet-touch":"")+(a.Browser.retina?" leaflet-retina":"")+(a.Browser.ielt9?" leaflet-oldie":"")+(a.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var n=a.DomUtil.getStyle(t,"position");"absolute"!==n&&"relative"!==n&&"fixed"!==n&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),a.DomUtil.setPosition(this._mapPane,new a.Point(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(a.DomUtil.addClass(t.markerPane,"leaflet-zoom-hide"),a.DomUtil.addClass(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,n){a.DomUtil.setPosition(this._mapPane,new a.Point(0,0));var e=!this._loaded;this._loaded=!0,n=this._limitZoom(n),this.fire("viewprereset");var i=this._zoom!==n;this._moveStart(i)._move(t,n)._moveEnd(i),this.fire("viewreset"),e&&this.fire("load")},_moveStart:function(t){return t&&this.fire("zoomstart"),this.fire("movestart")},_move:function(t,n,e){void 0===n&&(n=this._zoom);var i=this._zoom!==n;return this._zoom=n,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(i||e&&e.pinch)&&this.fire("zoom",e),this.fire("move",e)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return a.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){a.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){if(a.DomEvent){this._targets={},this._targets[a.stamp(this._container)]=this;var n=t?"off":"on";a.DomEvent[n](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&a.DomEvent[n](o,"resize",this._onResize,this),a.Browser.any3d&&this.options.transform3DLimit&&this[n]("moveend",this._onMoveEnd)}},_onResize:function(){a.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=a.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,n){for(var e,i=[],l="mouseout"===n||"mouseover"===n,o=t.target||t.srcElement,s=!1;o;){if((e=this._targets[a.stamp(o)])&&("click"===n||"preclick"===n)&&!t._simulated&&this._draggableMoved(e)){s=!0;break}if(e&&e.listens(n,!0)){if(l&&!a.DomEvent._isExternalTarget(o,t))break;if(i.push(e),l)break}if(o===this._container)break;o=o.parentNode}return i.length||s||l||!a.DomEvent._isExternalTarget(o,t)||(i=[this]),i},_handleDOMEvent:function(t){if(this._loaded&&!a.DomEvent._skipped(t)){var n="keypress"===t.type&&13===t.keyCode?"click":t.type;"mousedown"===n&&a.DomUtil.preventOutline(t.target||t.srcElement),this._fireDOMEvent(t,n)}},_fireDOMEvent:function(t,n,e){if("click"===t.type){var i=a.Util.extend({},t);i.type="preclick",this._fireDOMEvent(i,i.type,e)}if(!t._stopped&&(e=(e||[]).concat(this._findEventTargets(t,n)),e.length)){var l=e[0];"contextmenu"===n&&l.listens(n,!0)&&a.DomEvent.preventDefault(t);var o={originalEvent:t};if("keypress"!==t.type){var s=l instanceof a.Marker;o.containerPoint=s?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(t),o.layerPoint=this.containerPointToLayerPoint(o.containerPoint),o.latlng=s?l.getLatLng():this.layerPointToLatLng(o.layerPoint)}for(var r=0;r<e.length;r++)if(e[r].fire(n,o,!0),o.originalEvent._stopped||e[r].options.nonBubblingEvents&&-1!==a.Util.indexOf(e[r].options.nonBubblingEvents,n))return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,n=this._handlers.length;t<n;t++)this._handlers[t].disable()},whenReady:function(t,n){return this._loaded?t.call(n||this,{target:this}):this.on("load",t,n),this},_getMapPanePos:function(){return a.DomUtil.getPosition(this._mapPane)||new a.Point(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,n){return(t&&void 0!==n?this._getNewPixelOrigin(t,n):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,n){var e=this.getSize()._divideBy(2);return this.project(t,n)._subtract(e)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,n,e){var i=this._getNewPixelOrigin(e,n);return this.project(t,n)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,n,e){var i=this._getNewPixelOrigin(e,n);return a.bounds([this.project(t.getSouthWest(),n)._subtract(i),this.project(t.getNorthWest(),n)._subtract(i),this.project(t.getSouthEast(),n)._subtract(i),this.project(t.getNorthEast(),n)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,n,e){if(!e)return t;var i=this.project(t,n),l=this.getSize().divideBy(2),o=new a.Bounds(i.subtract(l),i.add(l)),s=this._getBoundsOffset(o,e,n);return s.round().equals([0,0])?t:this.unproject(i.add(s),n)},_limitOffset:function(t,n){if(!n)return t;var e=this.getPixelBounds(),i=new a.Bounds(e.min.add(t),e.max.add(t));return t.add(this._getBoundsOffset(i,n))},_getBoundsOffset:function(t,n,e){var i=a.bounds(this.project(n.getNorthEast(),e),this.project(n.getSouthWest(),e)),l=i.min.subtract(t.min),o=i.max.subtract(t.max),s=this._rebound(l.x,-o.x),r=this._rebound(l.y,-o.y);return new a.Point(s,r)},_rebound:function(t,n){return t+n>0?Math.round(t-n)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(n))},_limitZoom:function(t){var n=this.getMinZoom(),e=this.getMaxZoom(),i=a.Browser.any3d?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(n,Math.min(e,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){a.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,n){var e=this._getCenterOffset(t)._floor();return!(!0!==(n&&n.animate)&&!this.getSize().contains(e))&&(this.panBy(e,n),!0)},_createAnimProxy:function(){var t=this._proxy=a.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(n){var e=a.DomUtil.TRANSFORM,i=t.style[e];a.DomUtil.setTransform(t,this.project(n.center,n.zoom),this.getZoomScale(n.zoom,1)),i===t.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var n=this.getCenter(),e=this.getZoom();a.DomUtil.setTransform(t,this.project(n,e),this.getZoomScale(e,1))},this)},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,n,e){if(this._animatingZoom)return!0;if(e=e||{},!this._zoomAnimated||!1===e.animate||this._nothingToAnimate()||Math.abs(n-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(n),l=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==e.animate&&!this.getSize().contains(l))&&(a.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(t,n,!0)},this),!0)},_animateZoom:function(t,n,e,i){e&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=n,a.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:n,noUpdate:i}),setTimeout(a.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(a.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),a.Util.requestAnimFrame(function(){this._moveEnd(!0)},this))}}),a.map=function(t,n){return new a.Map(t,n)},a.Layer=a.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[],attribution:null},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[a.stamp(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[a.stamp(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var n=t.target;if(n.hasLayer(this)){if(this._map=n,this._zoomAnimated=n._zoomAnimated,this.getEvents){var e=this.getEvents();n.on(e,this),this.once("remove",function(){n.off(e,this)},this)}this.onAdd(n),this.getAttribution&&n.attributionControl&&n.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),n.fire("layeradd",{layer:this})}}}),a.Map.include({addLayer:function(t){var n=a.stamp(t);return this._layers[n]?this:(this._layers[n]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var n=a.stamp(t);return this._layers[n]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[n],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&a.stamp(t)in this._layers},eachLayer:function(t,n){for(var e in this._layers)t.call(n,this._layers[e]);return this},_addLayers:function(t){t=t?a.Util.isArray(t)?t:[t]:[];for(var n=0,e=t.length;n<e;n++)this.addLayer(t[n])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[a.stamp(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var n=a.stamp(t);this._zoomBoundLayers[n]&&(delete this._zoomBoundLayers[n],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,n=-1/0,e=this._getZoomSpan();for(var i in this._zoomBoundLayers){var l=this._zoomBoundLayers[i].options;t=void 0===l.minZoom?t:Math.min(t,l.minZoom),n=void 0===l.maxZoom?n:Math.max(n,l.maxZoom)}this._layersMaxZoom=n===-1/0?void 0:n,
this._layersMinZoom=t===1/0?void 0:t,e!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var c="_leaflet_events";a.DomEvent={on:function(t,n,e,i){if("object"==typeof n)for(var l in n)this._on(t,l,n[l],e);else{n=a.Util.splitWords(n);for(var o=0,s=n.length;o<s;o++)this._on(t,n[o],e,i)}return this},off:function(t,n,e,i){if("object"==typeof n)for(var l in n)this._off(t,l,n[l],e);else{n=a.Util.splitWords(n);for(var o=0,s=n.length;o<s;o++)this._off(t,n[o],e,i)}return this},_on:function(t,n,e,i){var l=n+a.stamp(e)+(i?"_"+a.stamp(i):"");if(t[c]&&t[c][l])return this;var s=function(n){return e.call(i||t,n||o.event)},r=s;return a.Browser.pointer&&0===n.indexOf("touch")?this.addPointerListener(t,n,s,l):!a.Browser.touch||"dblclick"!==n||!this.addDoubleTapListener||a.Browser.pointer&&a.Browser.chrome?"addEventListener"in t?"mousewheel"===n?t.addEventListener("onwheel"in t?"wheel":"mousewheel",s,!1):"mouseenter"===n||"mouseleave"===n?(s=function(n){n=n||o.event,a.DomEvent._isExternalTarget(t,n)&&r(n)},t.addEventListener("mouseenter"===n?"mouseover":"mouseout",s,!1)):("click"===n&&a.Browser.android&&(s=function(t){return a.DomEvent._filterClick(t,r)}),t.addEventListener(n,s,!1)):"attachEvent"in t&&t.attachEvent("on"+n,s):this.addDoubleTapListener(t,s,l),t[c]=t[c]||{},t[c][l]=s,this},_off:function(t,n,e,i){var l=n+a.stamp(e)+(i?"_"+a.stamp(i):""),o=t[c]&&t[c][l];return o?(a.Browser.pointer&&0===n.indexOf("touch")?this.removePointerListener(t,n,l):a.Browser.touch&&"dblclick"===n&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,l):"removeEventListener"in t?"mousewheel"===n?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",o,!1):t.removeEventListener("mouseenter"===n?"mouseover":"mouseleave"===n?"mouseout":n,o,!1):"detachEvent"in t&&t.detachEvent("on"+n,o),t[c][l]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,a.DomEvent._skipped(t),this},disableScrollPropagation:function(t){return a.DomEvent.on(t,"mousewheel",a.DomEvent.stopPropagation)},disableClickPropagation:function(t){var n=a.DomEvent.stopPropagation;return a.DomEvent.on(t,a.Draggable.START.join(" "),n),a.DomEvent.on(t,{click:a.DomEvent._fakeStop,dblclick:n})},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return a.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,n){if(!n)return new a.Point(t.clientX,t.clientY);var e=n.getBoundingClientRect();return new a.Point(t.clientX-e.left-n.clientLeft,t.clientY-e.top-n.clientTop)},_wheelPxFactor:a.Browser.win&&a.Browser.chrome?2:a.Browser.gecko?o.devicePixelRatio:1,getWheelDelta:function(t){return a.Browser.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/a.DomEvent._wheelPxFactor:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0},_skipEvents:{},_fakeStop:function(t){a.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var n=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,n},_isExternalTarget:function(t,n){var e=n.relatedTarget;if(!e)return!0;try{for(;e&&e!==t;)e=e.parentNode}catch(t){return!1}return e!==t},_filterClick:function(t,n){var e=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,i=a.DomEvent._lastClick&&e-a.DomEvent._lastClick;if(i&&i>100&&i<500||t.target._simulatedClick&&!t._simulated)return void a.DomEvent.stop(t);a.DomEvent._lastClick=e,n(t)}},a.DomEvent.addListener=a.DomEvent.on,a.DomEvent.removeListener=a.DomEvent.off,a.PosAnimation=a.Evented.extend({run:function(t,n,e,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=e||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=a.DomUtil.getPosition(t),this._offset=n.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=a.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(t){var n=+new Date-this._startTime,e=1e3*this._duration;n<e?this._runFrame(this._easeOut(n/e),t):(this._runFrame(1),this._complete())},_runFrame:function(t,n){var e=this._startPos.add(this._offset.multiplyBy(t));n&&e._round(),a.DomUtil.setPosition(this._el,e),this.fire("step")},_complete:function(){a.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),a.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:a.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var n=Math.PI/180,e=this.R,i=t.lat*n,l=this.R_MINOR/e,o=Math.sqrt(1-l*l),s=o*Math.sin(i),r=Math.tan(Math.PI/4-i/2)/Math.pow((1-s)/(1+s),o/2);return i=-e*Math.log(Math.max(r,1e-10)),new a.Point(t.lng*n*e,i)},unproject:function(t){for(var n,e=180/Math.PI,i=this.R,l=this.R_MINOR/i,o=Math.sqrt(1-l*l),s=Math.exp(-t.y/i),r=Math.PI/2-2*Math.atan(s),u=0,c=.1;u<15&&Math.abs(c)>1e-7;u++)n=o*Math.sin(r),n=Math.pow((1-n)/(1+n),o/2),c=Math.PI/2-2*Math.atan(s*n)-r,r+=c;return new a.LatLng(r*e,t.x*e/i)}},a.CRS.EPSG3395=a.extend({},a.CRS.Earth,{code:"EPSG:3395",projection:a.Projection.Mercator,transformation:function(){var t=.5/(Math.PI*a.Projection.Mercator.R);return new a.Transformation(t,.5,-t,.5)}()}),a.GridLayer=a.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:a.Browser.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){a.setOptions(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),a.DomUtil.remove(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(a.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(a.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return s.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof a.Point?t:new a.Point(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var n,e=this.getPane().children,i=-t(-1/0,1/0),l=0,o=e.length;l<o;l++)n=e[l].style.zIndex,e[l]!==this._container&&n&&(i=t(i,+n));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!a.Browser.ielt9){a.DomUtil.setOpacity(this._container,this.options.opacity);var t=+new Date,n=!1,e=!1;for(var i in this._tiles){var l=this._tiles[i];if(l.current&&l.loaded){var o=Math.min(1,(t-l.loaded)/200);a.DomUtil.setOpacity(l.el,o),o<1?n=!0:(l.active&&(e=!0),l.active=!0)}}e&&!this._noPrune&&this._pruneTiles(),n&&(a.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=a.Util.requestAnimFrame(this._updateOpacity,this))}},_initContainer:function(){this._container||(this._container=a.DomUtil.create("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,n=this.options.maxZoom;if(void 0!==t){for(var e in this._levels)this._levels[e].el.children.length||e===t?this._levels[e].el.style.zIndex=n-Math.abs(t-e):(a.DomUtil.remove(this._levels[e].el),this._removeTilesAtZoom(e),delete this._levels[e]);var i=this._levels[t],l=this._map;return i||(i=this._levels[t]={},i.el=a.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=n,i.origin=l.project(l.unproject(l.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,l.getCenter(),l.getZoom()),a.Util.falseFn(i.el.offsetWidth)),this._level=i,i}},_pruneTiles:function(){if(this._map){var t,n,e=this._map.getZoom();if(e>this.options.maxZoom||e<this.options.minZoom)return void this._removeAllTiles();for(t in this._tiles)n=this._tiles[t],n.retain=n.current;for(t in this._tiles)if(n=this._tiles[t],n.current&&!n.active){var i=n.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var n in this._tiles)this._tiles[n].coords.z===t&&this._removeTile(n)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)a.DomUtil.remove(this._levels[t].el),delete this._levels[t];this._removeAllTiles(),this._tileZoom=null},_retainParent:function(t,n,e,i){var l=Math.floor(t/2),o=Math.floor(n/2),s=e-1,r=new a.Point(+l,+o);r.z=+s;var u=this._tileCoordsToKey(r),c=this._tiles[u];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),s>i&&this._retainParent(l,o,s,i))},_retainChildren:function(t,n,e,i){for(var l=2*t;l<2*t+2;l++)for(var o=2*n;o<2*n+2;o++){var s=new a.Point(l,o);s.z=e+1;var r=this._tileCoordsToKey(s),u=this._tiles[r];u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),e+1<i&&this._retainChildren(l,o,e+1,i))}},_resetView:function(t){var n=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),n,n)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_setView:function(t,n,e,i){var l=Math.round(n);(void 0!==this.options.maxZoom&&l>this.options.maxZoom||void 0!==this.options.minZoom&&l<this.options.minZoom)&&(l=void 0);var o=this.options.updateWhenZooming&&l!==this._tileZoom;i&&!o||(this._tileZoom=l,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==l&&this._update(t),e||this._pruneTiles(),this._noPrune=!!e),this._setZoomTransforms(t,n)},_setZoomTransforms:function(t,n){for(var e in this._levels)this._setZoomTransform(this._levels[e],t,n)},_setZoomTransform:function(t,n,e){var i=this._map.getZoomScale(e,t.zoom),l=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(n,e)).round();a.Browser.any3d?a.DomUtil.setTransform(t.el,l,i):a.DomUtil.setPosition(t.el,l)},_resetGrid:function(){var t=this._map,n=t.options.crs,e=this._tileSize=this.getTileSize(),i=this._tileZoom,l=this._map.getPixelWorldBounds(this._tileZoom);l&&(this._globalTileRange=this._pxBoundsToTileRange(l)),this._wrapX=n.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,n.wrapLng[0]],i).x/e.x),Math.ceil(t.project([0,n.wrapLng[1]],i).x/e.y)],this._wrapY=n.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([n.wrapLat[0],0],i).y/e.x),Math.ceil(t.project([n.wrapLat[1],0],i).y/e.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var n=this._map,e=n._animatingZoom?Math.max(n._animateToZoom,n.getZoom()):n.getZoom(),i=n.getZoomScale(e,this._tileZoom),l=n.project(t,this._tileZoom).floor(),o=n.getSize().divideBy(2*i);return new a.Bounds(l.subtract(o),l.add(o))},_update:function(t){var n=this._map;if(n){var e=n.getZoom();if(void 0===t&&(t=n.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(t),l=this._pxBoundsToTileRange(i),o=l.getCenter(),r=[],u=this.options.keepBuffer,c=new a.Bounds(l.getBottomLeft().subtract([u,-u]),l.getTopRight().add([u,-u]));for(var h in this._tiles){var _=this._tiles[h].coords;_.z===this._tileZoom&&c.contains(a.point(_.x,_.y))||(this._tiles[h].current=!1)}if(Math.abs(e-this._tileZoom)>1)return void this._setView(t,e);for(var p=l.min.y;p<=l.max.y;p++)for(var d=l.min.x;d<=l.max.x;d++){var m=new a.Point(d,p);if(m.z=this._tileZoom,this._isValidTile(m)){var f=this._tiles[this._tileCoordsToKey(m)];f?f.current=!0:r.push(m)}}if(r.sort(function(t,n){return t.distanceTo(o)-n.distanceTo(o)}),0!==r.length){this._loading||(this._loading=!0,this.fire("loading"));var g=s.createDocumentFragment();for(d=0;d<r.length;d++)this._addTile(r[d],g);this._level.el.appendChild(g)}}}},_isValidTile:function(t){var n=this._map.options.crs;if(!n.infinite){var e=this._globalTileRange;if(!n.wrapLng&&(t.x<e.min.x||t.x>e.max.x)||!n.wrapLat&&(t.y<e.min.y||t.y>e.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return a.latLngBounds(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToBounds:function(t){var n=this._map,e=this.getTileSize(),i=t.scaleBy(e),l=i.add(e),o=n.unproject(i,t.z),s=n.unproject(l,t.z),r=new a.LatLngBounds(o,s);return this.options.noWrap||n.wrapLatLngBounds(r),r},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var n=t.split(":"),e=new a.Point(+n[0],+n[1]);return e.z=+n[2],e},_removeTile:function(t){var n=this._tiles[t];n&&(a.DomUtil.remove(n.el),delete this._tiles[t],this.fire("tileunload",{tile:n.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){a.DomUtil.addClass(t,"leaflet-tile");var n=this.getTileSize();t.style.width=n.x+"px",t.style.height=n.y+"px",t.onselectstart=a.Util.falseFn,t.onmousemove=a.Util.falseFn,a.Browser.ielt9&&this.options.opacity<1&&a.DomUtil.setOpacity(t,this.options.opacity),a.Browser.android&&!a.Browser.android23&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,n){var e=this._getTilePos(t),i=this._tileCoordsToKey(t),l=this.createTile(this._wrapCoords(t),a.bind(this._tileReady,this,t));this._initTile(l),this.createTile.length<2&&a.Util.requestAnimFrame(a.bind(this._tileReady,this,t,null,l)),a.DomUtil.setPosition(l,e),this._tiles[i]={el:l,coords:t,current:!0},n.appendChild(l),this.fire("tileloadstart",{tile:l,coords:t})},_tileReady:function(t,n,e){if(this._map){n&&this.fire("tileerror",{error:n,tile:e,coords:t});var i=this._tileCoordsToKey(t);e=this._tiles[i],e&&(e.loaded=+new Date,this._map._fadeAnimated?(a.DomUtil.setOpacity(e.el,0),a.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=a.Util.requestAnimFrame(this._updateOpacity,this)):(e.active=!0,this._pruneTiles()),n||(a.DomUtil.addClass(e.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:e.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),a.Browser.ielt9||!this._map._fadeAnimated?a.Util.requestAnimFrame(this._pruneTiles,this):setTimeout(a.bind(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var n=new a.Point(this._wrapX?a.Util.wrapNum(t.x,this._wrapX):t.x,this._wrapY?a.Util.wrapNum(t.y,this._wrapY):t.y);return n.z=t.z,n},_pxBoundsToTileRange:function(t){var n=this.getTileSize();return new a.Bounds(t.min.unscaleBy(n).floor(),t.max.unscaleBy(n).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),a.gridLayer=function(t){return new a.GridLayer(t)},a.TileLayer=a.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,minNativeZoom:null,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,n){this._url=t,n=a.setOptions(this,n),n.detectRetina&&a.Browser.retina&&n.maxZoom>0&&(n.tileSize=Math.floor(n.tileSize/2),n.zoomReverse?(n.zoomOffset--,n.minZoom++):(n.zoomOffset++,n.maxZoom--),n.minZoom=Math.max(0,n.minZoom)),"string"==typeof n.subdomains&&(n.subdomains=n.subdomains.split("")),a.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(t,n){return this._url=t,n||this.redraw(),this},createTile:function(t,n){var e=s.createElement("img");return a.DomEvent.on(e,"load",a.bind(this._tileOnLoad,this,n,e)),a.DomEvent.on(e,"error",a.bind(this._tileOnError,this,n,e)),this.options.crossOrigin&&(e.crossOrigin=""),e.alt="",e.setAttribute("role","presentation"),e.src=this.getTileUrl(t),e},getTileUrl:function(t){var n={r:a.Browser.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var e=this._globalTileRange.max.y-t.y;this.options.tms&&(n.y=e),n["-y"]=e}return a.Util.template(this._url,a.extend(n,this.options))},_tileOnLoad:function(t,n){a.Browser.ielt9?setTimeout(a.bind(t,this,null,n),0):t(null,n)},_tileOnError:function(t,n,e){var i=this.options.errorTileUrl;i&&n.src!==i&&(n.src=i),t(e,n)},getTileSize:function(){var t=this._map,n=a.GridLayer.prototype.getTileSize.call(this),e=this._tileZoom+this.options.zoomOffset,i=this.options.minNativeZoom,l=this.options.maxNativeZoom;return null!==i&&e<i?n.divideBy(t.getZoomScale(i,e)).round():null!==l&&e>l?n.divideBy(t.getZoomScale(l,e)).round():n},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,n=this.options.maxZoom,e=this.options.zoomReverse,i=this.options.zoomOffset,l=this.options.minNativeZoom,o=this.options.maxNativeZoom;return e&&(t=n-t),t+=i,null!==l&&t<l?l:null!==o&&t>o?o:t},_getSubdomain:function(t){var n=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[n]},_abortLoading:function(){var t,n;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&(n=this._tiles[t].el,n.onload=a.Util.falseFn,n.onerror=a.Util.falseFn,n.complete||(n.src=a.Util.emptyImageUrl,a.DomUtil.remove(n)))}}),a.tileLayer=function(t,n){return new a.TileLayer(t,n)},a.TileLayer.WMS=a.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,n){this._url=t;var e=a.extend({},this.defaultWmsParams);for(var i in n)i in this.options||(e[i]=n[i]);n=a.setOptions(this,n),e.width=e.height=n.tileSize*(n.detectRetina&&a.Browser.retina?2:1),this.wmsParams=e},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var n=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[n]=this._crs.code,a.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var n=this._tileCoordsToBounds(t),e=this._crs.project(n.getNorthWest()),i=this._crs.project(n.getSouthEast()),l=(this._wmsVersion>=1.3&&this._crs===a.CRS.EPSG4326?[i.y,e.x,e.y,i.x]:[e.x,i.y,i.x,e.y]).join(","),o=a.TileLayer.prototype.getTileUrl.call(this,t);return o+a.Util.getParamString(this.wmsParams,o,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+l},setParams:function(t,n){return a.extend(this.wmsParams,t),n||this.redraw(),this}}),a.tileLayer.wms=function(t,n){return new a.TileLayer.WMS(t,n)},a.ImageOverlay=a.Layer.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1},initialize:function(t,n,e){this._url=t,this._bounds=a.latLngBounds(n),a.setOptions(this,e)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(a.DomUtil.addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){a.DomUtil.remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&a.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&a.DomUtil.toBack(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=t,this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._image=a.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));t.onselectstart=a.Util.falseFn,t.onmousemove=a.Util.falseFn,t.onload=a.bind(this.fire,this,"load"),this.options.crossOrigin&&(t.crossOrigin=""),t.src=this._url,t.alt=this.options.alt},_animateZoom:function(t){var n=this._map.getZoomScale(t.zoom),e=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;a.DomUtil.setTransform(this._image,e,n)},_reset:function(){var t=this._image,n=new a.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),e=n.getSize();a.DomUtil.setPosition(t,n.min),t.style.width=e.x+"px",t.style.height=e.y+"px"},_updateOpacity:function(){a.DomUtil.setOpacity(this._image,this.options.opacity)}}),a.imageOverlay=function(t,n,e){return new a.ImageOverlay(t,n,e)},a.Icon=a.Class.extend({initialize:function(t){a.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,n){var e=this._getIconUrl(t);if(!e){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(e,n&&"IMG"===n.tagName?n:null);return this._setIconStyles(i,t),i},_setIconStyles:function(t,n){var e=this.options,i=e[n+"Size"];"number"==typeof i&&(i=[i,i]);var l=a.point(i),o=a.point("shadow"===n&&e.shadowAnchor||e.iconAnchor||l&&l.divideBy(2,!0));t.className="leaflet-marker-"+n+" "+(e.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),l&&(t.style.width=l.x+"px",t.style.height=l.y+"px")},_createImg:function(t,n){return n=n||s.createElement("img"),n.src=t,n},_getIconUrl:function(t){return a.Browser.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),a.icon=function(t){return new a.Icon(t)},a.Icon.Default=a.Icon.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return a.Icon.Default.imagePath||(a.Icon.Default.imagePath=this._detectIconPath()),(this.options.imagePath||a.Icon.Default.imagePath)+a.Icon.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=a.DomUtil.create("div","leaflet-default-icon-path",s.body),n=a.DomUtil.getStyle(t,"background-image")||a.DomUtil.getStyle(t,"backgroundImage");return s.body.removeChild(t),0===n.indexOf("url")?n.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,""):""}}),a.Marker=a.Layer.extend({options:{icon:new a.Icon.Default,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"]},initialize:function(t,n){a.setOptions(this,n),this._latlng=a.latLng(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var n=this._latlng;return this._latlng=a.latLng(t),this.update(),this.fire("move",{oldLatLng:n,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,n="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),e=t.icon.createIcon(this._icon),i=!1;e!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(e.title=t.title),t.alt&&(e.alt=t.alt)),a.DomUtil.addClass(e,n),t.keyboard&&(e.tabIndex="0"),this._icon=e,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var l=t.icon.createShadow(this._shadow),o=!1;l!==this._shadow&&(this._removeShadow(),o=!0),l&&(a.DomUtil.addClass(l,n),l.alt=""),this._shadow=l,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),l&&o&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),a.DomUtil.remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&a.DomUtil.remove(this._shadow),this._shadow=null},_setPos:function(t){a.DomUtil.setPosition(this._icon,t),this._shadow&&a.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var n=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(n)},_initInteraction:function(){if(this.options.interactive&&(a.DomUtil.addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),a.Handler.MarkerDrag)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new a.Handler.MarkerDrag(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;a.DomUtil.setOpacity(this._icon,t),this._shadow&&a.DomUtil.setOpacity(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}}),a.marker=function(t,n){return new a.Marker(t,n)},a.DivIcon=a.Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var n=t&&"DIV"===t.tagName?t:s.createElement("div"),e=this.options;if(n.innerHTML=!1!==e.html?e.html:"",e.bgPos){var i=a.point(e.bgPos);n.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(n,"icon"),n},createShadow:function(){return null}}),a.divIcon=function(t){return new a.DivIcon(t)},a.DivOverlay=a.Layer.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,n){a.setOptions(this,t),this._source=n},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&a.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&a.DomUtil.setOpacity(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(a.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(a.bind(a.DomUtil.remove,a.DomUtil,this._container),200)):a.DomUtil.remove(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=a.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&a.DomUtil.toFront(this._container),this},bringToBack:function(){return this._map&&a.DomUtil.toBack(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,n="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof n)t.innerHTML=n;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(n)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),n=a.point(this.options.offset),e=this._getAnchor();this._zoomAnimated?a.DomUtil.setPosition(this._container,t.add(e)):n=n.add(t).add(e);var i=this._containerBottom=-n.y,l=this._containerLeft=-Math.round(this._containerWidth/2)+n.x;this._container.style.bottom=i+"px",this._container.style.left=l+"px"}},_getAnchor:function(){return[0,0]}}),a.Popup=a.DivOverlay.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){a.DivOverlay.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof a.Path||this._source.on("preclick",a.DomEvent.stopPropagation))},onRemove:function(t){a.DivOverlay.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof a.Path||this._source.off("preclick",a.DomEvent.stopPropagation))},getEvents:function(){var t=a.DivOverlay.prototype.getEvents.call(this);return("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",n=this._container=a.DomUtil.create("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated");if(this.options.closeButton){var e=this._closeButton=a.DomUtil.create("a",t+"-close-button",n);e.href="#close",e.innerHTML="&#215;",a.DomEvent.on(e,"click",this._onCloseButtonClick,this)}var i=this._wrapper=a.DomUtil.create("div",t+"-content-wrapper",n);this._contentNode=a.DomUtil.create("div",t+"-content",i),a.DomEvent.disableClickPropagation(i).disableScrollPropagation(this._contentNode).on(i,"contextmenu",a.DomEvent.stopPropagation),this._tipContainer=a.DomUtil.create("div",t+"-tip-container",n),this._tip=a.DomUtil.create("div",t+"-tip",this._tipContainer)},_updateLayout:function(){var t=this._contentNode,n=t.style;n.width="",n.whiteSpace="nowrap";var e=t.offsetWidth;e=Math.min(e,this.options.maxWidth),e=Math.max(e,this.options.minWidth),n.width=e+1+"px",n.whiteSpace="",n.height="";var i=t.offsetHeight,l=this.options.maxHeight;l&&i>l?(n.height=l+"px",a.DomUtil.addClass(t,"leaflet-popup-scrolled")):a.DomUtil.removeClass(t,"leaflet-popup-scrolled"),
this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var n=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),e=this._getAnchor();a.DomUtil.setPosition(this._container,n.add(e))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,n=parseInt(a.DomUtil.getStyle(this._container,"marginBottom"),10)||0,e=this._container.offsetHeight+n,i=this._containerWidth,l=new a.Point(this._containerLeft,-e-this._containerBottom);l._add(a.DomUtil.getPosition(this._container));var o=t.layerPointToContainerPoint(l),s=a.point(this.options.autoPanPadding),r=a.point(this.options.autoPanPaddingTopLeft||s),u=a.point(this.options.autoPanPaddingBottomRight||s),c=t.getSize(),h=0,_=0;o.x+i+u.x>c.x&&(h=o.x+i-c.x+u.x),o.x-h-r.x<0&&(h=o.x-r.x),o.y+e+u.y>c.y&&(_=o.y+e-c.y+u.y),o.y-_-r.y<0&&(_=o.y-r.y),(h||_)&&t.fire("autopanstart").panBy([h,_])}},_onCloseButtonClick:function(t){this._close(),a.DomEvent.stop(t)},_getAnchor:function(){return a.point(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),a.popup=function(t,n){return new a.Popup(t,n)},a.Map.mergeOptions({closePopupOnClick:!0}),a.Map.include({openPopup:function(t,n,e){return t instanceof a.Popup||(t=new a.Popup(e).setContent(t)),n&&t.setLatLng(n),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),a.Layer.include({bindPopup:function(t,n){return t instanceof a.Popup?(a.setOptions(t,n),this._popup=t,t._source=this):(this._popup&&!n||(this._popup=new a.Popup(n,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,n){if(t instanceof a.Layer||(n=t,t=this),t instanceof a.FeatureGroup)for(var e in this._layers){t=this._layers[e];break}return n||(n=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,n)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var n=t.layer||t.target;if(this._popup&&this._map){if(a.DomEvent.stop(t),n instanceof a.Path)return void this.openPopup(t.layer||t.target,t.latlng);this._map.hasLayer(this._popup)&&this._popup._source===n?this.closePopup():this.openPopup(n,t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),a.Tooltip=a.DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){a.DivOverlay.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){a.DivOverlay.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=a.DivOverlay.prototype.getEvents.call(this);return a.Browser.touch&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=a.DomUtil.create("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var n=this._map,e=this._container,i=n.latLngToContainerPoint(n.getCenter()),l=n.layerPointToContainerPoint(t),o=this.options.direction,s=e.offsetWidth,r=e.offsetHeight,u=a.point(this.options.offset),c=this._getAnchor();"top"===o?t=t.add(a.point(-s/2+u.x,-r+u.y+c.y,!0)):"bottom"===o?t=t.subtract(a.point(s/2-u.x,-u.y,!0)):"center"===o?t=t.subtract(a.point(s/2+u.x,r/2-c.y+u.y,!0)):"right"===o||"auto"===o&&l.x<i.x?(o="right",t=t.add(a.point(u.x+c.x,c.y-r/2+u.y,!0))):(o="left",t=t.subtract(a.point(s+c.x-u.x,r/2-c.y-u.y,!0))),a.DomUtil.removeClass(e,"leaflet-tooltip-right"),a.DomUtil.removeClass(e,"leaflet-tooltip-left"),a.DomUtil.removeClass(e,"leaflet-tooltip-top"),a.DomUtil.removeClass(e,"leaflet-tooltip-bottom"),a.DomUtil.addClass(e,"leaflet-tooltip-"+o),a.DomUtil.setPosition(e,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&a.DomUtil.setOpacity(this._container,t)},_animateZoom:function(t){var n=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(n)},_getAnchor:function(){return a.point(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),a.tooltip=function(t,n){return new a.Tooltip(t,n)},a.Map.include({openTooltip:function(t,n,e){return t instanceof a.Tooltip||(t=new a.Tooltip(e).setContent(t)),n&&t.setLatLng(n),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),a.Layer.include({bindTooltip:function(t,n){return t instanceof a.Tooltip?(a.setOptions(t,n),this._tooltip=t,t._source=this):(this._tooltip&&!n||(this._tooltip=a.tooltip(n,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var n=t?"off":"on",e={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?e.add=this._openTooltip:(e.mouseover=this._openTooltip,e.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(e.mousemove=this._moveTooltip),a.Browser.touch&&(e.click=this._openTooltip)),this[n](e),this._tooltipHandlersAdded=!t}},openTooltip:function(t,n){if(t instanceof a.Layer||(n=t,t=this),t instanceof a.FeatureGroup)for(var e in this._layers){t=this._layers[e];break}return n||(n=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,n),this._tooltip.options.interactive&&this._tooltip._container&&(a.DomUtil.addClass(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(a.DomUtil.removeClass(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var n=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(n,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var n,e,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(n=this._map.mouseEventToContainerPoint(t.originalEvent),e=this._map.containerPointToLayerPoint(n),i=this._map.layerPointToLatLng(e)),this._tooltip.setLatLng(i)}}),a.LayerGroup=a.Layer.extend({initialize:function(t){this._layers={};var n,e;if(t)for(n=0,e=t.length;n<e;n++)this.addLayer(t[n])},addLayer:function(t){var n=this.getLayerId(t);return this._layers[n]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var n=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[n]&&this._map.removeLayer(this._layers[n]),delete this._layers[n],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){for(var t in this._layers)this.removeLayer(this._layers[t]);return this},invoke:function(t){var n,e,i=Array.prototype.slice.call(arguments,1);for(n in this._layers)e=this._layers[n],e[t]&&e[t].apply(e,i);return this},onAdd:function(t){for(var n in this._layers)t.addLayer(this._layers[n])},onRemove:function(t){for(var n in this._layers)t.removeLayer(this._layers[n])},eachLayer:function(t,n){for(var e in this._layers)t.call(n,this._layers[e]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var n in this._layers)t.push(this._layers[n]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return a.stamp(t)}}),a.layerGroup=function(t){return new a.LayerGroup(t)},a.FeatureGroup=a.LayerGroup.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),a.LayerGroup.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),a.LayerGroup.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new a.LatLngBounds;for(var n in this._layers){var e=this._layers[n];t.extend(e.getBounds?e.getBounds():e.getLatLng())}return t}}),a.featureGroup=function(t){return new a.FeatureGroup(t)},a.Renderer=a.Layer.extend({options:{padding:.1},initialize:function(t){a.setOptions(this,t),a.stamp(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&a.DomUtil.addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){a.DomUtil.remove(this._container),this.off("update",this._updatePaths,this)},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,n){var e=this._map.getZoomScale(n,this._zoom),i=a.DomUtil.getPosition(this._container),l=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,n),s=this._map.project(t,n),r=s.subtract(o),u=l.multiplyBy(-e).add(i).add(l).subtract(r);a.Browser.any3d?a.DomUtil.setTransform(this._container,u,e):a.DomUtil.setPosition(this._container,u)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,n=this._map.getSize(),e=this._map.containerPointToLayerPoint(n.multiplyBy(-t)).round();this._bounds=new a.Bounds(e,e.add(n.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),a.Map.include({getRenderer:function(t){var n=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return n||(n=this._renderer=this.options.preferCanvas&&a.canvas()||a.svg()),this.hasLayer(n)||this.addLayer(n),n},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var n=this._paneRenderers[t];return void 0===n&&(n=a.SVG&&a.svg({pane:t})||a.Canvas&&a.canvas({pane:t}),this._paneRenderers[t]=n),n}}),a.Path=a.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return a.setOptions(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(a.Browser.touch?10:0)}}),a.LineUtil={simplify:function(t,n){if(!n||!t.length)return t.slice();var e=n*n;return t=this._reducePoints(t,e),t=this._simplifyDP(t,e)},pointToSegmentDistance:function(t,n,e){return Math.sqrt(this._sqClosestPointOnSegment(t,n,e,!0))},closestPointOnSegment:function(t,n,e){return this._sqClosestPointOnSegment(t,n,e)},_simplifyDP:function(t,n){var e=t.length,i=typeof Uint8Array!=void 0+""?Uint8Array:Array,l=new i(e);l[0]=l[e-1]=1,this._simplifyDPStep(t,l,n,0,e-1);var o,s=[];for(o=0;o<e;o++)l[o]&&s.push(t[o]);return s},_simplifyDPStep:function(t,n,e,i,l){var o,s,r,a=0;for(s=i+1;s<=l-1;s++)(r=this._sqClosestPointOnSegment(t[s],t[i],t[l],!0))>a&&(o=s,a=r);a>e&&(n[o]=1,this._simplifyDPStep(t,n,e,i,o),this._simplifyDPStep(t,n,e,o,l))},_reducePoints:function(t,n){for(var e=[t[0]],i=1,l=0,o=t.length;i<o;i++)this._sqDist(t[i],t[l])>n&&(e.push(t[i]),l=i);return l<o-1&&e.push(t[o-1]),e},clipSegment:function(t,n,e,i,l){var o,s,r,a=i?this._lastCode:this._getBitCode(t,e),u=this._getBitCode(n,e);for(this._lastCode=u;;){if(!(a|u))return[t,n];if(a&u)return!1;o=a||u,s=this._getEdgeIntersection(t,n,o,e,l),r=this._getBitCode(s,e),o===a?(t=s,a=r):(n=s,u=r)}},_getEdgeIntersection:function(t,n,e,i,l){var o,s,r=n.x-t.x,u=n.y-t.y,c=i.min,h=i.max;return 8&e?(o=t.x+r*(h.y-t.y)/u,s=h.y):4&e?(o=t.x+r*(c.y-t.y)/u,s=c.y):2&e?(o=h.x,s=t.y+u*(h.x-t.x)/r):1&e&&(o=c.x,s=t.y+u*(c.x-t.x)/r),new a.Point(o,s,l)},_getBitCode:function(t,n){var e=0;return t.x<n.min.x?e|=1:t.x>n.max.x&&(e|=2),t.y<n.min.y?e|=4:t.y>n.max.y&&(e|=8),e},_sqDist:function(t,n){var e=n.x-t.x,i=n.y-t.y;return e*e+i*i},_sqClosestPointOnSegment:function(t,n,e,i){var l,o=n.x,s=n.y,r=e.x-o,u=e.y-s,c=r*r+u*u;return c>0&&(l=((t.x-o)*r+(t.y-s)*u)/c,l>1?(o=e.x,s=e.y):l>0&&(o+=r*l,s+=u*l)),r=t.x-o,u=t.y-s,i?r*r+u*u:new a.Point(o,s)}},a.Polyline=a.Path.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,n){a.setOptions(this,n),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var n,e,i=1/0,l=null,o=a.LineUtil._sqClosestPointOnSegment,s=0,r=this._parts.length;s<r;s++)for(var u=this._parts[s],c=1,h=u.length;c<h;c++){n=u[c-1],e=u[c];var _=o(t,n,e,!0);_<i&&(i=_,l=o(t,n,e))}return l&&(l.distance=Math.sqrt(i)),l},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,n,e,i,l,o,s,r=this._rings[0],a=r.length;if(!a)return null;for(t=0,n=0;t<a-1;t++)n+=r[t].distanceTo(r[t+1])/2;if(0===n)return this._map.layerPointToLatLng(r[0]);for(t=0,i=0;t<a-1;t++)if(l=r[t],o=r[t+1],e=l.distanceTo(o),(i+=e)>n)return s=(i-n)/e,this._map.layerPointToLatLng([o.x-s*(o.x-l.x),o.y-s*(o.y-l.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,n){return n=n||this._defaultShape(),t=a.latLng(t),n.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new a.LatLngBounds,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return a.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var n=[],e=a.Polyline._flat(t),i=0,l=t.length;i<l;i++)e?(n[i]=a.latLng(t[i]),this._bounds.extend(n[i])):n[i]=this._convertLatLngs(t[i]);return n},_project:function(){var t=new a.Bounds;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var n=this._clickTolerance(),e=new a.Point(n,n);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(e),t.max._add(e),this._pxBounds=t)},_projectLatlngs:function(t,n,e){var i,l,o=t[0]instanceof a.LatLng,s=t.length;if(o){for(l=[],i=0;i<s;i++)l[i]=this._map.latLngToLayerPoint(t[i]),e.extend(l[i]);n.push(l)}else for(i=0;i<s;i++)this._projectLatlngs(t[i],n,e)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);var n,e,i,l,o,s,r,u=this._parts;for(n=0,i=0,l=this._rings.length;n<l;n++)for(r=this._rings[n],e=0,o=r.length;e<o-1;e++)(s=a.LineUtil.clipSegment(r[e],r[e+1],t,e,!0))&&(u[i]=u[i]||[],u[i].push(s[0]),s[1]===r[e+1]&&e!==o-2||(u[i].push(s[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,n=this.options.smoothFactor,e=0,i=t.length;e<i;e++)t[e]=a.LineUtil.simplify(t[e],n)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}}),a.polyline=function(t,n){return new a.Polyline(t,n)},a.Polyline._flat=function(t){return!a.Util.isArray(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]},a.PolyUtil={},a.PolyUtil.clipPolygon=function(t,n,e){var i,l,o,s,r,u,c,h,_,p=[1,4,2,8],d=a.LineUtil;for(l=0,c=t.length;l<c;l++)t[l]._code=d._getBitCode(t[l],n);for(s=0;s<4;s++){for(h=p[s],i=[],l=0,c=t.length,o=c-1;l<c;o=l++)r=t[l],u=t[o],r._code&h?u._code&h||(_=d._getEdgeIntersection(u,r,h,n,e),_._code=d._getBitCode(_,n),i.push(_)):(u._code&h&&(_=d._getEdgeIntersection(u,r,h,n,e),_._code=d._getBitCode(_,n),i.push(_)),i.push(r));t=i}return t},a.Polygon=a.Polyline.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,n,e,i,l,o,s,r,a,u=this._rings[0],c=u.length;if(!c)return null;for(o=s=r=0,t=0,n=c-1;t<c;n=t++)e=u[t],i=u[n],l=e.y*i.x-i.y*e.x,s+=(e.x+i.x)*l,r+=(e.y+i.y)*l,o+=3*l;return a=0===o?u[0]:[s/o,r/o],this._map.layerPointToLatLng(a)},_convertLatLngs:function(t){var n=a.Polyline.prototype._convertLatLngs.call(this,t),e=n.length;return e>=2&&n[0]instanceof a.LatLng&&n[0].equals(n[e-1])&&n.pop(),n},_setLatLngs:function(t){a.Polyline.prototype._setLatLngs.call(this,t),a.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return a.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,n=this.options.weight,e=new a.Point(n,n);if(t=new a.Bounds(t.min.subtract(e),t.max.add(e)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);for(var i,l=0,o=this._rings.length;l<o;l++)i=a.PolyUtil.clipPolygon(this._rings[l],t,!0),i.length&&this._parts.push(i)}},_updatePath:function(){this._renderer._updatePoly(this,!0)}}),a.polygon=function(t,n){return new a.Polygon(t,n)},a.Rectangle=a.Polygon.extend({initialize:function(t,n){a.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),n)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=a.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),a.rectangle=function(t,n){return new a.Rectangle(t,n)},a.CircleMarker=a.Path.extend({options:{fill:!0,radius:10},initialize:function(t,n){a.setOptions(this,n),this._latlng=a.latLng(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=a.latLng(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var n=t&&t.radius||this._radius;return a.Path.prototype.setStyle.call(this,t),this.setRadius(n),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,n=this._radiusY||t,e=this._clickTolerance(),i=[t+e,n+e];this._pxBounds=new a.Bounds(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}}),a.circleMarker=function(t,n){return new a.CircleMarker(t,n)},a.Circle=a.CircleMarker.extend({initialize:function(t,n,e){if("number"==typeof n&&(n=a.extend({},e,{radius:n})),a.setOptions(this,n),this._latlng=a.latLng(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new a.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:a.Path.prototype.setStyle,_project:function(){var t=this._latlng.lng,n=this._latlng.lat,e=this._map,i=e.options.crs;if(i.distance===a.CRS.Earth.distance){var l=Math.PI/180,o=this._mRadius/a.CRS.Earth.R/l,s=e.project([n+o,t]),r=e.project([n-o,t]),u=s.add(r).divideBy(2),c=e.unproject(u).lat,h=Math.acos((Math.cos(o*l)-Math.sin(n*l)*Math.sin(c*l))/(Math.cos(n*l)*Math.cos(c*l)))/l;(isNaN(h)||0===h)&&(h=o/Math.cos(Math.PI/180*n)),this._point=u.subtract(e.getPixelOrigin()),this._radius=isNaN(h)?0:Math.max(Math.round(u.x-e.project([c,t-h]).x),1),this._radiusY=Math.max(Math.round(u.y-s.y),1)}else{var _=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=e.latLngToLayerPoint(this._latlng),this._radius=this._point.x-e.latLngToLayerPoint(_).x}this._updateBounds()}}),a.circle=function(t,n,e){return new a.Circle(t,n,e)},a.SVG=a.Renderer.extend({getEvents:function(){var t=a.Renderer.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=a.SVG.create("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=a.SVG.create("g"),this._container.appendChild(this._rootGroup)},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){a.Renderer.prototype._update.call(this);var t=this._bounds,n=t.getSize(),e=this._container;this._svgSize&&this._svgSize.equals(n)||(this._svgSize=n,e.setAttribute("width",n.x),e.setAttribute("height",n.y)),a.DomUtil.setPosition(e,t.min),e.setAttribute("viewBox",[t.min.x,t.min.y,n.x,n.y].join(" ")),this.fire("update")}},_initPath:function(t){var n=t._path=a.SVG.create("path");t.options.className&&a.DomUtil.addClass(n,t.options.className),t.options.interactive&&a.DomUtil.addClass(n,"leaflet-interactive"),this._updateStyle(t),this._layers[a.stamp(t)]=t},_addPath:function(t){this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){a.DomUtil.remove(t._path),t.removeInteractiveTarget(t._path),delete this._layers[a.stamp(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var n=t._path,e=t.options;n&&(e.stroke?(n.setAttribute("stroke",e.color),n.setAttribute("stroke-opacity",e.opacity),n.setAttribute("stroke-width",e.weight),n.setAttribute("stroke-linecap",e.lineCap),n.setAttribute("stroke-linejoin",e.lineJoin),e.dashArray?n.setAttribute("stroke-dasharray",e.dashArray):n.removeAttribute("stroke-dasharray"),e.dashOffset?n.setAttribute("stroke-dashoffset",e.dashOffset):n.removeAttribute("stroke-dashoffset")):n.setAttribute("stroke","none"),e.fill?(n.setAttribute("fill",e.fillColor||e.color),n.setAttribute("fill-opacity",e.fillOpacity),n.setAttribute("fill-rule",e.fillRule||"evenodd")):n.setAttribute("fill","none"))},_updatePoly:function(t,n){this._setPath(t,a.SVG.pointsToPath(t._parts,n))},_updateCircle:function(t){var n=t._point,e=t._radius,i=t._radiusY||e,l="a"+e+","+i+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(n.x-e)+","+n.y+l+2*e+",0 "+l+2*-e+",0 ";this._setPath(t,o)},_setPath:function(t,n){t._path.setAttribute("d",n)},_bringToFront:function(t){a.DomUtil.toFront(t._path)},_bringToBack:function(t){a.DomUtil.toBack(t._path)}}),a.extend(a.SVG,{create:function(t){return s.createElementNS("http://www.w3.org/2000/svg",t)},pointsToPath:function(t,n){var e,i,l,o,s,r,u="";for(e=0,l=t.length;e<l;e++){for(s=t[e],i=0,o=s.length;i<o;i++)r=s[i],u+=(i?"L":"M")+r.x+" "+r.y;u+=n?a.Browser.svg?"z":"x":""}return u||"M0 0"}}),a.Browser.svg=!(!s.createElementNS||!a.SVG.create("svg").createSVGRect),a.svg=function(t){return a.Browser.svg||a.Browser.vml?new a.SVG(t):null},a.Browser.vml=!a.Browser.svg&&function(){try{var t=s.createElement("div");t.innerHTML='<v:shape adj="1"/>';var n=t.firstChild;return n.style.behavior="url(#default#VML)",n&&"object"==typeof n.adj}catch(t){return!1}}(),a.SVG.include(a.Browser.vml?{_initContainer:function(){this._container=a.DomUtil.create("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(a.Renderer.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var n=t._container=a.SVG.create("shape");a.DomUtil.addClass(n,"leaflet-vml-shape "+(this.options.className||"")),n.coordsize="1 1",t._path=a.SVG.create("path"),n.appendChild(t._path),this._updateStyle(t),this._layers[a.stamp(t)]=t},_addPath:function(t){var n=t._container;this._container.appendChild(n),t.options.interactive&&t.addInteractiveTarget(n)},_removePath:function(t){var n=t._container;a.DomUtil.remove(n),t.removeInteractiveTarget(n),delete this._layers[a.stamp(t)]},_updateStyle:function(t){var n=t._stroke,e=t._fill,i=t.options,l=t._container;l.stroked=!!i.stroke,l.filled=!!i.fill,i.stroke?(n||(n=t._stroke=a.SVG.create("stroke")),l.appendChild(n),n.weight=i.weight+"px",n.color=i.color,n.opacity=i.opacity,i.dashArray?n.dashStyle=a.Util.isArray(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):n.dashStyle="",n.endcap=i.lineCap.replace("butt","flat"),n.joinstyle=i.lineJoin):n&&(l.removeChild(n),t._stroke=null),i.fill?(e||(e=t._fill=a.SVG.create("fill")),l.appendChild(e),e.color=i.fillColor||i.color,e.opacity=i.fillOpacity):e&&(l.removeChild(e),t._fill=null)},_updateCircle:function(t){var n=t._point.round(),e=Math.round(t._radius),i=Math.round(t._radiusY||e);this._setPath(t,t._empty()?"M0 0":"AL "+n.x+","+n.y+" "+e+","+i+" 0,23592600")},_setPath:function(t,n){t._path.v=n},_bringToFront:function(t){a.DomUtil.toFront(t._container)},_bringToBack:function(t){a.DomUtil.toBack(t._container)}}:{}),a.Browser.vml&&(a.SVG.create=function(){try{return s.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return s.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return s.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),a.Canvas=a.Renderer.extend({getEvents:function(){var t=a.Renderer.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){a.Renderer.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=s.createElement("canvas");a.DomEvent.on(t,"mousemove",a.Util.throttle(this._onMouseMove,32,this),this).on(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var n in this._layers)t=this._layers[n],t._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},a.Renderer.prototype._update.call(this);var t=this._bounds,n=this._container,e=t.getSize(),i=a.Browser.retina?2:1;a.DomUtil.setPosition(n,t.min),n.width=i*e.x,n.height=i*e.y,n.style.width=e.x+"px",n.style.height=e.y+"px",a.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){a.Renderer.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[a.stamp(t)]=t;var n=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=n),this._drawLast=n,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var n=t._order,e=n.next,i=n.prev;e?e.prev=i:this._drawLast=i,i?i.next=e:this._drawFirst=e,delete t._order,delete this._layers[a.stamp(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var n,e=t.options.dashArray.split(","),i=[];for(n=0;n<e.length;n++)i.push(Number(e[n]));t.options._dashArray=i}},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||a.Util.requestAnimFrame(this._redraw,this))},_extendRedrawBounds:function(t){var n=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new a.Bounds,this._redrawBounds.extend(t._pxBounds.min.subtract([n,n])),this._redrawBounds.extend(t._pxBounds.max.add([n,n]))},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var n=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,n.x,n.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,n=this._redrawBounds;if(this._ctx.save(),n){var e=n.getSize();this._ctx.beginPath(),this._ctx.rect(n.min.x,n.min.y,e.x,e.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!n||t._pxBounds&&t._pxBounds.intersects(n))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,n){if(this._drawing){var e,i,l,o,s=t._parts,r=s.length,a=this._ctx;if(r){for(this._drawnLayers[t._leaflet_id]=t,a.beginPath(),a.setLineDash&&a.setLineDash(t.options&&t.options._dashArray||[]),e=0;e<r;e++){for(i=0,l=s[e].length;i<l;i++)o=s[e][i],a[i?"lineTo":"moveTo"](o.x,o.y);n&&a.closePath()}this._fillStroke(a,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var n=t._point,e=this._ctx,i=t._radius,l=(t._radiusY||i)/i;this._drawnLayers[t._leaflet_id]=t,1!==l&&(e.save(),e.scale(1,l)),e.beginPath(),e.arc(n.x,n.y/l,i,0,2*Math.PI,!1),1!==l&&e.restore(),this._fillStroke(e,t)}},_fillStroke:function(t,n){var e=n.options;e.fill&&(t.globalAlpha=e.fillOpacity,t.fillStyle=e.fillColor||e.color,t.fill(e.fillRule||"evenodd")),e.stroke&&0!==e.weight&&(t.globalAlpha=e.opacity,t.lineWidth=e.weight,t.strokeStyle=e.color,t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.stroke())},_onClick:function(t){for(var n,e,i=this._map.mouseEventToLayerPoint(t),l=this._drawFirst;l;l=l.next)n=l.layer,n.options.interactive&&n._containsPoint(i)&&!this._map._draggableMoved(n)&&(e=n);e&&(a.DomEvent._fakeStop(t),this._fireEvent([e],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var n=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,n)}},_handleMouseOut:function(t){var n=this._hoveredLayer
;n&&(a.DomUtil.removeClass(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,n){for(var e,i,l=this._drawFirst;l;l=l.next)e=l.layer,e.options.interactive&&e._containsPoint(n)&&(i=e);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(a.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,n,e){this._map._fireDOMEvent(n,e||n.type,t)},_bringToFront:function(t){var n=t._order,e=n.next,i=n.prev;e&&(e.prev=i,i?i.next=e:e&&(this._drawFirst=e),n.prev=this._drawLast,this._drawLast.next=n,n.next=null,this._drawLast=n,this._requestRedraw(t))},_bringToBack:function(t){var n=t._order,e=n.next,i=n.prev;i&&(i.next=e,e?e.prev=i:i&&(this._drawLast=i),n.prev=null,n.next=this._drawFirst,this._drawFirst.prev=n,this._drawFirst=n,this._requestRedraw(t))}}),a.Browser.canvas=function(){return!!s.createElement("canvas").getContext}(),a.canvas=function(t){return a.Browser.canvas?new a.Canvas(t):null},a.Polyline.prototype._containsPoint=function(t,n){var e,i,l,o,s,r,u=this._clickTolerance();if(!this._pxBounds.contains(t))return!1;for(e=0,o=this._parts.length;e<o;e++)for(r=this._parts[e],i=0,s=r.length,l=s-1;i<s;l=i++)if((n||0!==i)&&a.LineUtil.pointToSegmentDistance(t,r[l],r[i])<=u)return!0;return!1},a.Polygon.prototype._containsPoint=function(t){var n,e,i,l,o,s,r,u,c=!1;if(!this._pxBounds.contains(t))return!1;for(l=0,r=this._parts.length;l<r;l++)for(n=this._parts[l],o=0,u=n.length,s=u-1;o<u;s=o++)e=n[o],i=n[s],e.y>t.y!=i.y>t.y&&t.x<(i.x-e.x)*(t.y-e.y)/(i.y-e.y)+e.x&&(c=!c);return c||a.Polyline.prototype._containsPoint.call(this,t,!0)},a.CircleMarker.prototype._containsPoint=function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()},a.GeoJSON=a.FeatureGroup.extend({initialize:function(t,n){a.setOptions(this,n),this._layers={},t&&this.addData(t)},addData:function(t){var n,e,i,l=a.Util.isArray(t)?t:t.features;if(l){for(n=0,e=l.length;n<e;n++)i=l[n],(i.geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var s=a.GeoJSON.geometryToLayer(t,o);return s?(s.feature=a.GeoJSON.asFeature(t),s.defaultOptions=s.options,this.resetStyle(s),o.onEachFeature&&o.onEachFeature(t,s),this.addLayer(s)):this},resetStyle:function(t){return t.options=a.Util.extend({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(n){this._setLayerStyle(n,t)},this)},_setLayerStyle:function(t,n){"function"==typeof n&&(n=n(t.feature)),t.setStyle&&t.setStyle(n)}}),a.extend(a.GeoJSON,{geometryToLayer:function(t,n){var e,i,l,o,s="Feature"===t.type?t.geometry:t,r=s?s.coordinates:null,u=[],c=n&&n.pointToLayer,h=n&&n.coordsToLatLng||this.coordsToLatLng;if(!r&&!s)return null;switch(s.type){case"Point":return e=h(r),c?c(t,e):new a.Marker(e);case"MultiPoint":for(l=0,o=r.length;l<o;l++)e=h(r[l]),u.push(c?c(t,e):new a.Marker(e));return new a.FeatureGroup(u);case"LineString":case"MultiLineString":return i=this.coordsToLatLngs(r,"LineString"===s.type?0:1,h),new a.Polyline(i,n);case"Polygon":case"MultiPolygon":return i=this.coordsToLatLngs(r,"Polygon"===s.type?1:2,h),new a.Polygon(i,n);case"GeometryCollection":for(l=0,o=s.geometries.length;l<o;l++){var _=this.geometryToLayer({geometry:s.geometries[l],type:"Feature",properties:t.properties},n);_&&u.push(_)}return new a.FeatureGroup(u);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new a.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,n,e){for(var i,l=[],o=0,s=t.length;o<s;o++)i=n?this.coordsToLatLngs(t[o],n-1,e):(e||this.coordsToLatLng)(t[o]),l.push(i);return l},latLngToCoords:function(t){return void 0!==t.alt?[t.lng,t.lat,t.alt]:[t.lng,t.lat]},latLngsToCoords:function(t,n,e){for(var i=[],l=0,o=t.length;l<o;l++)i.push(n?a.GeoJSON.latLngsToCoords(t[l],n-1,e):a.GeoJSON.latLngToCoords(t[l]));return!n&&e&&i.push(i[0]),i},getFeature:function(t,n){return t.feature?a.extend({},t.feature,{geometry:n}):a.GeoJSON.asFeature(n)},asFeature:function(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var h={toGeoJSON:function(){return a.GeoJSON.getFeature(this,{type:"Point",coordinates:a.GeoJSON.latLngToCoords(this.getLatLng())})}};a.Marker.include(h),a.Circle.include(h),a.CircleMarker.include(h),a.Polyline.prototype.toGeoJSON=function(){var t=!a.Polyline._flat(this._latlngs),n=a.GeoJSON.latLngsToCoords(this._latlngs,t?1:0);return a.GeoJSON.getFeature(this,{type:(t?"Multi":"")+"LineString",coordinates:n})},a.Polygon.prototype.toGeoJSON=function(){var t=!a.Polyline._flat(this._latlngs),n=t&&!a.Polyline._flat(this._latlngs[0]),e=a.GeoJSON.latLngsToCoords(this._latlngs,n?2:t?1:0,!0);return t||(e=[e]),a.GeoJSON.getFeature(this,{type:(n?"Multi":"")+"Polygon",coordinates:e})},a.LayerGroup.include({toMultiPoint:function(){var t=[];return this.eachLayer(function(n){t.push(n.toGeoJSON().geometry.coordinates)}),a.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint();var n="GeometryCollection"===t,e=[];return this.eachLayer(function(t){if(t.toGeoJSON){var i=t.toGeoJSON();e.push(n?i.geometry:a.GeoJSON.asFeature(i))}}),n?a.GeoJSON.getFeature(this,{geometries:e,type:"GeometryCollection"}):{type:"FeatureCollection",features:e}}}),a.geoJSON=function(t,n){return new a.GeoJSON(t,n)},a.geoJson=a.geoJSON,a.Draggable=a.Evented.extend({options:{clickTolerance:3},statics:{START:a.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,n,e){this._element=t,this._dragStartTarget=n||t,this._preventOutline=e},enable:function(){this._enabled||(a.DomEvent.on(this._dragStartTarget,a.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(a.Draggable._dragging===this&&this.finishDrag(),a.DomEvent.off(this._dragStartTarget,a.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!a.DomUtil.hasClass(this._element,"leaflet-zoom-anim")&&!(a.Draggable._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(a.Draggable._dragging=this,this._preventOutline&&a.DomUtil.preventOutline(this._element),a.DomUtil.disableImageDrag(),a.DomUtil.disableTextSelection(),this._moving)))){this.fire("down");var n=t.touches?t.touches[0]:t;this._startPoint=new a.Point(n.clientX,n.clientY),a.DomEvent.on(s,a.Draggable.MOVE[t.type],this._onMove,this).on(s,a.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled){if(t.touches&&t.touches.length>1)return void(this._moved=!0);var n=t.touches&&1===t.touches.length?t.touches[0]:t,e=new a.Point(n.clientX,n.clientY),i=e.subtract(this._startPoint);(i.x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(a.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=a.DomUtil.getPosition(this._element).subtract(i),a.DomUtil.addClass(s.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,o.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),a.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,a.Util.cancelAnimFrame(this._animRequest),this._lastEvent=t,this._animRequest=a.Util.requestAnimFrame(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),a.DomUtil.setPosition(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){a.DomUtil.removeClass(s.body,"leaflet-dragging"),this._lastTarget&&(a.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in a.Draggable.MOVE)a.DomEvent.off(s,a.Draggable.MOVE[t],this._onMove,this).off(s,a.Draggable.END[t],this._onUp,this);a.DomUtil.enableImageDrag(),a.DomUtil.enableTextSelection(),this._moved&&this._moving&&(a.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,a.Draggable._dragging=!1}}),a.Handler=a.Class.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}}),a.Map.mergeOptions({dragging:!0,inertia:!a.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0}),a.Map.Drag=a.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new a.Draggable(t._mapPane,t._container),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}a.DomUtil.addClass(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){a.DomUtil.removeClass(this._map._container,"leaflet-grab"),a.DomUtil.removeClass(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var t=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var n=a.latLngBounds(this._map.options.maxBounds);this._offsetLimit=a.bounds(this._map.latLngToContainerPoint(n.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(n.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var n=this._lastTime=+new Date,e=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(e),this._times.push(n),n-this._times[0]>50&&(this._positions.shift(),this._times.shift())}this._map.fire("move",t).fire("drag",t)},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),n=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=n.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,n){return t-(t-n)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),n=this._offsetLimit;t.x<n.min.x&&(t.x=this._viscousLimit(t.x,n.min.x)),t.y<n.min.y&&(t.y=this._viscousLimit(t.y,n.min.y)),t.x>n.max.x&&(t.x=this._viscousLimit(t.x,n.max.x)),t.y>n.max.y&&(t.y=this._viscousLimit(t.y,n.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,n=Math.round(t/2),e=this._initialWorldOffset,i=this._draggable._newPos.x,l=(i-n+e)%t+n-e,o=(i+n+e)%t-n-e,s=Math.abs(l+e)<Math.abs(o+e)?l:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(t){var n=this._map,e=n.options,i=!e.inertia||this._times.length<2;if(n.fire("dragend",t),i)n.fire("moveend");else{var l=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,s=e.easeLinearity,r=l.multiplyBy(s/o),u=r.distanceTo([0,0]),c=Math.min(e.inertiaMaxSpeed,u),h=r.multiplyBy(c/u),_=c/(e.inertiaDeceleration*s),p=h.multiplyBy(-_/2).round();p.x||p.y?(p=n._limitOffset(p,n.options.maxBounds),a.Util.requestAnimFrame(function(){n.panBy(p,{duration:_,easeLinearity:s,noMoveStart:!0,animate:!0})})):n.fire("moveend")}}}),a.Map.addInitHook("addHandler","dragging",a.Map.Drag),a.Map.mergeOptions({doubleClickZoom:!0}),a.Map.DoubleClickZoom=a.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var n=this._map,e=n.getZoom(),i=n.options.zoomDelta,l=t.originalEvent.shiftKey?e-i:e+i;"center"===n.options.doubleClickZoom?n.setZoom(l):n.setZoomAround(t.containerPoint,l)}}),a.Map.addInitHook("addHandler","doubleClickZoom",a.Map.DoubleClickZoom),a.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),a.Map.ScrollWheelZoom=a.Handler.extend({addHooks:function(){a.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){a.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var n=a.DomEvent.getWheelDelta(t),e=this._map.options.wheelDebounceTime;this._delta+=n,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(e-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a.bind(this._performZoom,this),i),a.DomEvent.stop(t)},_performZoom:function(){var t=this._map,n=t.getZoom(),e=this._map.options.zoomSnap||0;t._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),l=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,o=e?Math.ceil(l/e)*e:l,s=t._limitZoom(n+(this._delta>0?o:-o))-n;this._delta=0,this._startTime=null,s&&("center"===t.options.scrollWheelZoom?t.setZoom(n+s):t.setZoomAround(this._lastMousePos,n+s))}}),a.Map.addInitHook("addHandler","scrollWheelZoom",a.Map.ScrollWheelZoom),a.extend(a.DomEvent,{_touchstart:a.Browser.msPointer?"MSPointerDown":a.Browser.pointer?"pointerdown":"touchstart",_touchend:a.Browser.msPointer?"MSPointerUp":a.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,n,e){function i(t){var n;if(a.Browser.pointer){if(!a.Browser.edge||"mouse"===t.pointerType)return;n=a.DomEvent._pointersCount}else n=t.touches.length;if(!(n>1)){var e=Date.now(),i=e-(o||e);s=t.touches?t.touches[0]:t,r=i>0&&i<=u,o=e}}function l(t){if(r&&!s.cancelBubble){if(a.Browser.pointer){if(!a.Browser.edge||"mouse"===t.pointerType)return;var e,i,l={};for(i in s)e=s[i],l[i]=e&&e.bind?e.bind(s):e;s=l}s.type="dblclick",n(s),o=null}}var o,s,r=!1,u=250,c="_leaflet_",h=this._touchstart,_=this._touchend;return t[c+h+e]=i,t[c+_+e]=l,t[c+"dblclick"+e]=n,t.addEventListener(h,i,!1),t.addEventListener(_,l,!1),t.addEventListener("dblclick",n,!1),this},removeDoubleTapListener:function(t,n){var e="_leaflet_",i=t[e+this._touchstart+n],l=t[e+this._touchend+n],o=t[e+"dblclick"+n];return t.removeEventListener(this._touchstart,i,!1),t.removeEventListener(this._touchend,l,!1),a.Browser.edge||t.removeEventListener("dblclick",o,!1),this}}),a.extend(a.DomEvent,{POINTER_DOWN:a.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:a.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:a.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:a.Browser.msPointer?"MSPointerCancel":"pointercancel",TAG_WHITE_LIST:["INPUT","SELECT","OPTION"],_pointers:{},_pointersCount:0,addPointerListener:function(t,n,e,i){return"touchstart"===n?this._addPointerStart(t,e,i):"touchmove"===n?this._addPointerMove(t,e,i):"touchend"===n&&this._addPointerEnd(t,e,i),this},removePointerListener:function(t,n,e){var i=t["_leaflet_"+n+e];return"touchstart"===n?t.removeEventListener(this.POINTER_DOWN,i,!1):"touchmove"===n?t.removeEventListener(this.POINTER_MOVE,i,!1):"touchend"===n&&(t.removeEventListener(this.POINTER_UP,i,!1),t.removeEventListener(this.POINTER_CANCEL,i,!1)),this},_addPointerStart:function(t,n,e){var i=a.bind(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(this.TAG_WHITE_LIST.indexOf(t.target.tagName)<0))return;a.DomEvent.preventDefault(t)}this._handlePointer(t,n)},this);if(t["_leaflet_touchstart"+e]=i,t.addEventListener(this.POINTER_DOWN,i,!1),!this._pointerDocListener){var l=a.bind(this._globalPointerUp,this);s.documentElement.addEventListener(this.POINTER_DOWN,a.bind(this._globalPointerDown,this),!0),s.documentElement.addEventListener(this.POINTER_MOVE,a.bind(this._globalPointerMove,this),!0),s.documentElement.addEventListener(this.POINTER_UP,l,!0),s.documentElement.addEventListener(this.POINTER_CANCEL,l,!0),this._pointerDocListener=!0}},_globalPointerDown:function(t){this._pointers[t.pointerId]=t,this._pointersCount++},_globalPointerMove:function(t){this._pointers[t.pointerId]&&(this._pointers[t.pointerId]=t)},_globalPointerUp:function(t){delete this._pointers[t.pointerId],this._pointersCount--},_handlePointer:function(t,n){t.touches=[];for(var e in this._pointers)t.touches.push(this._pointers[e]);t.changedTouches=[t],n(t)},_addPointerMove:function(t,n,e){var i=a.bind(function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&this._handlePointer(t,n)},this);t["_leaflet_touchmove"+e]=i,t.addEventListener(this.POINTER_MOVE,i,!1)},_addPointerEnd:function(t,n,e){var i=a.bind(function(t){this._handlePointer(t,n)},this);t["_leaflet_touchend"+e]=i,t.addEventListener(this.POINTER_UP,i,!1),t.addEventListener(this.POINTER_CANCEL,i,!1)}}),a.Map.mergeOptions({touchZoom:a.Browser.touch&&!a.Browser.android23,bounceAtZoomLimits:!0}),a.Map.TouchZoom=a.Handler.extend({addHooks:function(){a.DomUtil.addClass(this._map._container,"leaflet-touch-zoom"),a.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){a.DomUtil.removeClass(this._map._container,"leaflet-touch-zoom"),a.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var n=this._map;if(t.touches&&2===t.touches.length&&!n._animatingZoom&&!this._zooming){var e=n.mouseEventToContainerPoint(t.touches[0]),i=n.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=n.getSize()._divideBy(2),this._startLatLng=n.containerPointToLatLng(this._centerPoint),"center"!==n.options.touchZoom&&(this._pinchStartLatLng=n.containerPointToLatLng(e.add(i)._divideBy(2))),this._startDist=e.distanceTo(i),this._startZoom=n.getZoom(),this._moved=!1,this._zooming=!0,n._stop(),a.DomEvent.on(s,"touchmove",this._onTouchMove,this).on(s,"touchend",this._onTouchEnd,this),a.DomEvent.preventDefault(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var n=this._map,e=n.mouseEventToContainerPoint(t.touches[0]),i=n.mouseEventToContainerPoint(t.touches[1]),l=e.distanceTo(i)/this._startDist;if(this._zoom=n.getScaleZoom(l,this._startZoom),!n.options.bounceAtZoomLimits&&(this._zoom<n.getMinZoom()&&l<1||this._zoom>n.getMaxZoom()&&l>1)&&(this._zoom=n._limitZoom(this._zoom)),"center"===n.options.touchZoom){if(this._center=this._startLatLng,1===l)return}else{var o=e._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===l&&0===o.x&&0===o.y)return;this._center=n.unproject(n.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}this._moved||(n._moveStart(!0),this._moved=!0),a.Util.cancelAnimFrame(this._animRequest);var s=a.bind(n._move,n,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=a.Util.requestAnimFrame(s,this,!0),a.DomEvent.preventDefault(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);this._zooming=!1,a.Util.cancelAnimFrame(this._animRequest),a.DomEvent.off(s,"touchmove",this._onTouchMove).off(s,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}}),a.Map.addInitHook("addHandler","touchZoom",a.Map.TouchZoom),a.Map.mergeOptions({tap:!0,tapTolerance:15}),a.Map.Tap=a.Handler.extend({addHooks:function(){a.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){a.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(a.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var n=t.touches[0],e=n.target;this._startPos=this._newPos=new a.Point(n.clientX,n.clientY),e.tagName&&"a"===e.tagName.toLowerCase()&&a.DomUtil.addClass(e,"leaflet-active"),this._holdTimeout=setTimeout(a.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",n))},this),1e3),this._simulateEvent("mousedown",n),a.DomEvent.on(s,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),a.DomEvent.off(s,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var n=t.changedTouches[0],e=n.target;e&&e.tagName&&"a"===e.tagName.toLowerCase()&&a.DomUtil.removeClass(e,"leaflet-active"),this._simulateEvent("mouseup",n),this._isTapValid()&&this._simulateEvent("click",n)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var n=t.touches[0];this._newPos=new a.Point(n.clientX,n.clientY),this._simulateEvent("mousemove",n)},_simulateEvent:function(t,n){var e=s.createEvent("MouseEvents");e._simulated=!0,n.target._simulatedClick=!0,e.initMouseEvent(t,!0,!0,o,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(e)}}),a.Browser.touch&&!a.Browser.pointer&&a.Map.addInitHook("addHandler","tap",a.Map.Tap),a.Map.mergeOptions({boxZoom:!0}),a.Map.BoxZoom=a.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){a.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){a.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._resetState(),a.DomUtil.disableTextSelection(),a.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(t),a.DomEvent.on(s,{contextmenu:a.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=a.DomUtil.create("div","leaflet-zoom-box",this._container),a.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var n=new a.Bounds(this._point,this._startPoint),e=n.getSize();a.DomUtil.setPosition(this._box,n.min),this._box.style.width=e.x+"px",this._box.style.height=e.y+"px"},_finish:function(){this._moved&&(a.DomUtil.remove(this._box),a.DomUtil.removeClass(this._container,"leaflet-crosshair")),a.DomUtil.enableTextSelection(),a.DomUtil.enableImageDrag(),a.DomEvent.off(s,{contextmenu:a.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){setTimeout(a.bind(this._resetState,this),0);var n=new a.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(n).fire("boxzoomend",{boxZoomBounds:n})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),a.Map.addInitHook("addHandler","boxZoom",a.Map.BoxZoom),a.Map.mergeOptions({keyboard:!0,keyboardPanDelta:80}),a.Map.Keyboard=a.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),a.DomEvent.on(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),a.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=s.body,n=s.documentElement,e=t.scrollTop||n.scrollTop,i=t.scrollLeft||n.scrollLeft;this._map._container.focus(),o.scrollTo(i,e)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var n,e,i=this._panKeys={},l=this.keyCodes;for(n=0,e=l.left.length;n<e;n++)i[l.left[n]]=[-1*t,0];for(n=0,e=l.right.length;n<e;n++)i[l.right[n]]=[t,0];for(n=0,e=l.down.length;n<e;n++)i[l.down[n]]=[0,t];for(n=0,e=l.up.length;n<e;n++)i[l.up[n]]=[0,-1*t]},_setZoomDelta:function(t){var n,e,i=this._zoomKeys={},l=this.keyCodes;for(n=0,e=l.zoomIn.length;n<e;n++)i[l.zoomIn[n]]=t;for(n=0,e=l.zoomOut.length;n<e;n++)i[l.zoomOut[n]]=-t},_addHooks:function(){a.DomEvent.on(s,"keydown",this._onKeyDown,this)},_removeHooks:function(){a.DomEvent.off(s,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var n,e=t.keyCode,i=this._map;if(e in this._panKeys){if(i._panAnim&&i._panAnim._inProgress)return;n=this._panKeys[e],t.shiftKey&&(n=a.point(n).multiplyBy(3)),i.panBy(n),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds)}else if(e in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else{if(27!==e)return;i.closePopup()}a.DomEvent.stop(t)}}}),a.Map.addInitHook("addHandler","keyboard",a.Map.Keyboard),a.Handler.MarkerDrag=a.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new a.Draggable(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),a.DomUtil.addClass(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&a.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(t){var n=this._marker,e=n._shadow,i=a.DomUtil.getPosition(n._icon),l=n._map.layerPointToLatLng(i);e&&a.DomUtil.setPosition(e,i),n._latlng=l,t.latlng=l,t.oldLatLng=this._oldLatLng,n.fire("move",t).fire("drag",t)},_onDragEnd:function(t){delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),a.Control=a.Class.extend({options:{position:"topright"},initialize:function(t){a.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var n=this._map;return n&&n.removeControl(this),this.options.position=t,n&&n.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var n=this._container=this.onAdd(t),e=this.getPosition(),i=t._controlCorners[e];return a.DomUtil.addClass(n,"leaflet-control"),-1!==e.indexOf("bottom")?i.insertBefore(n,i.firstChild):i.appendChild(n),this},remove:function(){return this._map?(a.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),a.control=function(t){return new a.Control(t)},a.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){function t(t,l){var o=e+t+" "+e+l;n[t+l]=a.DomUtil.create("div",o,i)}var n=this._controlCorners={},e="leaflet-",i=this._controlContainer=a.DomUtil.create("div",e+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){a.DomUtil.remove(this._controlContainer)}}),a.Control.Zoom=a.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var n="leaflet-control-zoom",e=a.DomUtil.create("div",n+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,n+"-in",e,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,n+"-out",e,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),e},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,n,e,i,l){var o=a.DomUtil.create("a",e,i);return o.innerHTML=t,o.href="#",o.title=n,o.setAttribute("role","button"),o.setAttribute("aria-label",n),a.DomEvent.on(o,"mousedown dblclick",a.DomEvent.stopPropagation).on(o,"click",a.DomEvent.stop).on(o,"click",l,this).on(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,n="leaflet-disabled";a.DomUtil.removeClass(this._zoomInButton,n),a.DomUtil.removeClass(this._zoomOutButton,n),(this._disabled||t._zoom===t.getMinZoom())&&a.DomUtil.addClass(this._zoomOutButton,n),(this._disabled||t._zoom===t.getMaxZoom())&&a.DomUtil.addClass(this._zoomInButton,n)}}),a.Map.mergeOptions({zoomControl:!0}),a.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new a.Control.Zoom,this.addControl(this.zoomControl))}),a.control.zoom=function(t){return new a.Control.Zoom(t)},a.Control.Attribution=a.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){a.setOptions(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=a.DomUtil.create("div","leaflet-control-attribution"),a.DomEvent&&a.DomEvent.disableClickPropagation(this._container);for(var n in t._layers)t._layers[n].getAttribution&&this.addAttribution(t._layers[n].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var n in this._attributions)this._attributions[n]&&t.push(n);var e=[];this.options.prefix&&e.push(this.options.prefix),t.length&&e.push(t.join(", ")),this._container.innerHTML=e.join(" | ")}}}),a.Map.mergeOptions({attributionControl:!0}),a.Map.addInitHook(function(){this.options.attributionControl&&(new a.Control.Attribution).addTo(this)}),a.control.attribution=function(t){return new a.Control.Attribution(t)},a.Control.Scale=a.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var n=a.DomUtil.create("div","leaflet-control-scale"),e=this.options
;return this._addScales(e,"leaflet-control-scale-line",n),t.on(e.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,n,e){t.metric&&(this._mScale=a.DomUtil.create("div",n,e)),t.imperial&&(this._iScale=a.DomUtil.create("div",n,e))},_update:function(){var t=this._map,n=t.getSize().y/2,e=t.distance(t.containerPointToLatLng([0,n]),t.containerPointToLatLng([this.options.maxWidth,n]));this._updateScales(e)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var n=this._getRoundNum(t),e=n<1e3?n+" m":n/1e3+" km";this._updateScale(this._mScale,e,n/t)},_updateImperial:function(t){var n,e,i,l=3.2808399*t;l>5280?(n=l/5280,e=this._getRoundNum(n),this._updateScale(this._iScale,e+" mi",e/n)):(i=this._getRoundNum(l),this._updateScale(this._iScale,i+" ft",i/l))},_updateScale:function(t,n,e){t.style.width=Math.round(this.options.maxWidth*e)+"px",t.innerHTML=n},_getRoundNum:function(t){var n=Math.pow(10,(Math.floor(t)+"").length-1),e=t/n;return e=e>=10?10:e>=5?5:e>=3?3:e>=2?2:1,n*e}}),a.control.scale=function(t){return new a.Control.Scale(t)},a.Control.Layers=a.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,n,e,i){return e<i?-1:i<e?1:0}},initialize:function(t,n,e){a.setOptions(this,e),this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var i in t)this._addLayer(t[i],i);for(i in n)this._addLayer(n[i],i,!0)},onAdd:function(t){return this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this),this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,n){return this._addLayer(t,n),this._map?this._update():this},addOverlay:function(t,n){return this._addLayer(t,n,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var n=this._getLayer(a.stamp(t));return n&&this._layers.splice(this._layers.indexOf(n),1),this._map?this._update():this},expand:function(){a.DomUtil.addClass(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(a.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):a.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return a.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",n=this._container=a.DomUtil.create("div",t),e=this.options.collapsed;n.setAttribute("aria-haspopup",!0),a.DomEvent.disableClickPropagation(n),a.Browser.touch||a.DomEvent.disableScrollPropagation(n);var i=this._form=a.DomUtil.create("form",t+"-list");e&&(this._map.on("click",this.collapse,this),a.Browser.android||a.DomEvent.on(n,{mouseenter:this.expand,mouseleave:this.collapse},this));var l=this._layersLink=a.DomUtil.create("a",t+"-toggle",n);l.href="#",l.title="Layers",a.Browser.touch?a.DomEvent.on(l,"click",a.DomEvent.stop).on(l,"click",this.expand,this):a.DomEvent.on(l,"focus",this.expand,this),a.DomEvent.on(i,"click",function(){setTimeout(a.bind(this._onInputClick,this),0)},this),e||this.expand(),this._baseLayersList=a.DomUtil.create("div",t+"-base",i),this._separator=a.DomUtil.create("div",t+"-separator",i),this._overlaysList=a.DomUtil.create("div",t+"-overlays",i),n.appendChild(i)},_getLayer:function(t){for(var n=0;n<this._layers.length;n++)if(this._layers[n]&&a.stamp(this._layers[n].layer)===t)return this._layers[n]},_addLayer:function(t,n,e){t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:n,overlay:e}),this.options.sortLayers&&this._layers.sort(a.bind(function(t,n){return this.options.sortFunction(t.layer,n.layer,t.name,n.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(!this._container)return this;a.DomUtil.empty(this._baseLayersList),a.DomUtil.empty(this._overlaysList);var t,n,e,i,l=0;for(e=0;e<this._layers.length;e++)i=this._layers[e],this._addItem(i),n=n||i.overlay,t=t||!i.overlay,l+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&l>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=n&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var n=this._getLayer(a.stamp(t.target)),e=n.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;e&&this._map.fire(e,n)},_createRadioElement:function(t,n){var e='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(n?' checked="checked"':"")+"/>",i=s.createElement("div");return i.innerHTML=e,i.firstChild},_addItem:function(t){var n,e=s.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?(n=s.createElement("input"),n.type="checkbox",n.className="leaflet-control-layers-selector",n.defaultChecked=i):n=this._createRadioElement("leaflet-base-layers",i),n.layerId=a.stamp(t.layer),a.DomEvent.on(n,"click",this._onInputClick,this);var l=s.createElement("span");l.innerHTML=" "+t.name;var o=s.createElement("div");return e.appendChild(o),o.appendChild(n),o.appendChild(l),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){var t,n,e,i=this._form.getElementsByTagName("input"),l=[],o=[];this._handlingClick=!0;for(var s=i.length-1;s>=0;s--)t=i[s],n=this._getLayer(t.layerId).layer,e=this._map.hasLayer(n),t.checked&&!e?l.push(n):!t.checked&&e&&o.push(n);for(s=0;s<o.length;s++)this._map.removeLayer(o[s]);for(s=0;s<l.length;s++)this._map.addLayer(l[s]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,n,e=this._form.getElementsByTagName("input"),i=this._map.getZoom(),l=e.length-1;l>=0;l--)t=e[l],n=this._getLayer(t.layerId).layer,t.disabled=void 0!==n.options.minZoom&&i<n.options.minZoom||void 0!==n.options.maxZoom&&i>n.options.maxZoom},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),a.control.layers=function(t,n,e){return new a.Control.Layers(t,n,e)}}(window,document)}});
//# sourceMappingURL=/Users/manticarodrigo/@manticarodrigo/tmh/tmh-ionic/www/build/0.main.js.map